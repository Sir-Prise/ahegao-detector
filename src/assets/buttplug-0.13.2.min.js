/*! For license information please see buttplug.min.js.LICENSE.txt */
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["buttplug-commonjs"]=t():e.Buttplug=t()}(window,(function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(r,i,function(t){return e[t]}.bind(null,i));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="./src/index.ts")}({"../../node_modules/base64-js/index.js":function(e,t,r){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function toByteArray(e){for(var t,r=getLens(e),i=r[0],s=r[1],a=new n(function _byteLength(e,t,r){return 3*(t+r)/4-r}(0,i,s)),c=0,u=s>0?i-4:i,d=0;d<u;d+=4)t=o[e.charCodeAt(d)]<<18|o[e.charCodeAt(d+1)]<<12|o[e.charCodeAt(d+2)]<<6|o[e.charCodeAt(d+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;2===s&&(t=o[e.charCodeAt(d)]<<2|o[e.charCodeAt(d+1)]>>4,a[c++]=255&t);1===s&&(t=o[e.charCodeAt(d)]<<10|o[e.charCodeAt(d+1)]<<4|o[e.charCodeAt(d+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t);return a},t.fromByteArray=function fromByteArray(e){for(var t,r=e.length,o=r%3,n=[],s=0,a=r-o;s<a;s+=16383)n.push(encodeChunk(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],n.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],n.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return n.join("")};for(var i=[],o=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)i[a]=s[a],o[s.charCodeAt(a)]=a;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function encodeChunk(e,t,r){for(var o,n,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(n=o)>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},"../../node_modules/buffer/index.js":function(e,t,r){"use strict";(function(e){var i=r("../../node_modules/base64-js/index.js"),o=r("../../node_modules/ieee754/index.js"),n=r("../../node_modules/isarray/index.js");function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer.prototype:(null===e&&(e=new Buffer(t)),e.length=t),e}function Buffer(e,t,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function fromArrayBuffer(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);Buffer.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer.prototype:e=fromArrayLike(e,t);return e}(e,t,r,i):"string"==typeof t?function fromString(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(t,r),o=(e=createBuffer(e,i)).write(t,r);o!==i&&(e=e.slice(0,o));return e}(e,t,r):function fromObject(e,t){if(Buffer.isBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function isnan(e){return e!=e}(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&n(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(i)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),i=!0}}function slowToString(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function swap(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function bidirectionalIndexOf(e,t,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,i,o);if("number"==typeof t)return t&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,i,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,i,o){var n,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function read(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var u=-1;for(n=r;n<a;n++)if(read(e,n)===read(t,-1===u?0:n-u)){if(-1===u&&(u=n),n-u+1===c)return u*s}else-1!==u&&(n-=n-u),u=-1}else for(r+c>a&&(r=a-c),n=r;n>=0;n--){for(var d=!0,l=0;l<c;l++)if(read(e,n+l)!==read(t,l)){d=!1;break}if(d)return n}return-1}function hexWrite(e,t,r,i){r=Number(r)||0;var o=e.length-r;i?(i=Number(i))>o&&(i=o):i=o;var n=t.length;if(n%2!=0)throw new TypeError("Invalid hex string");i>n/2&&(i=n/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function utf8Write(e,t,r,i){return blitBuffer(utf8ToBytes(t,e.length-r),e,r,i)}function asciiWrite(e,t,r,i){return blitBuffer(function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function latin1Write(e,t,r,i){return asciiWrite(e,t,r,i)}function base64Write(e,t,r,i){return blitBuffer(base64ToBytes(t),e,r,i)}function ucs2Write(e,t,r,i){return blitBuffer(function utf16leToBytes(e,t){for(var r,i,o,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,o=r%256,n.push(o),n.push(i);return n}(t,e.length-r),e,r,i)}function base64Slice(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function utf8Slice(e,t,r){r=Math.min(e.length,r);for(var i=[],o=t;o<r;){var n,s,a,c,u=e[o],d=null,l=u>239?4:u>223?3:u>191?2:1;if(o+l<=r)switch(l){case 1:u<128&&(d=u);break;case 2:128==(192&(n=e[o+1]))&&(c=(31&u)<<6|63&n)>127&&(d=c);break;case 3:n=e[o+1],s=e[o+2],128==(192&n)&&128==(192&s)&&(c=(15&u)<<12|(63&n)<<6|63&s)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:n=e[o+1],s=e[o+2],a=e[o+3],128==(192&n)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&n)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(d=c)}null===d?(d=65533,l=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),o+=l}return function decodeCodePointsArray(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}t.Buffer=Buffer,t.SlowBuffer=function SlowBuffer(e){+e!=e&&(e=0);return Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(e){return e.__proto__=Buffer.prototype,e},Buffer.from=function(e,t,r){return from(null,e,t,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(e,t,r){return function alloc(e,t,r,i){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof i?createBuffer(e,t).fill(r,i):createBuffer(e,t).fill(r):createBuffer(e,t)}(null,e,t,r)},Buffer.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer.isBuffer=function isBuffer(e){return!(null==e||!e._isBuffer)},Buffer.compare=function compare(e,t){if(!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,o=0,n=Math.min(r,i);o<n;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:i<r?1:0},Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(e,t){if(!n(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=Buffer.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!Buffer.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function toString(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function inspect(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},Buffer.prototype.compare=function compare(e,t,r,i,o){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var n=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(n,s),c=this.slice(i,o),u=e.slice(t,r),d=0;d<a;++d)if(c[d]!==u[d]){n=c[d],s=u[d];break}return n<s?-1:s<n?1:0},Buffer.prototype.includes=function includes(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function indexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer.prototype.write=function write(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var n=!1;;)switch(i){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function asciiSlice(e,t,r){var i="";r=Math.min(e.length,r);for(var o=t;o<r;++o)i+=String.fromCharCode(127&e[o]);return i}function latin1Slice(e,t,r){var i="";r=Math.min(e.length,r);for(var o=t;o<r;++o)i+=String.fromCharCode(e[o]);return i}function hexSlice(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var o="",n=t;n<r;++n)o+=toHex(e[n]);return o}function utf16leSlice(e,t,r){for(var i=e.slice(t,r),o="",n=0;n<i.length;n+=2)o+=String.fromCharCode(i[n]+256*i[n+1]);return o}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,i,o,n){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<n)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,i){t<0&&(t=65535+t+1);for(var o=0,n=Math.min(e.length-r,2);o<n;++o)e[r+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function objectWriteUInt32(e,t,r,i){t<0&&(t=4294967295+t+1);for(var o=0,n=Math.min(e.length-r,4);o<n;++o)e[r+o]=t>>>8*(i?o:3-o)&255}function checkIEEE754(e,t,r,i,o,n){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,i,n){return n||checkIEEE754(e,0,r,4),o.write(e,t,r,i,23,4),r+4}function writeDouble(e,t,r,i,n){return n||checkIEEE754(e,0,r,8),o.write(e,t,r,i,52,8),r+8}Buffer.prototype.slice=function slice(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),Buffer.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer.prototype;else{var o=t-e;r=new Buffer(o,void 0);for(var n=0;n<o;++n)r[n]=this[n+e]}return r},Buffer.prototype.readUIntLE=function readUIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],o=1,n=0;++n<t&&(o*=256);)i+=this[e+n]*o;return i},Buffer.prototype.readUIntBE=function readUIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},Buffer.prototype.readUInt8=function readUInt8(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function readUInt16LE(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function readIntLE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=this[e],o=1,n=0;++n<t&&(o*=256);)i+=this[e+n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function readIntBE(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var i=t,o=1,n=this[e+--i];i>0&&(o*=256);)n+=this[e+--i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readInt8=function readInt8(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function readInt16LE(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function readInt16BE(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function readInt32LE(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function readFloatLE(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(e,t){return t||checkOffset(e,4,this.length),o.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(e,t){return t||checkOffset(e,8,this.length),o.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(e,t,r,i){(e=+e,t|=0,r|=0,i)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,n=0;for(this[t]=255&e;++n<r&&(o*=256);)this[t+n]=e/o&255;return t+r},Buffer.prototype.writeUIntBE=function writeUIntBE(e,t,r,i){(e=+e,t|=0,r|=0,i)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,n=1;for(this[t+o]=255&e;--o>=0&&(n*=256);)this[t+o]=e/n&255;return t+r},Buffer.prototype.writeUInt8=function writeUInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeIntLE=function writeIntLE(e,t,r,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var n=0,s=1,a=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeIntBE=function writeIntBE(e,t,r,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var n=r-1,s=1,a=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+r},Buffer.prototype.writeInt8=function writeInt8(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function writeInt16LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer.prototype.writeInt16BE=function writeInt16BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer.prototype.writeInt32LE=function writeInt32LE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer.prototype.writeInt32BE=function writeInt32BE(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer.prototype.writeFloatLE=function writeFloatLE(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function writeFloatBE(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer.prototype.copy=function copy(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var o,n=i-r;if(this===e&&r<t&&t<i)for(o=n-1;o>=0;--o)e[o+t]=this[o+r];else if(n<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(o=0;o<n;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+n),t);return n},Buffer.prototype.fill=function fill(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var s=Buffer.isBuffer(e)?e:utf8ToBytes(new Buffer(e,i).toString()),a=s.length;for(n=0;n<r-t;++n)this[n+t]=s[n%a]}return this};var s=/[^+\/0-9A-Za-z-_]/g;function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var r;t=t||1/0;for(var i=e.length,o=null,n=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&n.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&n.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function base64ToBytes(e){return i.toByteArray(function base64clean(e){if((e=function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,r,i){for(var o=0;o<i&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r("../../node_modules/webpack/buildin/global.js"))},"../../node_modules/class-transformer/ClassTransformer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("../../node_modules/class-transformer/TransformOperationExecutor.js"),o=function(){function ClassTransformer(){}return ClassTransformer.prototype.classToPlain=function(e,t){return new i.TransformOperationExecutor(i.TransformationType.CLASS_TO_PLAIN,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToPlainFromExist=function(e,t,r){return new i.TransformOperationExecutor(i.TransformationType.CLASS_TO_PLAIN,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.plainToClass=function(e,t,r){return new i.TransformOperationExecutor(i.TransformationType.PLAIN_TO_CLASS,r||{}).transform(void 0,t,e,void 0,void 0,void 0)},ClassTransformer.prototype.plainToClassFromExist=function(e,t,r){return new i.TransformOperationExecutor(i.TransformationType.PLAIN_TO_CLASS,r||{}).transform(e,t,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToClass=function(e,t){return new i.TransformOperationExecutor(i.TransformationType.CLASS_TO_CLASS,t||{}).transform(void 0,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.classToClassFromExist=function(e,t,r){return new i.TransformOperationExecutor(i.TransformationType.CLASS_TO_CLASS,r||{}).transform(t,e,void 0,void 0,void 0,void 0)},ClassTransformer.prototype.serialize=function(e,t){return JSON.stringify(this.classToPlain(e,t))},ClassTransformer.prototype.deserialize=function(e,t,r){var i=JSON.parse(t);return this.plainToClass(e,i,r)},ClassTransformer.prototype.deserializeArray=function(e,t,r){var i=JSON.parse(t);return this.plainToClass(e,i,r)},ClassTransformer}();t.ClassTransformer=o},"../../node_modules/class-transformer/TransformOperationExecutor.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,o=r("../../node_modules/class-transformer/storage.js");!function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(i=t.TransformationType||(t.TransformationType={}));var n=function(){function TransformOperationExecutor(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return TransformOperationExecutor.prototype.transform=function(t,r,n,s,a,c){var u=this;if(void 0===c&&(c=0),Array.isArray(r)||r instanceof Set){var d=s&&this.transformationType===i.PLAIN_TO_CLASS?function instantiateArrayType(e){var t=new e;if(!(t instanceof Set||"push"in t))return[];return t}(s):[];return r.forEach((function(e,r){var o=t?t[r]:void 0;if(u.options.enableCircularCheck&&u.isCircular(e))u.transformationType===i.CLASS_TO_CLASS&&(d instanceof Set?d.add(e):d.push(e));else{var s=void 0;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(u.transformationType===i.PLAIN_TO_CLASS){s=n.options.discriminator.subTypes.find((function(t){return t.name===e[n.options.discriminator.property]}));var a={newObject:d,object:e,property:void 0},l=n.typeFunction(a);s=void 0===s?l:s.value,n.options.keepDiscriminatorProperty||delete e[n.options.discriminator.property]}u.transformationType===i.CLASS_TO_CLASS&&(s=e.constructor),u.transformationType===i.CLASS_TO_PLAIN&&(e[n.options.discriminator.property]=n.options.discriminator.subTypes.find((function(t){return t.value===e.constructor})).name)}else s=n;var f=u.transform(o,e,s,void 0,e instanceof Map,c+1);d instanceof Set?d.add(f):d.push(f)}})),d}if(n!==String||a){if(n!==Number||a){if(n!==Boolean||a){if((n===Date||r instanceof Date)&&!a)return r instanceof Date?new Date(r.valueOf()):null==r?r:new Date(r);if(testForBuffer()&&(n===e||r instanceof e)&&!a)return null==r?r:e.from(r);if("object"==typeof r&&null!==r){n||r.constructor===Object||(n=r.constructor),!n&&t&&(n=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(r);var l=this.getKeys(n,r),f=t||{};t||this.transformationType!==i.PLAIN_TO_CLASS&&this.transformationType!==i.CLASS_TO_CLASS||(f=a?new Map:n?new n:{});for(var _loop_1=function(e){var s=e,u=e,d=e;if(!p.options.ignoreDecorators&&n)if(p.transformationType===i.PLAIN_TO_CLASS)(l=o.defaultMetadataStorage.findExposeMetadataByCustomName(n,e))&&(d=l.propertyName,u=l.propertyName);else if(p.transformationType===i.CLASS_TO_PLAIN||p.transformationType===i.CLASS_TO_CLASS){var l;(l=o.defaultMetadataStorage.findExposeMetadata(n,e))&&l.options&&l.options.name&&(u=l.options.name)}var h=void 0;h=r instanceof Map?r.get(s):r[s]instanceof Function?r[s]():r[s];var v=void 0,m=h instanceof Map;if(n&&a)v=n;else if(n){var g=o.defaultMetadataStorage.findTypeMetadata(n,d);if(g){var y={newObject:f,object:r,property:d},b=g.typeFunction?g.typeFunction(y):g.reflectedType;g.options&&g.options.discriminator&&g.options.discriminator.property&&g.options.discriminator.subTypes?r[s]instanceof Array?v=g:(p.transformationType===i.PLAIN_TO_CLASS&&(v=void 0===(v=g.options.discriminator.subTypes.find((function(e){if(h&&g.options.discriminator.property in h)return e.name===h[g.options.discriminator.property]})))?b:v.value,g.options.keepDiscriminatorProperty||h&&g.options.discriminator.property in h&&delete h[g.options.discriminator.property]),p.transformationType===i.CLASS_TO_CLASS&&(v=h.constructor),p.transformationType===i.CLASS_TO_PLAIN&&(h[g.options.discriminator.property]=g.options.discriminator.subTypes.find((function(e){return e.value===h.constructor})).name)):v=b,m=m||g.reflectedType===Map}else if(p.options.targetMaps)p.options.targetMaps.filter((function(e){return e.target===n&&!!e.properties[d]})).forEach((function(e){return v=e.properties[d]}));else if(p.options.enableImplicitConversion&&p.transformationType===i.PLAIN_TO_CLASS){var _=Reflect.getMetadata("design:type",n.prototype,d);_&&(v=_)}}var S=Array.isArray(r[s])?p.getReflectedType(n,d):void 0,w=t?t[s]:void 0;if(f.constructor.prototype){var C=Object.getOwnPropertyDescriptor(f.constructor.prototype,u);if((p.transformationType===i.PLAIN_TO_CLASS||p.transformationType===i.CLASS_TO_CLASS)&&(C&&!C.set||f[u]instanceof Function))return"continue"}if(p.options.enableCircularCheck&&p.isCircular(h)){if(p.transformationType===i.CLASS_TO_CLASS){P=h;P=p.applyCustomTransformations(P,n,e,r,p.transformationType),f instanceof Map?f.set(u,P):f[u]=P}}else{var E=p.transformationType===i.PLAIN_TO_CLASS?u:e,P=void 0;p.transformationType===i.CLASS_TO_PLAIN?(P=r[E],P=p.applyCustomTransformations(P,n,E,r,p.transformationType),P=r[E]===P?h:P,P=p.transform(w,P,v,S,m,c+1)):(P=p.transform(w,h,v,S,m,c+1),P=p.applyCustomTransformations(P,n,E,r,p.transformationType)),f instanceof Map?f.set(u,P):f[u]=P}},p=this,h=0,v=l;h<v.length;h++){_loop_1(v[h])}return this.options.enableCircularCheck&&this.recursionStack.delete(r),f}return r}return null==r?r:Boolean(r)}return null==r?r:Number(r)}return null==r?r:String(r)},TransformOperationExecutor.prototype.applyCustomTransformations=function(e,t,r,i,n){var s=this,a=o.defaultMetadataStorage.findTransformMetadatas(t,r,this.transformationType);return void 0!==this.options.version&&(a=a.filter((function(e){return!e.options||s.checkVersion(e.options.since,e.options.until)}))),(a=this.options.groups&&this.options.groups.length?a.filter((function(e){return!e.options||s.checkGroups(e.options.groups)})):a.filter((function(e){return!e.options||!e.options.groups||!e.options.groups.length}))).forEach((function(t){e=t.transformFn(e,i,n)})),e},TransformOperationExecutor.prototype.isCircular=function(e){return this.recursionStack.has(e)},TransformOperationExecutor.prototype.getReflectedType=function(e,t){if(e){var r=o.defaultMetadataStorage.findTypeMetadata(e,t);return r?r.reflectedType:void 0}},TransformOperationExecutor.prototype.getKeys=function(e,t){var r=this,n=o.defaultMetadataStorage.getStrategy(e);"none"===n&&(n=this.options.strategy||"exposeAll");var s=[];if("exposeAll"===n&&(s=t instanceof Map?Array.from(t.keys()):Object.keys(t)),!this.options.ignoreDecorators&&e){var a=o.defaultMetadataStorage.getExposedProperties(e,this.transformationType);this.transformationType===i.PLAIN_TO_CLASS&&(a=a.map((function(t){var r=o.defaultMetadataStorage.findExposeMetadata(e,t);return r&&r.options&&r.options.name?r.options.name:t}))),s=this.options.excludeExtraneousValues?a:s.concat(a);var c=o.defaultMetadataStorage.getExcludedProperties(e,this.transformationType);c.length>0&&(s=s.filter((function(e){return-1===c.indexOf(e)}))),void 0!==this.options.version&&(s=s.filter((function(t){var i=o.defaultMetadataStorage.findExposeMetadata(e,t);return!i||!i.options||r.checkVersion(i.options.since,i.options.until)}))),s=this.options.groups&&this.options.groups.length?s.filter((function(t){var i=o.defaultMetadataStorage.findExposeMetadata(e,t);return!i||!i.options||r.checkGroups(i.options.groups)})):s.filter((function(t){var r=o.defaultMetadataStorage.findExposeMetadata(e,t);return!(r&&r.options&&r.options.groups&&r.options.groups.length)}))}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(s=s.filter((function(e){return r.options.excludePrefixes.every((function(t){return e.substr(0,t.length)!==t}))}))),s=s.filter((function(e,t,r){return r.indexOf(e)===t}))},TransformOperationExecutor.prototype.checkVersion=function(e,t){var r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r},TransformOperationExecutor.prototype.checkGroups=function(e){return!e||this.options.groups.some((function(t){return-1!==e.indexOf(t)}))},TransformOperationExecutor}();function testForBuffer(){try{return!0}catch(e){}return!1}t.TransformOperationExecutor=n,t.testForBuffer=testForBuffer}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"../../node_modules/class-transformer/decorators.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("../../node_modules/class-transformer/ClassTransformer.js"),o=r("../../node_modules/class-transformer/storage.js"),n=r("../../node_modules/class-transformer/metadata/TypeMetadata.js"),s=r("../../node_modules/class-transformer/metadata/ExposeMetadata.js"),a=r("../../node_modules/class-transformer/metadata/ExcludeMetadata.js"),c=r("../../node_modules/class-transformer/metadata/TransformMetadata.js");t.Transform=function Transform(e,t){return function(r,i){var n=new c.TransformMetadata(r.constructor,i,e,t);o.defaultMetadataStorage.addTransformMetadata(n)}},t.Type=function Type(e,t){return function(r,i){var s=Reflect.getMetadata("design:type",r,i),a=new n.TypeMetadata(r.constructor,i,s,e,t);o.defaultMetadataStorage.addTypeMetadata(a)}},t.Expose=function Expose(e){return function(t,r){var i=new s.ExposeMetadata(t instanceof Function?t:t.constructor,r,e||{});o.defaultMetadataStorage.addExposeMetadata(i)}},t.Exclude=function Exclude(e){return function(t,r){var i=new a.ExcludeMetadata(t instanceof Function?t:t.constructor,r,e||{});o.defaultMetadataStorage.addExcludeMetadata(i)}},t.TransformClassToPlain=function TransformClassToPlain(e){return function(t,r,o){var n=new i.ClassTransformer,s=o.value;o.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=s.apply(this,t),o=!!i&&("object"==typeof i||"function"==typeof i)&&"function"==typeof i.then;return o?i.then((function(t){return n.classToPlain(t,e)})):n.classToPlain(i,e)}}},t.TransformClassToClass=function TransformClassToClass(e){return function(t,r,o){var n=new i.ClassTransformer,s=o.value;o.value=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=s.apply(this,t),o=!!i&&("object"==typeof i||"function"==typeof i)&&"function"==typeof i.then;return o?i.then((function(t){return n.classToClass(t,e)})):n.classToClass(i,e)}}},t.TransformPlainToClass=function TransformPlainToClass(e,t){return function(r,o,n){var s=new i.ClassTransformer,a=n.value;n.value=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=a.apply(this,r),n=!!o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then;return n?o.then((function(r){return s.plainToClass(e,r,t)})):s.plainToClass(e,o,t)}}}},"../../node_modules/class-transformer/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("../../node_modules/class-transformer/ClassTransformer.js"),o=r("../../node_modules/class-transformer/ClassTransformer.js");t.ClassTransformer=o.ClassTransformer,function __export(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r("../../node_modules/class-transformer/decorators.js"));var n=new i.ClassTransformer;t.classToPlain=function classToPlain(e,t){return n.classToPlain(e,t)},t.classToPlainFromExist=function classToPlainFromExist(e,t,r){return n.classToPlainFromExist(e,t,r)},t.plainToClass=function plainToClass(e,t,r){return n.plainToClass(e,t,r)},t.plainToClassFromExist=function plainToClassFromExist(e,t,r){return n.plainToClassFromExist(e,t,r)},t.classToClass=function classToClass(e,t){return n.classToClass(e,t)},t.classToClassFromExist=function classToClassFromExist(e,t,r){return n.classToClassFromExist(e,t,r)},t.serialize=function serialize(e,t){return n.serialize(e,t)},t.deserialize=function deserialize(e,t,r){return n.deserialize(e,t,r)},t.deserializeArray=function deserializeArray(e,t,r){return n.deserializeArray(e,t,r)},function(e){e[e.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",e[e.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",e[e.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"}(t.TransformationType||(t.TransformationType={}))},"../../node_modules/class-transformer/metadata/ExcludeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function i(e,t,r){this.target=e,this.propertyName=t,this.options=r};t.ExcludeMetadata=i},"../../node_modules/class-transformer/metadata/ExposeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function i(e,t,r){this.target=e,this.propertyName=t,this.options=r};t.ExposeMetadata=i},"../../node_modules/class-transformer/metadata/MetadataStorage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("../../node_modules/class-transformer/TransformOperationExecutor.js"),o=function(){function MetadataStorage(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return MetadataStorage.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},MetadataStorage.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},MetadataStorage.prototype.findTransformMetadatas=function(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?r===i.TransformationType.CLASS_TO_CLASS||r===i.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||r===i.TransformationType.CLASS_TO_PLAIN))}))},MetadataStorage.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},MetadataStorage.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},MetadataStorage.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find((function(e){return e.options&&e.options.name===t}))},MetadataStorage.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},MetadataStorage.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),i=this._exposeMetadatas.get(e),o=i&&i.get(void 0);return r&&o||!r&&!o?"none":r?"excludeAll":"exposeAll"},MetadataStorage.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},MetadataStorage.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},MetadataStorage.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===i.TransformationType.CLASS_TO_CLASS||t===i.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===i.TransformationType.CLASS_TO_PLAIN))})).map((function(e){return e.propertyName}))},MetadataStorage.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter((function(e){return!e.options||(!0===e.options.toClassOnly&&!0===e.options.toPlainOnly||(!0===e.options.toClassOnly?t===i.TransformationType.CLASS_TO_CLASS||t===i.TransformationType.PLAIN_TO_CLASS:!0!==e.options.toPlainOnly||t===i.TransformationType.CLASS_TO_PLAIN))})).map((function(e){return e.propertyName}))},MetadataStorage.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},MetadataStorage.prototype.getMetadata=function(e,t){var r,i=e.get(t);i&&(r=Array.from(i.values()).filter((function(e){return void 0!==e.propertyName})));for(var o=[],n=0,s=this.getAncestors(t);n<s.length;n++){var a=s[n],c=e.get(a);if(c){var u=Array.from(c.values()).filter((function(e){return void 0!==e.propertyName}));o.push.apply(o,u)}}return o.concat(r||[])},MetadataStorage.prototype.findMetadata=function(e,t,r){var i=e.get(t);if(i){var o=i.get(r);if(o)return o}for(var n=0,s=this.getAncestors(t);n<s.length;n++){var a=s[n],c=e.get(a);if(c){var u=c.get(r);if(u)return u}}},MetadataStorage.prototype.findMetadatas=function(e,t,r){var i,o=e.get(t);o&&(i=o.get(r));for(var n=[],s=0,a=this.getAncestors(t);s<a.length;s++){var c=a[s],u=e.get(c);u&&u.has(r)&&n.push.apply(n,u.get(r))}return n.reverse().concat((i||[]).reverse())},MetadataStorage.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],r=Object.getPrototypeOf(e.prototype.constructor);void 0!==r.prototype;r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},MetadataStorage}();t.MetadataStorage=o},"../../node_modules/class-transformer/metadata/TransformMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function i(e,t,r,o){this.target=e,this.propertyName=t,this.transformFn=r,this.options=o};t.TransformMetadata=i},"../../node_modules/class-transformer/metadata/TypeMetadata.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function i(e,t,r,o,n){this.target=e,this.propertyName=t,this.reflectedType=r,this.typeFunction=o,this.options=n};t.TypeMetadata=i},"../../node_modules/class-transformer/storage.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("../../node_modules/class-transformer/metadata/MetadataStorage.js");t.defaultMetadataStorage=new i.MetadataStorage},"../../node_modules/events/events.js":function(e,t,r){"use strict";var i,o="object"==typeof Reflect?Reflect:null,n=o&&"function"==typeof o.apply?o.apply:function ReflectApply(e,t,r){return Function.prototype.apply.call(e,t,r)};i=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function ReflectOwnKeys(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function NumberIsNaN(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}e.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var a=10;function $getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,r,i){var o,n,s;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),s=n[t]),void 0===s)s=n[t]=r,++e._eventsCount;else if("function"==typeof s?s=n[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(o=$getMaxListeners(e))>0&&s.length>o&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}(a)}return e}function onceWrapper(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,n(this.listener,this.target,e))}function _onceWrap(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=onceWrapper.bind(i);return o.listener=r,i.wrapFn=o,o}function _listeners(e,t,r){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function unwrapListeners(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):arrayClone(o,o.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function arrayClone(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function emit(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var u=c.length,d=arrayClone(c,u);for(r=0;r<u;++r)n(d[r],this,t)}return!0},EventEmitter.prototype.addListener=function addListener(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function once(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function removeListener(e,t){var r,i,o,n,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){s=r[n].listener,o=n;break}if(o<0)return this;0===o?r.shift():function spliceOne(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(o=n[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},EventEmitter.prototype.listeners=function listeners(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function rawListeners(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?i(this._events):[]}},"../../node_modules/fast-json-stable-stringify/index.js":function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,i){var o={key:t,value:e[t]},n={key:i,value:e[i]};return r(o,n)}}),n=[];return function stringify(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var t,r;if(Array.isArray(e)){for(r="[",t=0;t<e.length;t++)t&&(r+=","),r+=stringify(e[t])||"null";return r+"]"}if(null===e)return"null";if(-1!==n.indexOf(e)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=n.push(e)-1,a=Object.keys(e).sort(o&&o(e));for(r="",t=0;t<a.length;t++){var c=a[t],u=stringify(e[c]);u&&(r&&(r+=","),r+=JSON.stringify(c)+":"+u)}return n.splice(s,1),"{"+r+"}"}}(e)}},"../../node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,r,i,o){var n,s,a=8*o-i-1,c=(1<<a)-1,u=c>>1,d=-7,l=r?o-1:0,f=r?-1:1,p=e[t+l];for(l+=f,n=p&(1<<-d)-1,p>>=-d,d+=a;d>0;n=256*n+e[t+l],l+=f,d-=8);for(s=n&(1<<-d)-1,n>>=-d,d+=i;d>0;s=256*s+e[t+l],l+=f,d-=8);if(0===n)n=1-u;else{if(n===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),n-=u}return(p?-1:1)*s*Math.pow(2,n-i)},t.write=function(e,t,r,i,o,n){var s,a,c,u=8*n-o-1,d=(1<<u)-1,l=d>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:n-1,h=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?f/c:f*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=d?(a=0,s=d):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+p]=255&s,p+=h,s/=256,u-=8);e[r+p-h]|=128*v}},"../../node_modules/isarray/index.js":function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},"../../node_modules/process/browser.js":function(e,t){var r,i,o=e.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(r===setTimeout)return setTimeout(e,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){r=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){i=defaultClearTimeout}}();var n,s=[],a=!1,c=-1;function cleanUpNextTick(){a&&n&&(a=!1,n.length?s=n.concat(s):c=-1,s.length&&drainQueue())}function drainQueue(){if(!a){var e=runTimeout(cleanUpNextTick);a=!0;for(var t=s.length;t;){for(n=s,s=[];++c<t;)n&&n[c].run();c=-1,t=s.length}n=null,a=!1,function runClearTimeout(e){if(i===clearTimeout)return clearTimeout(e);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new Item(e,t)),1!==s.length||a||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},"../../node_modules/reflect-metadata/Reflect.js":function(e,t,r){(function(e,t){var r;!function(r){!function(i){var o="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),n=makeExporter(r);function makeExporter(e,t){return function(r,i){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:i}),t&&t(r,i)}}void 0===o.Reflect?o.Reflect=r:n=makeExporter(o.Reflect,n),function(t){var r=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,o=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",n=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,u={create:s?function(){return MakeDictionary(Object.create(null))}:a?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:c?function(e,t){return r.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return r.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},d=Object.getPrototypeOf(Function),l="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function CreateMapPolyfill(){var e={},t=[],r=function(){function MapIterator(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return MapIterator.prototype["@@iterator"]=function(){return this},MapIterator.prototype[n]=function(){return this},MapIterator.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},MapIterator.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},MapIterator.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},MapIterator}();return function(){function Map(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(Map.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Map.prototype.has=function(e){return this._find(e,!1)>=0},Map.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},Map.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},Map.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var i=this._keys.length,o=r+1;o<i;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},Map.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},Map.prototype.keys=function(){return new r(this._keys,this._values,getKey)},Map.prototype.values=function(){return new r(this._keys,this._values,getValue)},Map.prototype.entries=function(){return new r(this._keys,this._values,getEntry)},Map.prototype["@@iterator"]=function(){return this.entries()},Map.prototype[n]=function(){return this.entries()},Map.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},Map}();function getKey(e,t){return e}function getValue(e,t){return t}function getEntry(e,t){return[e,t]}}():Map,p=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function CreateSetPolyfill(){return function(){function Set(){this._map=new f}return Object.defineProperty(Set.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Set.prototype.has=function(e){return this._map.has(e)},Set.prototype.add=function(e){return this._map.set(e,e),this},Set.prototype.delete=function(e){return this._map.delete(e)},Set.prototype.clear=function(){this._map.clear()},Set.prototype.keys=function(){return this._map.keys()},Set.prototype.values=function(){return this._map.values()},Set.prototype.entries=function(){return this._map.entries()},Set.prototype["@@iterator"]=function(){return this.keys()},Set.prototype[n]=function(){return this.keys()},Set}()}():Set,h=new(l||"function"!=typeof WeakMap?function CreateWeakMapPolyfill(){var e=u.create(),t=CreateUniqueKey();return function(){function WeakMap(){this._key=CreateUniqueKey()}return WeakMap.prototype.has=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t&&u.has(t,this._key)},WeakMap.prototype.get=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t?u.get(t,this._key):void 0},WeakMap.prototype.set=function(e,t){return GetOrCreateWeakMapTable(e,!0)[this._key]=t,this},WeakMap.prototype.delete=function(e){var t=GetOrCreateWeakMapTable(e,!1);return void 0!==t&&delete t[this._key]},WeakMap.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap}();function CreateUniqueKey(){var t;do{t="@@WeakMap@@"+CreateUUID()}while(u.has(e,t));return e[t]=!0,t}function GetOrCreateWeakMapTable(e,i){if(!r.call(e,t)){if(!i)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function FillRandomBytes(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function CreateUUID(){var e=function GenRandomBytes(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):FillRandomBytes(new Uint8Array(e),e):FillRandomBytes(new Array(e),e)}(16);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var t="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(t+="-"),i<16&&(t+="0"),t+=i.toString(16).toLowerCase()}return t}}():WeakMap);function GetOrCreateMetadataMap(e,t,r){var i=h.get(e);if(IsUndefined(i)){if(!r)return;i=new f,h.set(e,i)}var o=i.get(t);if(IsUndefined(o)){if(!r)return;o=new f,i.set(t,o)}return o}function OrdinaryHasOwnMetadata(e,t,r){var i=GetOrCreateMetadataMap(t,r,!1);return!IsUndefined(i)&&function ToBoolean(e){return!!e}(i.has(e))}function OrdinaryGetOwnMetadata(e,t,r){var i=GetOrCreateMetadataMap(t,r,!1);if(!IsUndefined(i))return i.get(e)}function OrdinaryDefineOwnMetadata(e,t,r,i){GetOrCreateMetadataMap(r,i,!0).set(e,t)}function OrdinaryOwnMetadataKeys(e,t){var r=[],i=GetOrCreateMetadataMap(e,t,!1);if(IsUndefined(i))return r;for(var o=function GetIterator(e){var t=GetMethod(e,n);if(!IsCallable(t))throw new TypeError;var r=t.call(e);if(!IsObject(r))throw new TypeError;return r}(i.keys()),s=0;;){var a=IteratorStep(o);if(!a)return r.length=s,r;var c=a.value;try{r[s]=c}catch(e){try{IteratorClose(o)}finally{throw e}}s++}}function Type(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function IsUndefined(e){return void 0===e}function IsNull(e){return null===e}function IsObject(e){return"object"==typeof e?null!==e:"function"==typeof e}function ToPrimitive(e,t){switch(Type(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",i=GetMethod(e,o);if(void 0!==i){var n=i.call(e,r);if(IsObject(n))throw new TypeError;return n}return function OrdinaryToPrimitive(e,t){if("string"===t){var r=e.toString;if(IsCallable(r))if(!IsObject(o=r.call(e)))return o;if(IsCallable(i=e.valueOf))if(!IsObject(o=i.call(e)))return o}else{var i;if(IsCallable(i=e.valueOf))if(!IsObject(o=i.call(e)))return o;var o,n=e.toString;if(IsCallable(n))if(!IsObject(o=n.call(e)))return o}throw new TypeError}(e,"default"===r?"number":r)}function ToPropertyKey(e){var t=ToPrimitive(e,3);return function IsSymbol(e){return"symbol"==typeof e}(t)?t:function ToString(e){return""+e}(t)}function IsArray(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function IsCallable(e){return"function"==typeof e}function IsConstructor(e){return"function"==typeof e}function GetMethod(e,t){var r=e[t];if(null!=r){if(!IsCallable(r))throw new TypeError;return r}}function IteratorStep(e){var t=e.next();return!t.done&&t}function IteratorClose(e){var t=e.return;t&&t.call(e)}function OrdinaryGetPrototypeOf(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===d)return t;if(t!==d)return t;var r=e.prototype,i=r&&Object.getPrototypeOf(r);if(null==i||i===Object.prototype)return t;var o=i.constructor;return"function"!=typeof o||o===e?t:o}function MakeDictionary(e){return e.__=void 0,delete e.__,e}t("decorate",(function decorate(e,t,r,i){if(IsUndefined(r)){if(!IsArray(e))throw new TypeError;if(!IsConstructor(t))throw new TypeError;return function DecorateConstructor(e,t){for(var r=e.length-1;r>=0;--r){var i=(0,e[r])(t);if(!IsUndefined(i)&&!IsNull(i)){if(!IsConstructor(i))throw new TypeError;t=i}}return t}(e,t)}if(!IsArray(e))throw new TypeError;if(!IsObject(t))throw new TypeError;if(!IsObject(i)&&!IsUndefined(i)&&!IsNull(i))throw new TypeError;return IsNull(i)&&(i=void 0),function DecorateProperty(e,t,r,i){for(var o=e.length-1;o>=0;--o){var n=(0,e[o])(t,r,i);if(!IsUndefined(n)&&!IsNull(n)){if(!IsObject(n))throw new TypeError;i=n}}return i}(e,t,r=ToPropertyKey(r),i)})),t("metadata",(function metadata(e,t){return function decorator(r,i){if(!IsObject(r))throw new TypeError;if(!IsUndefined(i)&&!function IsPropertyKey(e){switch(Type(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;OrdinaryDefineOwnMetadata(e,t,r,i)}})),t("defineMetadata",(function defineMetadata(e,t,r,i){if(!IsObject(r))throw new TypeError;return IsUndefined(i)||(i=ToPropertyKey(i)),OrdinaryDefineOwnMetadata(e,t,r,i)})),t("hasMetadata",(function hasMetadata(e,t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),function OrdinaryHasMetadata(e,t,r){if(OrdinaryHasOwnMetadata(e,t,r))return!0;var i=OrdinaryGetPrototypeOf(t);return!IsNull(i)&&OrdinaryHasMetadata(e,i,r)}(e,t,r)})),t("hasOwnMetadata",(function hasOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),OrdinaryHasOwnMetadata(e,t,r)})),t("getMetadata",(function getMetadata(e,t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),function OrdinaryGetMetadata(e,t,r){if(OrdinaryHasOwnMetadata(e,t,r))return OrdinaryGetOwnMetadata(e,t,r);var i=OrdinaryGetPrototypeOf(t);return IsNull(i)?void 0:OrdinaryGetMetadata(e,i,r)}(e,t,r)})),t("getOwnMetadata",(function getOwnMetadata(e,t,r){if(!IsObject(t))throw new TypeError;return IsUndefined(r)||(r=ToPropertyKey(r)),OrdinaryGetOwnMetadata(e,t,r)})),t("getMetadataKeys",(function getMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;return IsUndefined(t)||(t=ToPropertyKey(t)),function OrdinaryMetadataKeys(e,t){var r=OrdinaryOwnMetadataKeys(e,t),i=OrdinaryGetPrototypeOf(e);if(null===i)return r;var o=OrdinaryMetadataKeys(i,t);if(o.length<=0)return r;if(r.length<=0)return o;for(var n=new p,s=[],a=0,c=r;a<c.length;a++){var u=c[a];n.has(u)||(n.add(u),s.push(u))}for(var d=0,l=o;d<l.length;d++){u=l[d];n.has(u)||(n.add(u),s.push(u))}return s}(e,t)})),t("getOwnMetadataKeys",(function getOwnMetadataKeys(e,t){if(!IsObject(e))throw new TypeError;return IsUndefined(t)||(t=ToPropertyKey(t)),OrdinaryOwnMetadataKeys(e,t)})),t("deleteMetadata",(function deleteMetadata(e,t,r){if(!IsObject(t))throw new TypeError;IsUndefined(r)||(r=ToPropertyKey(r));var i=GetOrCreateMetadataMap(t,r,!1);if(IsUndefined(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var o=h.get(t);return o.delete(r),o.size>0||h.delete(t),!0}))}(n)}()}(r||(r={}))}).call(this,r("../../node_modules/process/browser.js"),r("../../node_modules/webpack/buildin/global.js"))},"../../node_modules/uri-js/dist/es5/uri.all.js":function(e,t,r){!function(e){"use strict";function merge(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,o=1;o<i;++o)t[o]=t[o].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function subexp(e){return"(?:"+e+")"}function typeOf(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(e){return e.toUpperCase()}function buildExps(e){var t=merge("[0-9]","[A-Fa-f]"),r=subexp(subexp("%[EFef]"+t+"%"+t+t+"%"+t+t)+"|"+subexp("%[89A-Fa-f]"+t+"%"+t+t)+"|"+subexp("%"+t+t)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=merge("[\\:\\/\\?\\#\\[\\]\\@]",i),n=e?"[\\uE000-\\uF8FF]":"[]",s=merge("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),a=subexp("[A-Za-z]"+merge("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),c=subexp(subexp(r+"|"+merge(s,i,"[\\:]"))+"*"),u=(subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("[1-9][0-9]")+"|[0-9]"),subexp(subexp("25[0-5]")+"|"+subexp("2[0-4][0-9]")+"|"+subexp("1[0-9][0-9]")+"|"+subexp("0?[1-9][0-9]")+"|0?0?[0-9]")),d=subexp(u+"\\."+u+"\\."+u+"\\."+u),l=subexp(t+"{1,4}"),f=subexp(subexp(l+"\\:"+l)+"|"+d),p=subexp(subexp(l+"\\:")+"{6}"+f),h=subexp("\\:\\:"+subexp(l+"\\:")+"{5}"+f),v=subexp(subexp(l)+"?\\:\\:"+subexp(l+"\\:")+"{4}"+f),m=subexp(subexp(subexp(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+subexp(l+"\\:")+"{3}"+f),g=subexp(subexp(subexp(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+subexp(l+"\\:")+"{2}"+f),y=subexp(subexp(subexp(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+f),b=subexp(subexp(subexp(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+f),_=subexp(subexp(subexp(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),S=subexp(subexp(subexp(l+"\\:")+"{0,6}"+l)+"?\\:\\:"),w=subexp([p,h,v,m,g,y,b,_,S].join("|")),C=subexp(subexp(s+"|"+r)+"+"),E=(subexp(w+"\\%25"+C),subexp(w+subexp("\\%25|\\%(?!"+t+"{2})")+C)),P=subexp("[vV]"+t+"+\\."+merge(s,i,"[\\:]")+"+"),M=subexp("\\["+subexp(E+"|"+w+"|"+P)+"\\]"),x=subexp(subexp(r+"|"+merge(s,i))+"*"),D=subexp(M+"|"+d+"(?!"+x+")|"+x),I=subexp("[0-9]*"),j=subexp(subexp(c+"@")+"?"+D+subexp("\\:"+I)+"?"),O=subexp(r+"|"+merge(s,i,"[\\:\\@]")),B=subexp(O+"*"),L=subexp(O+"+"),T=subexp(subexp(r+"|"+merge(s,i,"[\\@]"))+"+"),A=subexp(subexp("\\/"+B)+"*"),R=subexp("\\/"+subexp(L+A)+"?"),V=subexp(T+A),F=subexp(L+A),k="(?!"+O+")",$=(subexp(A+"|"+R+"|"+V+"|"+F+"|"+k),subexp(subexp(O+"|"+merge("[\\/\\?]",n))+"*")),N=subexp(subexp(O+"|[\\/\\?]")+"*"),U=subexp(subexp("\\/\\/"+j+A)+"|"+R+"|"+F+"|"+k),W=subexp(a+"\\:"+U+subexp("\\?"+$)+"?"+subexp("\\#"+N)+"?"),z=subexp(subexp("\\/\\/"+j+A)+"|"+R+"|"+V+"|"+k),H=subexp(z+subexp("\\?"+$)+"?"+subexp("\\#"+N)+"?");return subexp(W+"|"+H),subexp(a+"\\:"+U+subexp("\\?"+$)+"?"),subexp(subexp("\\/\\/("+subexp("("+c+")@")+"?("+D+")"+subexp("\\:("+I+")")+"?)")+"?("+A+"|"+R+"|"+F+"|"+k+")"),subexp("\\?("+$+")"),subexp("\\#("+N+")"),subexp(subexp("\\/\\/("+subexp("("+c+")@")+"?("+D+")"+subexp("\\:("+I+")")+"?)")+"?("+A+"|"+R+"|"+V+"|"+k+")"),subexp("\\?("+$+")"),subexp("\\#("+N+")"),subexp(subexp("\\/\\/("+subexp("("+c+")@")+"?("+D+")"+subexp("\\:("+I+")")+"?)")+"?("+A+"|"+R+"|"+F+"|"+k+")"),subexp("\\?("+$+")"),subexp("\\#("+N+")"),subexp("("+c+")@"),subexp("\\:("+I+")"),{NOT_SCHEME:new RegExp(merge("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",s,i),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",s,i),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",s,i),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",s,i),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",s,i,"[\\:\\@\\/\\?]",n),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",s,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",s,i),"g"),UNRESERVED:new RegExp(s,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",s,o),"g"),PCT_ENCODED:new RegExp(r,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+subexp(subexp("\\%25|\\%(?!"+t+"{2})")+"("+C+")")+"?\\]?$")}}var t=buildExps(!1),r=buildExps(!0),slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var r=[],i=!0,o=!1,n=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){o=!0,n=e}finally{try{!i&&a.return&&a.return()}finally{if(o)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=2147483647,o=/^xn--/,n=/[^\0-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,u=String.fromCharCode;function error$1(e){throw new RangeError(a[e])}function mapDomain(e,t){var r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]);var o=function map(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(s,".")).split("."),t).join(".");return i+o}function ucs2decode(e){for(var t=[],r=0,i=e.length;r<i;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<i){var n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)}else t.push(o)}return t}var d=function basicToDigit(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36},l=function digitToBasic(e,t){return e+22+75*(e<26)-((0!=t)<<5)},f=function adapt(e,t,r){var i=0;for(e=r?c(e/700):e>>1,e+=c(e/t);e>455;i+=36)e=c(e/35);return c(i+36*e/(e+38))},p=function decode(e){var t=[],r=e.length,o=0,n=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var u=0;u<a;++u)e.charCodeAt(u)>=128&&error$1("not-basic"),t.push(e.charCodeAt(u));for(var l=a>0?a+1:0;l<r;){for(var p=o,h=1,v=36;;v+=36){l>=r&&error$1("invalid-input");var m=d(e.charCodeAt(l++));(m>=36||m>c((i-o)/h))&&error$1("overflow"),o+=m*h;var g=v<=s?1:v>=s+26?26:v-s;if(m<g)break;var y=36-g;h>c(i/y)&&error$1("overflow"),h*=y}var b=t.length+1;s=f(o-p,b,0==p),c(o/b)>i-n&&error$1("overflow"),n+=c(o/b),o%=b,t.splice(o++,0,n)}return String.fromCodePoint.apply(String,t)},h=function encode(e){var t=[],r=(e=ucs2decode(e)).length,o=128,n=0,s=72,a=!0,d=!1,p=void 0;try{for(var h,v=e[Symbol.iterator]();!(a=(h=v.next()).done);a=!0){var m=h.value;m<128&&t.push(u(m))}}catch(e){d=!0,p=e}finally{try{!a&&v.return&&v.return()}finally{if(d)throw p}}var g=t.length,y=g;for(g&&t.push("-");y<r;){var b=i,_=!0,S=!1,w=void 0;try{for(var C,E=e[Symbol.iterator]();!(_=(C=E.next()).done);_=!0){var P=C.value;P>=o&&P<b&&(b=P)}}catch(e){S=!0,w=e}finally{try{!_&&E.return&&E.return()}finally{if(S)throw w}}var M=y+1;b-o>c((i-n)/M)&&error$1("overflow"),n+=(b-o)*M,o=b;var x=!0,D=!1,I=void 0;try{for(var j,O=e[Symbol.iterator]();!(x=(j=O.next()).done);x=!0){var B=j.value;if(B<o&&++n>i&&error$1("overflow"),B==o){for(var L=n,T=36;;T+=36){var A=T<=s?1:T>=s+26?26:T-s;if(L<A)break;var R=L-A,V=36-A;t.push(u(l(A+R%V,0))),L=c(R/V)}t.push(u(l(L,0))),s=f(n,M,y==g),n=0,++y}}}catch(e){D=!0,I=e}finally{try{!x&&O.return&&O.return()}finally{if(D)throw I}}++n,++o}return t.join("")},v=function toASCII(e){return mapDomain(e,(function(e){return n.test(e)?"xn--"+h(e):e}))},m=function toUnicode(e){return mapDomain(e,(function(e){return o.test(e)?p(e.slice(4).toLowerCase()):e}))},g={};function pctEncChar(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function pctDecChars(e){for(var t="",r=0,i=e.length;r<i;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(i-r>=6){var n=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&n)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(i-r>=9){var s=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function _normalizeComponentEncoding(e,t){function decodeUnreserved(e){var r=pctDecChars(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_USERINFO,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(t.NOT_HOST,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,decodeUnreserved).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_QUERY,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,decodeUnreserved).replace(t.NOT_FRAGMENT,pctEncChar).replace(t.PCT_ENCODED,toUpperCase)),e}function _stripLeadingZeros(e){return e.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=slicedToArray(r,2)[1];return i?i.split(".").map(_stripLeadingZeros).join("."):e}function _normalizeIPv6(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=slicedToArray(r,3),o=i[1],n=i[2];if(o){for(var s=o.toLowerCase().split("::").reverse(),a=slicedToArray(s,2),c=a[0],u=a[1],d=u?u.split(":").map(_stripLeadingZeros):[],l=c.split(":").map(_stripLeadingZeros),f=t.IPV4ADDRESS.test(l[l.length-1]),p=f?7:8,h=l.length-p,v=Array(p),m=0;m<p;++m)v[m]=d[m]||l[h+m]||"";f&&(v[p-1]=_normalizeIPv4(v[p-1],t));var g=v.reduce((function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],y=void 0;if(g&&g.length>1){var b=v.slice(0,g.index),_=v.slice(g.index+g.length);y=b.join(":")+"::"+_.join(":")}else y=v.join(":");return n&&(y+="%"+n),y}return e}var y=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,b=void 0==="".match(/(){0}/)[1];function parse(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},n=!1!==i.iri?r:t;"suffix"===i.reference&&(e=(i.scheme?i.scheme+":":"")+"//"+e);var s=e.match(y);if(s){b?(o.scheme=s[1],o.userinfo=s[3],o.host=s[4],o.port=parseInt(s[5],10),o.path=s[6]||"",o.query=s[7],o.fragment=s[8],isNaN(o.port)&&(o.port=s[5])):(o.scheme=s[1]||void 0,o.userinfo=-1!==e.indexOf("@")?s[3]:void 0,o.host=-1!==e.indexOf("//")?s[4]:void 0,o.port=parseInt(s[5],10),o.path=s[6]||"",o.query=-1!==e.indexOf("?")?s[7]:void 0,o.fragment=-1!==e.indexOf("#")?s[8]:void 0,isNaN(o.port)&&(o.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),o.host&&(o.host=_normalizeIPv6(_normalizeIPv4(o.host,n),n)),void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||o.path||void 0!==o.query?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",i.reference&&"suffix"!==i.reference&&i.reference!==o.reference&&(o.error=o.error||"URI is not a "+i.reference+" reference.");var a=g[(i.scheme||o.scheme||"").toLowerCase()];if(i.unicodeSupport||a&&a.unicodeSupport)_normalizeComponentEncoding(o,n);else{if(o.host&&(i.domainHost||a&&a.domainHost))try{o.host=v(o.host.replace(n.PCT_ENCODED,pctDecChars).toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII via punycode: "+e}_normalizeComponentEncoding(o,t)}a&&a.parse&&a.parse(o,i)}else o.error=o.error||"URI can not be parsed.";return o}function _recomposeAuthority(e,i){var o=!1!==i.iri?r:t,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(_normalizeIPv6(_normalizeIPv4(String(e.host),o),o).replace(o.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"==typeof e.port&&(n.push(":"),n.push(e.port.toString(10))),n.length?n.join(""):void 0}var _=/^\.\.?\//,S=/^\/\.(\/|$)/,w=/^\/\.\.(\/|$)/,C=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(e){for(var t=[];e.length;)if(e.match(_))e=e.replace(_,"");else if(e.match(S))e=e.replace(S,"/");else if(e.match(w))e=e.replace(w,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(C);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i)}return t.join("")}function serialize(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.iri?r:t,n=[],s=g[(i.scheme||e.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(e,i),e.host)if(o.IPV6ADDRESS.test(e.host));else if(i.domainHost||s&&s.domainHost)try{e.host=i.iri?m(e.host):v(e.host.replace(o.PCT_ENCODED,pctDecChars).toLowerCase())}catch(t){e.error=e.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+t}_normalizeComponentEncoding(e,o),"suffix"!==i.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var a=_recomposeAuthority(e,i);if(void 0!==a&&("suffix"!==i.reference&&n.push("//"),n.push(a),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;i.absolutePath||s&&s.absolutePath||(c=removeDotSegments(c)),void 0===a&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function resolveComponents(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],o={};return i||(e=parse(serialize(e,r),r),t=parse(serialize(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=removeDotSegments(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=removeDotSegments(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=removeDotSegments(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=removeDotSegments(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function unescapeComponent(e,i){return e&&e.toString().replace(i&&i.iri?r.PCT_ENCODED:t.PCT_ENCODED,pctDecChars)}var E={scheme:"http",domainHost:!0,parse:function parse(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function serialize(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},P={scheme:"https",domainHost:E.domainHost,parse:E.parse,serialize:E.serialize},M={},x="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",D="[0-9A-Fa-f]",I=subexp(subexp("%[EFef]"+D+"%"+D+D+"%"+D+D)+"|"+subexp("%[89A-Fa-f]"+D+"%"+D+D)+"|"+subexp("%"+D+D)),j=merge("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),O=new RegExp(x,"g"),B=new RegExp(I,"g"),L=new RegExp(merge("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',j),"g"),T=new RegExp(merge("[^]",x,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),A=T;function decodeUnreserved(e){var t=pctDecChars(e);return t.match(O)?t:e}var R={scheme:"mailto",parse:function parse$$1(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,n={},s=r.query.split("&"),a=0,c=s.length;a<c;++a){var u=s[a].split("=");switch(u[0]){case"to":for(var d=u[1].split(","),l=0,f=d.length;l<f;++l)i.push(d[l]);break;case"subject":r.subject=unescapeComponent(u[1],t);break;case"body":r.body=unescapeComponent(u[1],t);break;default:o=!0,n[unescapeComponent(u[0],t)]=unescapeComponent(u[1],t)}}o&&(r.headers=n)}r.query=void 0;for(var p=0,h=i.length;p<h;++p){var m=i[p].split("@");if(m[0]=unescapeComponent(m[0]),t.unicodeSupport)m[1]=unescapeComponent(m[1],t).toLowerCase();else try{m[1]=v(unescapeComponent(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=m.join("@")}return r},serialize:function serialize$$1(e,t){var r=e,i=function toArray(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}(e.to);if(i){for(var o=0,n=i.length;o<n;++o){var s=String(i[o]),a=s.lastIndexOf("@"),c=s.slice(0,a).replace(B,decodeUnreserved).replace(B,toUpperCase).replace(L,pctEncChar),u=s.slice(a+1);try{u=t.iri?m(u):v(unescapeComponent(u,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[o]=c+"@"+u}r.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var l=[];for(var f in d)d[f]!==M[f]&&l.push(f.replace(B,decodeUnreserved).replace(B,toUpperCase).replace(T,pctEncChar)+"="+d[f].replace(B,decodeUnreserved).replace(B,toUpperCase).replace(A,pctEncChar));return l.length&&(r.query=l.join("&")),r}},V=/^([^\:]+)\:(.*)/,F={scheme:"urn",parse:function parse$$1(e,t){var r=e.path&&e.path.match(V),i=e;if(r){var o=t.scheme||i.scheme||"urn",n=r[1].toLowerCase(),s=r[2],a=o+":"+(t.nid||n),c=g[a];i.nid=n,i.nss=s,i.path=void 0,c&&(i=c.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function serialize$$1(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,o=r+":"+(t.nid||i),n=g[o];n&&(e=n.serialize(e,t));var s=e,a=e.nss;return s.path=(i||t.nid)+":"+a,s}},k=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,$={scheme:"urn:uuid",parse:function parse(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(k)||(r.error=r.error||"UUID is not valid."),r},serialize:function serialize(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};g[E.scheme]=E,g[P.scheme]=P,g[R.scheme]=R,g[F.scheme]=F,g[$.scheme]=$,e.SCHEMES=g,e.pctEncChar=pctEncChar,e.pctDecChars=pctDecChars,e.parse=parse,e.removeDotSegments=removeDotSegments,e.serialize=serialize,e.resolveComponents=resolveComponents,e.resolve=function resolve(e,t,r){var i=function assign(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return serialize(resolveComponents(parse(e,i),parse(t,i),i,!0),i)},e.normalize=function normalize(e,t){return"string"==typeof e?e=serialize(parse(e,t),t):"object"===typeOf(e)&&(e=parse(serialize(e,t),t)),e},e.equal=function equal(e,t,r){return"string"==typeof e?e=serialize(parse(e,r),r):"object"===typeOf(e)&&(e=serialize(e,r)),"string"==typeof t?t=serialize(parse(t,r),r):"object"===typeOf(t)&&(t=serialize(t,r)),e===t},e.escapeComponent=function escapeComponent(e,i){return e&&e.toString().replace(i&&i.iri?r.ESCAPE:t.ESCAPE,pctEncChar)},e.unescapeComponent=unescapeComponent,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"../../node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./dependencies/buttplug-device-config/buttplug-device-config.json":function(e){e.exports=JSON.parse('{"connection-info-types":["btle","serial","usb","hid"],"protocols":{"lovense":{"btle":{"names":["LVS-*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff2-0000-1000-8000-00805f9b34fb","rx":"0000fff1-0000-1000-8000-00805f9b34fb"},"6e400001-b5a3-f393-e0a9-e50e24dcca9e":{"tx":"6e400002-b5a3-f393-e0a9-e50e24dcca9e","rx":"6e400003-b5a3-f393-e0a9-e50e24dcca9e"},"50300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0024-4bd4-bbd5-a6920e4c5653","rx":"50300003-0024-4bd4-bbd5-a6920e4c5653"},"57300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"57300002-0023-4bd4-bbd5-a6920e4c5653","rx":"57300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0024-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0024-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0024-4bd4-bbd5-a6920e4c5653"},"50300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"50300002-0023-4bd4-bbd5-a6920e4c5653","rx":"50300003-0023-4bd4-bbd5-a6920e4c5653"},"53300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"53300002-0023-4bd4-bbd5-a6920e4c5653","rx":"53300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"5a300002-0023-4bd4-bbd5-a6920e4c5653","rx":"5a300003-0023-4bd4-bbd5-a6920e4c5653"},"4f300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"4f300002-0023-4bd4-bbd5-a6920e4c5653","rx":"4f300003-0023-4bd4-bbd5-a6920e4c5653"},"42300001-0023-4bd4-bbd5-a6920e4c5653":{"tx":"42300002-0023-4bd4-bbd5-a6920e4c5653","rx":"42300003-0023-4bd4-bbd5-a6920e4c5653"}}}},"xinput":null,"libo":{"btle":{"names":["PiPiJing","XiaoLu","LuXiaoHan","SuoYinQiu","BaiHu","MonsterPub","Gugudai","ShaYu","Yuyi","LuWuShuang","LiBo","QingTing","Shuidi","Huohu"],"services":{"00006000-0000-1000-8000-00805f9b34fb":{"tx":"00006001-0000-1000-8000-00805f9b34fb","txmode":"00006002-0000-1000-8000-00805f9b34fb"}}}},"magic-motion":{"btle":{"names":["Smart Mini Vibe*","Flamingo","Eidolon","Smart Bean","Magic Cell","Magic Wand","Fugu","Krush","Lipstick","Sword","Curve"],"services":{"78667579-7b48-43db-b8c5-7928a6b0a335":{"tx":"78667579-a914-49a4-8333-aa3c0cd8fedc"}}}},"mysteryvibe":{"btle":{"names":["MV Crescendo","MV Tenuto*"],"services":{"f0006900-110c-478b-b74b-6f403b364a9c":{"txmode":"f0006901-110c-478b-b74b-6f403b364a9c","txvibrate":"f0006903-110c-478b-b74b-6f403b364a9c"}}}},"picobong":{"btle":{"names":["Blow hole","Picobong Male Toy","Diver","Picobong Egg","Life guard","Picobong Ring","Surfer","Picobong Butt Plug","Egg driver","Surfer_plug"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"vibratissimo":{"btle":{"names":["Vibratissimo"],"services":{"00001523-1212-efde-1523-785feabcd123":{"txmode":"00001524-1212-efde-1523-785feabcd123","txvibrate":"00001526-1212-efde-1523-785feabcd123","rx":"00001527-1212-efde-1523-785feabcd123"}}}},"wevibe":{"btle":{"names":["Cougar","4 Plus","4_Plus","4plus","Bloom","classic","Classic","Ditto","Gala","Jive","Melt","Moxie","Nova","NOVAV2","Pivot","Rey","We-Vibe Rocketman","Rave","Reina","imassager","Interactive Massager","03","Sync","Vector","Verge","Wish"],"services":{"f000bb03-0451-4000-b000-000000000000":{"tx":"f000c000-0451-4000-b000-000000000000","rx":"f000b000-0451-4000-b000-000000000000"}}}},"youcups":{"btle":{"names":["Youcups"],"services":{"0000fee9-0000-1000-8000-00805f9b34fb":{"tx":"d44bc439-abfd-45a2-b575-925416129600"}}}},"cueme":{"btle":{"names":["FUNCODE_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2-vibrator":{"btle":{"names":["Pearl2","Fuse","Virtual Blowbot","Titan"],"services":{"88f82580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f82581-0000-01e6-aace-0002a5d5c51b","rxtouch":"88f82582-0000-01e6-aace-0002a5d5c51b","rxaccel":"88f82584-0000-01e6-aace-0002a5d5c51b"}}}},"kiiroo-v21":{"btle":{"names":["Onyx2.1","Titan1.1"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v21-vibrator":{"btle":{"names":["Cliona"],"services":{"00001900-0000-1000-8000-00805f9b34fb":{"whitelist":"00001901-0000-1000-8000-00805f9b34fb","tx":"00001902-0000-1000-8000-00805f9b34fb","rx":"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2":{"btle":{"names":["Launch","Onyx2"],"services":{"88f80580-0000-01e6-aace-0002a5d5c51b":{"tx":"88f80581-0000-01e6-aace-0002a5d5c51b","rx":"88f80582-0000-01e6-aace-0002a5d5c51b","firmware":"88f80583-0000-01e6-aace-0002a5d5c51b"},"f60402a6-0293-4bdb-9f20-6758133f7090":{"tx":"02962ac9-e86f-4094-989d-231d69995fc2","rx":"d44d0393-0731-43b3-a373-8fc70b1f3323","firmware":"c7b7a04b-2cc4-40ff-8b10-5d531d1161db"}}}},"erostek-et312":{"serial":{"baud-rate":19200,"data-bits":8,"parity":"N","stop-bits":1}},"vorze-cyclone-x":{"hid":{"vendor-id":1155,"product-id":22352}},"rez-trancevibrator":{"usb":{"vendor-id":2889,"product-id":1615}},"kiiroo-v1":{"btle":{"names":["ONYX","PEARL"],"services":{"49535343-fe7d-4ae5-8fa9-9fafd205e455":{"rx":"49535343-1e4d-4bd9-ba61-23c647249616","tx":"49535343-8841-43f4-a8d4-ecbe34729bb3","command":"49535343-aca3-481c-91ec-d85e28a60318","cmd2":"49535343-6daa-4d02-abf6-19569aca69fe"}}}},"vorze-sa":{"btle":{"names":["CycSA","Bach smart","UFOSA"],"services":{"40ee1111-63ec-4b7f-8ce7-712efd55b90e":{"tx":"40ee2222-63ec-4b7f-8ce7-712efd55b90e"}}}},"youou":{"btle":{"names":["VX001_*"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"realtouch":{"hid":{"vendor-id":8020,"product-id":1}},"prettylove":{"btle":{"names":["Aogu BLE *"],"services":{"0000ffe5-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe9-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"svakom":{"btle":{"names":["Aogu SCB"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb","rx":"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},"realov":{"btle":{"names":["REALOV_VIBE"],"services":{"0000ffe0-0000-1000-8000-00805f9b34fb":{"tx":"0000ffe1-0000-1000-8000-00805f9b34fb"}}}},"motorbunny":{"btle":{"names":["MB Controller"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"zalo":{"btle":{"names":["ZALO-Queen"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"sayberx":{"btle":{"names":["SayberX"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff6-0000-1000-8000-00805f9b34fb"}}}},"muse":{"btle":{"names":["WB-ZDB-WST","WB-TDD"],"services":{"0000aaa0-0000-1000-8000-00805f9b34fb":{"tx":"0000aaa1-0000-1000-8000-00805f9b34fb"}}}},"lelo-f1s":{"btle":{"names":["F1s"],"services":{"0000fff0-0000-1000-8000-00805f9b34fb":{"tx":"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"aneros":{"btle":{"names":["Massage Demo"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"lovehoney-desire":{"btle":{"names":["PROSTATE VIBE","KNICKER VIBE"],"services":{"0000ff00-0000-1000-8000-00805f9b34fb":{"tx":"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"twerkingbutt":{"btle":{"names":["BODIKANG","Twerking Butt","TwerkingButt"],"services":{"00000a60-0000-1000-8000-00805f9b34fb":{"tx":"00000a66-0000-1000-8000-00805f9b34fb","rx":"00000a67-0000-1000-8000-00805f9b34fb"}}}}}}')},"./dependencies/buttplug-schema/schema/buttplug-schema.json":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","title":"Buttplug Message Schema","version":1,"description":"The JSON Protocol format for the Buttplug Protocol.","components":{"Id":{"description":"User-set id for the message. 0 denotes system message and is reserved.","type":"integer","minimum":0,"maximum":4294967295},"SystemId":{"description":"Used for non-direct-reply messages that can only be sent from server to client, using the reserved system message Id of 0.","type":"integer","minimum":0,"maximum":0},"DeviceName":{"description":"Name of the device","type":"string"},"DeviceIndex":{"description":"Index used for referencing the device in device messages.","type":"integer","minimum":0},"IdMessage":{"properties":{"Id":{"$ref":"#/components/Id"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceMessages":{"description":"A list of the messages a device will accept on this server implementation.","type":"array","items":{"type":"string","minItems":1}},"DeviceMessagesEx":{"description":"A list of the messages a device will accept on this server implementation.","type":"object","items":{"description":"A list of the messages attributes.","type":"object","properties":{"FeatureCount":{"$ref":"#/components/FeatureCount"}},"additionalProperties":true,"minItems":1}},"SystemIdMessage":{"description":"Message sent by the server that is not in direct reply to a message send from the client, and always uses system Id.","properties":{"Id":{"$ref":"#/components/SystemId"}},"additionalProperties":false,"minProperties":1,"maxProperties":1,"required":["Id"]},"DeviceIndexMessage":{"properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"additionalProperties":false,"minProperties":2,"maxProperties":2,"required":["Id","DeviceIndex"]},"FeatureCount":{"description":"Number of features on device.","type":"integer","minimum":0}},"messages":{"Ok":{"type":"object","description":"Signifies successful processing of the message indicated by the id.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Ping":{"type":"object","description":"Connection keep-alive message.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Error":{"type":"object","description":"Signifies the server encountered an error while processing the message indicated by the id.","properties":{"Id":{"$ref":"#/components/Id"},"ErrorMessage":{"type":"string"},"ErrorCode":{"type":"number","minimum":0,"maximum":4}},"additionalProperties":false,"minProperties":3,"maxProperties":3,"required":["Id","ErrorMessage","ErrorCode"]},"Test":{"type":"object","description":"Used for connection/application testing. Causes server to echo back the string sent. Sending string of \'Error\' will result in a server error. ","properties":{"Id":{"$ref":"#/components/Id"},"TestString":{"description":"String to be echo\'d back from server. Setting this to \'Error\' will cause an error to be thrown.","type":"string"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","TestString"]},"DeviceList":{"type":"object","description":"List of all available devices known to the system.","properties":{"Id":{"$ref":"#/components/Id"},"Devices":{"description":"Array of device ids and names.","type":"array","items":{"type":"object","properties":{"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["DeviceName","DeviceIndex","DeviceMessages"]},"minItems":0}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","Devices"]},"DeviceAdded":{"type":"object","description":"Notifies client that a device of a certain type has been added to the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceName","DeviceIndex","DeviceMessages"]},"DeviceRemoved":{"type":"object","description":"Notifies client that a device of a certain type has been removed from the server.","anyOf":[{"$ref":"#/components/DeviceIndexMessage"}]},"RequestDeviceList":{"type":"object","description":"Request for the server to send a list of devices to the client.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StartScanning":{"type":"object","description":"Request for the server to start scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StopScanning":{"type":"object","description":"Request for the server to stop scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"ScanningFinished":{"type":"object","description":"Server notification to client that scanning has ended.","anyOf":[{"$ref":"#/components/SystemIdMessage"}]},"RequestLog":{"type":"object","description":"Request for server to stream log messages of a certain level to client.","properties":{"Id":{"$ref":"#/components/Id"},"LogLevel":{"description":"Maximum level of log message to receive.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","LogLevel"]},"Log":{"type":"object","description":"Log message from the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"LogLevel":{"description":"Log level of message.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]},"LogMessage":{"description":"Log message from server.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","LogLevel","LogMessage"]},"RequestServerInfo":{"type":"object","description":"Request server version, and relay client name.","properties":{"Id":{"$ref":"#/components/Id"},"ClientName":{"description":"Name of the client software.","type":"string"},"MessageVersion":{"description":"Message template version of the client software.","type":"integer","minimum":0}},"minProperties":2,"maxProperties":3,"additionalProperties":false,"required":["Id","ClientName"]},"ServerInfo":{"type":"object","description":"Server version information, in Major.Minor.Build format.","properties":{"Id":{"$ref":"#/components/Id"},"ServerName":{"description":"Name of the server. Can be 0-length.","type":"string"},"MessageVersion":{"description":"Message template version of the server software.","type":"integer","minimum":0},"MajorVersion":{"description":"Major version of server.","type":"integer","minimum":0},"MinorVersion":{"description":"Minor version of server.","type":"integer","minimum":0},"BuildVersion":{"description":"Build version of server.","type":"integer","minimum":0},"MaxPingTime":{"description":"Maximum time (in milliseconds) the server will wait between ping messages from client before shutting down.","type":"integer","minimum":0}},"minProperties":7,"maxProperties":7,"additionalProperties":false,"required":["Id","MajorVersion","MinorVersion","BuildVersion","MessageVersion","MaxPingTime","ServerName"]},"FleshlightLaunchFW12Cmd":{"type":"object","description":"Sends speed and position command to the Fleshlight Launch Device denoted by the device index.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Speed at which to move to designated position.","type":"integer","minimum":0,"maximum":99},"Position":{"description":"Position to which to move Fleshlight.","type":"integer","minimum":0,"maximum":99}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Position"]},"LovenseCmd":{"type":"object","description":"Sends a command string to a Lovense device. Command string will be verified by sender.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Lovense device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"SingleMotorVibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Device vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speed"]},"RawCmd":{"type":"object","description":"Sends a raw byte array to a device. Should only be used for testing/development.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Raw byte string to send to device.","type":"array","items":{"type":"integer","minimum":0,"maximum":255,"minItems":1}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"KiirooCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Kiiroo device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"VorzeA10CycloneCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Rotation speed command for the Cyclone.","type":"integer","minimum":0,"maximum":100},"Clockwise":{"description":"True for clockwise rotation (in relation to device facing user), false for Counter-clockwise","type":"boolean"}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Clockwise"]},"StopDeviceCmd":{"type":"object","description":"Stops the all actions currently being taken by a device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","DeviceIndex"]},"StopAllDevices":{"type":"object","description":"Stops all actions currently being taken by all connected devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"VibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speeds":{"description":"Device vibration speeds (floating point, 0 < x < 1) keyed on vibrator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Vibrator number.","type":"integer","minimum":0},"Speed":{"description":"Vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Index","Speed"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speeds"]},"RotateCmd":{"type":"object","description":"Sends a rotate command to a device that supports rotation.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Rotations":{"description":"Device rotation speeds (floating point, 0 < x < 1) keyed on rotator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Rotator number.","type":"integer","minimum":0},"Speed":{"description":"Rotation speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1},"Clockwise":{"description":"Rotation direction (boolean). Not all devices have a concept of actual clockwise.","type":"boolean"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Speed","Clockwise"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Rotations"]},"LinearCmd":{"type":"object","description":"Sends a linear movement command to a device that supports linear movements.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Vectors":{"description":"Device linear movement times (milliseconds) and positions (floating point, 0 < x < 1) keyed on linear actuator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Linear actuator number.","type":"integer","minimum":0},"Duration":{"description":"Linear movement time in milliseconds.","type":"number","minimum":0},"Position":{"description":"Linear movement position (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Duration","Position"]}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Vectors"]}},"type":"array","items":{"title":"Messages","description":"One or more messages validated by the Buttplug Message schema list.","properties":{"Ok":{"$ref":"#/messages/Ok"},"Error":{"$ref":"#/messages/Error"},"Ping":{"$ref":"#/messages/Ping"},"Test":{"$ref":"#/messages/Test"},"DeviceList":{"$ref":"#/messages/DeviceList"},"DeviceAdded":{"$ref":"#/messages/DeviceAdded"},"DeviceRemoved":{"$ref":"#/messages/DeviceRemoved"},"RequestDeviceList":{"$ref":"#/messages/RequestDeviceList"},"StopDeviceCmd":{"$ref":"#/messages/StopDeviceCmd"},"StopAllDevices":{"$ref":"#/messages/StopAllDevices"},"StartScanning":{"$ref":"#/messages/StartScanning"},"StopScanning":{"$ref":"#/messages/StopScanning"},"ScanningFinished":{"$ref":"#/messages/ScanningFinished"},"RequestLog":{"$ref":"#/messages/RequestLog"},"Log":{"$ref":"#/messages/Log"},"RequestServerInfo":{"$ref":"#/messages/RequestServerInfo"},"ServerInfo":{"$ref":"#/messages/ServerInfo"},"FleshlightLaunchFW12Cmd":{"$ref":"#/messages/FleshlightLaunchFW12Cmd"},"LovenseCmd":{"$ref":"#/messages/LovenseCmd"},"SingleMotorVibrateCmd":{"$ref":"#/messages/SingleMotorVibrateCmd"},"KiirooCmd":{"$ref":"#/messages/KiirooCmd"},"RawCmd":{"$ref":"#/messages/RawCmd"},"VorzeA10CycloneCmd":{"$ref":"#/messages/VorzeA10CycloneCmd"},"VibrateCmd":{"$ref":"#/messages/VibrateCmd"},"RotateCmd":{"$ref":"#/messages/RotateCmd"},"LinearCmd":{"$ref":"#/messages/LinearCmd"}},"additionalProperties":false,"minProperties":1,"maxProperties":1},"minItems":1,"additionalProperties":false}')},"./node_modules/ajv/lib/ajv.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/index.js"),o=r("./node_modules/ajv/lib/compile/resolve.js"),n=r("./node_modules/ajv/lib/cache.js"),s=r("./node_modules/ajv/lib/compile/schema_obj.js"),a=r("../../node_modules/fast-json-stable-stringify/index.js"),c=r("./node_modules/ajv/lib/compile/formats.js"),u=r("./node_modules/ajv/lib/compile/rules.js"),d=r("./node_modules/ajv/lib/data.js"),l=r("./node_modules/ajv/lib/compile/util.js");e.exports=Ajv,Ajv.prototype.validate=function validate(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},Ajv.prototype.compile=function compile(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},Ajv.prototype.addSchema=function addSchema(e,t,r,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.addSchema(e[n],void 0,r,i);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return checkUnique(this,t=o.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,i,!0),this},Ajv.prototype.addMetaSchema=function addMetaSchema(e,t,r){return this.addSchema(e,t,r,!0),this},Ajv.prototype.validateSchema=function validateSchema(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function defaultMeta(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(h)?h:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(r,e);if(!i&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return i},Ajv.prototype.getSchema=function getSchema(e){var t=_getSchemaObj(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function _getSchemaFragment(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var n=r.schema,a=r.root,c=r.baseId,u=i.call(e,n,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:n,root:a,baseId:c,validate:u}),u}}(this,e)}},Ajv.prototype.removeSchema=function removeSchema(e){if(e instanceof RegExp)return _removeAllSchemas(this,this._schemas,e),_removeAllSchemas(this,this._refs,e),this;switch(typeof e){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var t=_getSchemaObj(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var n=this._getId(e);n&&(n=o.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this},Ajv.prototype.addFormat=function addFormat(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},Ajv.prototype.errorsText=function errorsText(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,o="",n=0;n<e.length;n++){var s=e[n];s&&(o+=i+s.dataPath+" "+s.message+r)}return o.slice(0,-r.length)},Ajv.prototype._addSchema=function _addSchema(e,t,r,i){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var n=this._opts.serialize,a=n?n(e):e,c=this._cache.get(a);if(c)return c;i=i||!1!==this._opts.addUsedSchema;var u=o.normalizeId(this._getId(e));u&&i&&checkUnique(this,u);var d,l=!1!==this._opts.validateSchema&&!t;l&&!(d=u&&u==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=o.ids.call(this,e),p=new s({id:u,schema:e,localRefs:f,cacheKey:a,meta:r});"#"!=u[0]&&i&&(this._refs[u]=p);this._cache.put(a,p),l&&d&&this.validateSchema(e,!0);return p},Ajv.prototype._compile=function _compile(e,t){if(e.compiling)return e.validate=callValidate,callValidate.schema=e.schema,callValidate.errors=null,callValidate.root=t||callValidate,!0===e.schema.$async&&(callValidate.$async=!0),callValidate;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=i.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function callValidate(){var t=e.validate,r=t.apply(this,arguments);return callValidate.errors=t.errors,r}},Ajv.prototype.compileAsync=r("./node_modules/ajv/lib/compile/async.js");var f=r("./node_modules/ajv/lib/keyword.js");Ajv.prototype.addKeyword=f.add,Ajv.prototype.getKeyword=f.get,Ajv.prototype.removeKeyword=f.remove,Ajv.prototype.validateKeyword=f.validate;var p=r("./node_modules/ajv/lib/compile/error_classes.js");Ajv.ValidationError=p.Validation,Ajv.MissingRefError=p.MissingRef,Ajv.$dataMetaSchema=d;var h="http://json-schema.org/draft-07/schema",v=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m=["/properties"];function Ajv(e){if(!(this instanceof Ajv))return new Ajv(e);e=this._opts=l.copy(e)||{},function setLogger(e){var t=e._opts.logger;if(!1===t)e.logger={log:noop,warn:noop,error:noop};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new n,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function chooseGetId(e){switch(e.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function getMetaSchemaOptions(e){for(var t=l.copy(e._opts),r=0;r<v.length;r++)delete t[v[r]];return t}(this),e.formats&&function addInitialFormats(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),function addDefaultMetaSchema(e){var t;e._opts.$data&&(t=r("./node_modules/ajv/lib/refs/data.json"),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var i=r("./node_modules/ajv/lib/refs/json-schema-draft-07.json");e._opts.$data&&(i=d(i,m));e.addMetaSchema(i,h,!0),e._refs["http://json-schema.org/schema"]=h}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function addInitialSchemas(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function _getSchemaObj(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function _removeAllSchemas(e,t,r){for(var i in t){var o=t[i];o.meta||r&&!r.test(i)||(e._cache.del(o.cacheKey),delete t[i])}}function _getId(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function _get$Id(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _get$IdOrId(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function checkUnique(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function noop(){}},"./node_modules/ajv/lib/cache.js":function(e,t,r){"use strict";var i=e.exports=function Cache(){this._cache={}};i.prototype.put=function Cache_put(e,t){this._cache[e]=t},i.prototype.get=function Cache_get(e){return this._cache[e]},i.prototype.del=function Cache_del(e){delete this._cache[e]},i.prototype.clear=function Cache_clear(){this._cache={}}},"./node_modules/ajv/lib/compile/async.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/error_classes.js").MissingRef;e.exports=function compileAsync(e,t,r){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof t&&(r=t,t=void 0);var n=loadMetaSchemaOf(e).then((function(){var r=o._addSchema(e,void 0,t);return r.validate||function _compileAsync(e){try{return o._compile(e)}catch(e){if(e instanceof i)return loadMissingSchema(e);throw e}function loadMissingSchema(r){var i=r.missingSchema;if(added(i))throw new Error("Schema "+i+" is loaded but "+r.missingRef+" cannot be resolved");var n=o._loadingSchemas[i];return n||(n=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(removePromise,removePromise),n.then((function(e){if(!added(i))return loadMetaSchemaOf(e).then((function(){added(i)||o.addSchema(e,i,void 0,t)}))})).then((function(){return _compileAsync(e)}));function removePromise(){delete o._loadingSchemas[i]}function added(e){return o._refs[e]||o._schemas[e]}}}(r)}));r&&n.then((function(e){r(null,e)}),r);return n;function loadMetaSchemaOf(e){var t=e.$schema;return t&&!o.getSchema(t)?compileAsync.call(o,{$ref:t},!0):Promise.resolve()}}},"./node_modules/ajv/lib/compile/error_classes.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/resolve.js");function MissingRefError(e,t,r){this.message=r||MissingRefError.message(e,t),this.missingRef=i.url(e,t),this.missingSchema=i.normalizeId(i.fullPath(this.missingRef))}function errorSubclass(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:errorSubclass((function ValidationError(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:errorSubclass(MissingRefError)},MissingRefError.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},"./node_modules/ajv/lib/compile/formats.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/util.js"),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,d=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,l=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,f=/^(?:\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,h=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function formats(e){return e="full"==e?"full":"fast",i.copy(formats[e])}function date(e){var t=e.match(o);if(!t)return!1;var r=+t[1],i=+t[2],s=+t[3];return i>=1&&i<=12&&s>=1&&s<=(2==i&&function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:n[i])}function time(e,t){var r=e.match(s);if(!r)return!1;var i=r[1],o=r[2],n=r[3],a=r[5];return(i<=23&&o<=59&&n<=59||23==i&&59==o&&60==n)&&(!t||a)}e.exports=formats,formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:d,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:l,"json-pointer":f,"json-pointer-uri-fragment":p,"relative-json-pointer":h},formats.full={date:date,time:time,"date-time":function date_time(e){var t=e.split(v);return 2==t.length&&date(t[0])&&time(t[1],!0)},uri:function uri(e){return m.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:d,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function hostname(e){return e.length<=255&&a.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:l,"json-pointer":f,"json-pointer-uri-fragment":p,"relative-json-pointer":h};var v=/t|\s/i;var m=/\/|:/;var g=/[^\\]\\Z/;function regex(e){if(g.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},"./node_modules/ajv/lib/compile/index.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/resolve.js"),o=r("./node_modules/ajv/lib/compile/util.js"),n=r("./node_modules/ajv/lib/compile/error_classes.js"),s=r("../../node_modules/fast-json-stable-stringify/index.js"),a=r("./node_modules/ajv/lib/dotjs/validate.js"),c=o.ucs2length,u=r("./node_modules/fast-deep-equal/index.js"),d=n.Validation;function checkCompiling(e,t,r){var i=compIndex.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}function endCompiling(e,t,r){var i=compIndex.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}function compIndex(e,t,r){for(var i=0;i<this._compilations.length;i++){var o=this._compilations[i];if(o.schema==e&&o.root==t&&o.baseId==r)return i}return-1}function patternCode(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function defaultCode(e){return"var default"+e+" = defaults["+e+"];"}function refValCode(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function customRuleCode(e){return"var customRule"+e+" = customRules["+e+"];"}function vars(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}e.exports=function compile(e,t,r,l){var f=this,p=this._opts,h=[void 0],v={},m=[],g={},y=[],b={},_=[];t=t||{schema:e,refVal:h,refs:v};var S=checkCompiling.call(this,e,t,l),w=this._compilations[S.index];if(S.compiling)return w.callValidate=function callValidate(){var e=w.validate,t=e.apply(this,arguments);return callValidate.errors=e.errors,t};var C=this._formats,E=this.RULES;try{var P=localCompile(e,t,r,l);w.validate=P;var M=w.callValidate;return M&&(M.schema=P.schema,M.errors=null,M.refs=P.refs,M.refVal=P.refVal,M.root=P.root,M.$async=P.$async,p.sourceCode&&(M.source=P.source)),P}finally{endCompiling.call(this,e,t,l)}function localCompile(e,r,s,l){var g=!r||r&&r.schema==e;if(r.schema!=t.schema)return compile.call(f,e,r,s,l);var b,S=!0===e.$async,w=a({isTop:!0,schema:e,isRoot:g,baseId:l,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:n.MissingRef,RULES:E,validate:a,util:o,resolve:i,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:p,formats:C,logger:f.logger,self:f});w=vars(h,refValCode)+vars(m,patternCode)+vars(y,defaultCode)+vars(_,customRuleCode)+w,p.processCode&&(w=p.processCode(w));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",w)(f,E,C,t,h,y,_,u,c,d),h[0]=b}catch(e){throw f.logger.error("Error compiling schema, function code:",w),e}return b.schema=e,b.errors=null,b.refs=v,b.refVal=h,b.root=g?b:r,S&&(b.$async=!0),!0===p.sourceCode&&(b.source={code:w,patterns:m,defaults:y}),b}function resolveRef(e,o,n){o=i.url(e,o);var s,a,c=v[o];if(void 0!==c)return resolvedRef(s=h[c],a="refVal["+c+"]");if(!n&&t.refs){var u=t.refs[o];if(void 0!==u)return resolvedRef(s=t.refVal[u],a=addLocalRef(o,s))}a=addLocalRef(o);var d=i.call(f,localCompile,t,o);if(void 0===d){var l=r&&r[o];l&&(d=i.inlineRef(l,p.inlineRefs)?l:compile.call(f,l,t,r,e))}if(void 0!==d)return function replaceLocalRef(e,t){var r=v[e];h[r]=t}(o,d),resolvedRef(d,a);!function removeLocalRef(e){delete v[e]}(o)}function addLocalRef(e,t){var r=h.length;return h[r]=t,v[e]=r,"refVal"+r}function resolvedRef(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function usePattern(e){var t=g[e];return void 0===t&&(t=g[e]=m.length,m[t]=e),"pattern"+t}function useDefault(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=b[t];return void 0===r&&(r=b[t]=y.length,y[r]=e),"default"+r}}function useCustomRule(e,t,r,i){if(!1!==f._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var n=e.definition.validateSchema;if(n)if(!n(t)){var s="keyword schema is invalid: "+f.errorsText(n.errors);if("log"!=f._opts.validateSchema)throw new Error(s);f.logger.error(s)}}var a,c=e.definition.compile,u=e.definition.inline,d=e.definition.macro;if(c)a=c.call(f,t,r,i);else if(d)a=d.call(f,t,r,i),!1!==p.validateSchema&&f.validateSchema(a,!0);else if(u)a=u.call(f,i,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var l=_.length;return _[l]=a,{code:"customRule"+l,validate:a}}}},"./node_modules/ajv/lib/compile/resolve.js":function(e,t,r){"use strict";var i=r("../../node_modules/uri-js/dist/es5/uri.all.js"),o=r("./node_modules/fast-deep-equal/index.js"),n=r("./node_modules/ajv/lib/compile/util.js"),s=r("./node_modules/ajv/lib/compile/schema_obj.js"),a=r("./node_modules/json-schema-traverse/index.js");function resolve(e,t,r){var i=this._refs[r];if("string"==typeof i){if(!this._refs[i])return resolve.call(this,e,t,i);i=this._refs[i]}if((i=i||this._schemas[r])instanceof s)return inlineRef(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var o,n,a,c=resolveSchema.call(this,t,r);return c&&(o=c.schema,t=c.root,a=c.baseId),o instanceof s?n=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(n=inlineRef(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),n}function resolveSchema(e,t){var r=i.parse(t),o=_getFullPath(r),n=getFullPath(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==n){var a=normalizeId(o),c=this._refs[a];if("string"==typeof c)return resolveRecursive.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==normalizeId(t))return{schema:c,root:e,baseId:n};e=c}if(!e.schema)return;n=getFullPath(this._getId(e.schema))}return getJsonPointer.call(this,r,n,e.schema,e)}function resolveRecursive(e,t,r){var i=resolveSchema.call(this,e,t);if(i){var o=i.schema,n=i.baseId;e=i.root;var s=this._getId(o);return s&&(n=resolveUrl(n,s)),getJsonPointer.call(this,r,n,o,e)}}e.exports=resolve,resolve.normalizeId=normalizeId,resolve.fullPath=getFullPath,resolve.url=resolveUrl,resolve.ids=function resolveIds(e){var t=normalizeId(this._getId(e)),r={"":t},s={"":getFullPath(t,!1)},c={},u=this;return a(e,{allKeys:!0},(function(e,t,a,d,l,f,p){if(""!==t){var h=u._getId(e),v=r[d],m=s[d]+"/"+l;if(void 0!==p&&(m+="/"+("number"==typeof p?p:n.escapeFragment(p))),"string"==typeof h){h=v=normalizeId(v?i.resolve(v,h):h);var g=u._refs[h];if("string"==typeof g&&(g=u._refs[g]),g&&g.schema){if(!o(e,g.schema))throw new Error('id "'+h+'" resolves to more than one schema')}else if(h!=normalizeId(m))if("#"==h[0]){if(c[h]&&!o(e,c[h]))throw new Error('id "'+h+'" resolves to more than one schema');c[h]=e}else u._refs[h]=m}r[t]=v,s[t]=m}})),c},resolve.inlineRef=inlineRef,resolve.schema=resolveSchema;var c=n.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,t,r,i){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),s=1;s<o.length;s++){var a=o[s];if(a){if(void 0===(r=r[a=n.unescapeFragment(a)]))break;var u;if(!c[a]&&((u=this._getId(r))&&(t=resolveUrl(t,u)),r.$ref)){var d=resolveUrl(t,r.$ref),l=resolveSchema.call(this,i,d);l&&(r=l.schema,i=l.root,t=l.baseId)}}}return void 0!==r&&r!==i.schema?{schema:r,root:i,baseId:t}:void 0}}var u=n.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(e,t){return!1!==t&&(void 0===t||!0===t?function checkNoRef(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!checkNoRef(t))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(t=e[i])&&!checkNoRef(t))return!1}return!0}(e):t?function countKeys(e){var t,r=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(t=e[i])&&(r+=countKeys(t)),r==1/0)return 1/0}else for(var o in e){if("$ref"==o)return 1/0;if(u[o])r++;else if("object"==typeof(t=e[o])&&(r+=countKeys(t)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function getFullPath(e,t){return!1!==t&&(e=normalizeId(e)),_getFullPath(i.parse(e))}function _getFullPath(e){return i.serialize(e).split("#")[0]+"#"}var d=/#\/?$/;function normalizeId(e){return e?e.replace(d,""):""}function resolveUrl(e,t){return t=normalizeId(t),i.resolve(e,t)}},"./node_modules/ajv/lib/compile/rules.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/dotjs/index.js"),o=r("./node_modules/ajv/lib/compile/util.js").toHash;e.exports=function rules(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var o;if("object"==typeof r){var n=Object.keys(r)[0];o=r[n],r=n,o.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:i[r],implements:o}})),e.all.$comment={keyword:"$comment",code:i.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=o(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},"./node_modules/ajv/lib/compile/schema_obj.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/compile/util.js");e.exports=function SchemaObject(e){i.copy(e,this)}},"./node_modules/ajv/lib/compile/ucs2length.js":function(e,t,r){"use strict";e.exports=function ucs2length(e){for(var t,r=0,i=e.length,o=0;o<i;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},"./node_modules/ajv/lib/compile/util.js":function(e,t,r){"use strict";function checkDataType(e,t,r){var i=r?" !== ":" === ",o=r?" || ":" && ",n=r?"!":"",s=r?"":"!";switch(e){case"null":return t+i+"null";case"array":return n+"Array.isArray("+t+")";case"object":return"("+n+t+o+"typeof "+t+i+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+s+"("+t+" % 1)"+o+t+i+t+")";default:return"typeof "+t+i+'"'+e+'"'}}e.exports={copy:function copy(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:checkDataType,checkDataTypes:function checkDataTypes(e,t){switch(e.length){case 1:return checkDataType(e[0],t,!0);default:var r="",i=toHash(e);for(var o in i.array&&i.object&&(r=i.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)r+=(r?" && ":"")+checkDataType(o,t,!0);return r}},coerceToTypes:function coerceToTypes(e,t){if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++){var n=t[o];(i[n]||"array"===e&&"array"===n)&&(r[r.length]=n)}if(r.length)return r}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:r("./node_modules/fast-deep-equal/index.js"),ucs2length:r("./node_modules/ajv/lib/compile/ucs2length.js"),varOccurences:function varOccurences(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function varReplace(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},cleanUpCode:function cleanUpCode(e){return e.replace(s,"").replace(a,"").replace(c,"if (!($1))")},finalCleanUpCode:function finalCleanUpCode(e,t){var r=e.match(u);r&&2==r.length&&(e=t?e.replace(l,"").replace(f,"return data;"):e.replace(d,"").replace("return errors === 0;","validate.errors = null; return true;"));return(r=e.match(p))&&3===r.length?e.replace(h,""):e},schemaHasRules:function schemaHasRules(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function schemaHasRulesExcept(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function schemaUnknownRules(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:toQuotedString,getPathExpr:function getPathExpr(e,t,r,i){return joinPaths(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function getPath(e,t,r){var i=toQuotedString(r?"/"+escapeJsonPointer(t):getProperty(t));return joinPaths(e,i)},getData:function getData(e,t,r){var i,o,n,s;if(""===e)return"rootData";if("/"==e[0]){if(!v.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,n="rootData"}else{if(!(s=e.match(m)))throw new Error("Invalid JSON-pointer: "+e);if(i=+s[1],"#"==(o=s[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(n="data"+(t-i||""),!o)return n}for(var a=n,c=o.split("/"),u=0;u<c.length;u++){var d=c[u];d&&(n+=getProperty(unescapeJsonPointer(d)),a+=" && "+n)}return a},unescapeFragment:function unescapeFragment(e){return unescapeJsonPointer(decodeURIComponent(e))},unescapeJsonPointer:unescapeJsonPointer,escapeFragment:function escapeFragment(e){return encodeURIComponent(escapeJsonPointer(e))},escapeJsonPointer:escapeJsonPointer};var i=toHash(["string","number","integer","boolean","null"]);function toHash(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var o=/^[a-z$_][a-z$_0-9]*$/i,n=/'|\\/g;function getProperty(e){return"number"==typeof e?"["+e+"]":o.test(e)?"."+e:"['"+escapeQuotes(e)+"']"}function escapeQuotes(e){return e.replace(n,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var s=/else\s*{\s*}/g,a=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,c=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var u=/[^v.]errors/g,d=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,l=/var errors = 0;|var vErrors = null;/g,f=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,p=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,h=/if \(rootData === undefined\) rootData = data;/;function toQuotedString(e){return"'"+escapeQuotes(e)+"'"}var v=/^\/(?:[^~]|~0|~1)*$/,m=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function joinPaths(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function escapeJsonPointer(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},"./node_modules/ajv/lib/data.js":function(e,t,r){"use strict";var i=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,n=t[r].split("/"),s=e;for(o=1;o<n.length;o++)s=s[n[o]];for(o=0;o<i.length;o++){var a=i[o],c=s[a];c&&(s[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},"./node_modules/ajv/lib/definition_schema.js":function(e,t,r){"use strict";var i=r("./node_modules/ajv/lib/refs/json-schema-draft-07.json");e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:i.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:i.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},"./node_modules/ajv/lib/dotjs/_limit.js":function(e,t,r){"use strict";e.exports=function generate__limit(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a;var p="maximum"==t,h=p?"exclusiveMaximum":"exclusiveMinimum",v=e.schema[h],m=e.opts.$data&&v&&v.$data,g=p?"<":">",y=p?">":"<",b=void 0;if(m){var _=e.util.getData(v.$data,s,e.dataPathArr),S="exclusive"+n,w="exclType"+n,C="exclIsNumber"+n,E="' + "+(x="op"+n)+" + '";o+=" var schemaExcl"+n+" = "+_+"; ",o+=" var "+S+"; var "+w+" = typeof "+(_="schemaExcl"+n)+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var P;b=h;(P=P||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+h+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var M=o;o=P.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),o+=" "+w+" == 'number' ? ( ("+S+" = "+i+" === undefined || "+_+" "+g+"= "+i+") ? "+l+" "+y+"= "+_+" : "+l+" "+y+" "+i+" ) : ( ("+S+" = "+_+" === true) ? "+l+" "+y+"= "+i+" : "+l+" "+y+" "+i+" ) || "+l+" !== "+l+") { var op"+n+" = "+S+" ? '"+g+"' : '"+g+"='; ",void 0===a&&(b=h,u=e.errSchemaPath+"/"+h,i=_,f=m)}else{E=g;if((C="number"==typeof v)&&f){var x="'"+E+"'";o+=" if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),o+=" ( "+i+" === undefined || "+v+" "+g+"= "+i+" ? "+l+" "+y+"= "+v+" : "+l+" "+y+" "+i+" ) || "+l+" !== "+l+") { "}else{C&&void 0===a?(S=!0,b=h,u=e.errSchemaPath+"/"+h,i=v,y+="="):(C&&(i=Math[p?"min":"max"](v,a)),v===(!C||i)?(S=!0,b=h,u=e.errSchemaPath+"/"+h,y+="="):(S=!1,E+="="));x="'"+E+"'";o+=" if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),o+=" "+l+" "+y+" "+i+" || "+l+" !== "+l+") { "}}b=b||t,(P=P||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+x+", limit: "+i+", exclusive: "+S+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+E+" ",o+=f?"' + "+i:i+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";M=o;return o=P.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitItems.js":function(e,t,r){"use strict";e.exports=function generate__limitItems(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a,o+="if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),o+=" "+l+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var p=t,h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=f?"' + "+i+" + '":""+a,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;return o=h.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitLength.js":function(e,t,r){"use strict";e.exports=function generate__limitLength(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a;var p="maxLength"==t?">":"<";o+="if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?o+=" "+l+".length ":o+=" ucs2length("+l+") ",o+=" "+p+" "+i+") { ";var h=t,v=v||[];v.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=f?"' + "+i+" + '":""+a,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var m=o;return o=v.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/_limitProperties.js":function(e,t,r){"use strict";e.exports=function generate__limitProperties(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a,o+="if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),o+=" Object.keys("+l+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var p=t,h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(p||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=f?"' + "+i+" + '":""+a,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;return o=h.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/allOf.js":function(e,t,r){"use strict";e.exports=function generate_allOf(e,t,r){var i=" ",o=e.schema[t],n=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var d="valid"+c.level,l=c.baseId,f=!0,p=o;if(p)for(var h,v=-1,m=p.length-1;v<m;)h=p[v+=1],(e.opts.strictKeywords?"object"==typeof h&&Object.keys(h).length>0:e.util.schemaHasRules(h,e.RULES.all))&&(f=!1,c.schema=h,c.schemaPath=n+"["+v+"]",c.errSchemaPath=s+"/"+v,i+="  "+e.validate(c)+" ",c.baseId=l,a&&(i+=" if ("+d+") { ",u+="}"));return a&&(i+=f?" if (true) { ":" "+u.slice(0,-1)+" "),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/anyOf.js":function(e,t,r){"use strict";e.exports=function generate_anyOf(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f="errs__"+o,p=e.util.copy(e),h="";p.level++;var v="valid"+p.level;if(s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var m=p.baseId;i+=" var "+f+" = errors; var "+l+" = false;  ";var g=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=s;if(y)for(var b,_=-1,S=y.length-1;_<S;)b=y[_+=1],p.schema=b,p.schemaPath=a+"["+_+"]",p.errSchemaPath=c+"/"+_,i+="  "+e.validate(p)+" ",p.baseId=m,i+=" "+l+" = "+l+" || "+v+"; if (!"+l+") { ",h+="}";e.compositeRule=p.compositeRule=g,i+=" "+h+" if (!"+l+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } "),i=e.util.cleanUpCode(i)}else u&&(i+=" if (true) { ");return i}},"./node_modules/ajv/lib/dotjs/comment.js":function(e,t,r){"use strict";e.exports=function generate_comment(e,t,r){var i=" ",o=e.schema[t],n=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?i+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+s+", "+e.util.toQuotedString(n)+", validate.root.schema);"),i}},"./node_modules/ajv/lib/dotjs/const.js":function(e,t,r){"use strict";e.exports=function generate_const(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f=e.opts.$data&&s&&s.$data;f&&(i+=" var schema"+o+" = "+e.util.getData(s.$data,n,e.dataPathArr)+"; "),f||(i+=" var schema"+o+" = validate.schema"+a+";"),i+="var "+l+" = equal("+d+", schema"+o+"); if (!"+l+") {   ";var p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var h=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+h+"]); ":i+=" validate.errors = ["+h+"]; return false; ":i+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}},"./node_modules/ajv/lib/dotjs/contains.js":function(e,t,r){"use strict";e.exports=function generate_contains(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f="errs__"+o,p=e.util.copy(e);p.level++;var h="valid"+p.level,v="i"+o,m=p.dataLevel=e.dataLevel+1,g="data"+m,y=e.baseId,b=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all);if(i+="var "+f+" = errors;var "+l+";",b){var _=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=a,p.errSchemaPath=c,i+=" var "+h+" = false; for (var "+v+" = 0; "+v+" < "+d+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var S=d+"["+v+"]";p.dataPathArr[m]=v;var w=e.validate(p);p.baseId=y,e.util.varOccurences(w,g)<2?i+=" "+e.util.varReplace(w,g,S)+" ":i+=" var "+g+" = "+S+"; "+w+" ",i+=" if ("+h+") break; }  ",e.compositeRule=p.compositeRule=_,i+="  if (!"+h+") {"}else i+=" if ("+d+".length == 0) {";var C=C||[];C.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;return i=C.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",b&&(i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/custom.js":function(e,t,r){"use strict";e.exports=function generate_custom(e,t,r){var i,o,n=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),d=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,f="data"+(a||""),p="valid"+s,h="errs__"+s,v=e.opts.$data&&c&&c.$data;v?(n+=" var schema"+s+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",o="schema"+s):o=c;var m,g,y,b,_,S="definition"+s,w=this.definition,C="";if(v&&w.$data){_="keywordValidate"+s;var E=w.validateSchema;n+=" var "+S+" = RULES.custom['"+t+"'].definition; var "+_+" = "+S+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+u,_=b.code,m=w.compile,g=w.inline,y=w.macro}var P=_+".errors",M="i"+s,x="ruleErr"+s,D=w.async;if(D&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(n+=P+" = null;"),n+="var "+h+" = errors;var "+p+";",v&&w.$data&&(C+="}",n+=" if ("+o+" === undefined) { "+p+" = true; } else { ",E&&(C+="}",n+=" "+p+" = "+S+".validateSchema("+o+"); if ("+p+") { ")),g)w.statements?n+=" "+b.validate+" ":n+=" "+p+" = "+b.validate+"; ";else if(y){var I=e.util.copy(e);C="";I.level++;var j="valid"+I.level;I.schema=b.validate,I.schemaPath="";var O=e.compositeRule;e.compositeRule=I.compositeRule=!0;var B=e.validate(I).replace(/validate\.schema/g,_);e.compositeRule=I.compositeRule=O,n+=" "+B}else{(R=R||[]).push(n),n="",n+="  "+_+".call( ",e.opts.passContext?n+="this":n+="self",m||!1===w.schema?n+=" , "+f+" ":n+=" , "+o+" , "+f+" , validate.schema"+e.schemaPath+" ",n+=" , (dataPath || '')",'""'!=e.errorPath&&(n+=" + "+e.errorPath);var L=a?"data"+(a-1||""):"parentData",T=a?e.dataPathArr[a]:"parentDataProperty",A=n+=" , "+L+" , "+T+" , rootData )  ";n=R.pop(),!1===w.errors?(n+=" "+p+" = ",D&&(n+="await "),n+=A+"; "):n+=D?" var "+(P="customErrors"+s)+" = null; try { "+p+" = await "+A+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+p+" = "+A+"; "}if(w.modifying&&(n+=" if ("+L+") "+f+" = "+L+"["+T+"];"),n+=""+C,w.valid)l&&(n+=" if (true) { ");else{var R;n+=" if ( ",void 0===w.valid?(n+=" !",n+=y?""+j:""+p):n+=" "+!w.valid+" ",n+=") { ",i=this.keyword,(R=R||[]).push(n),n="",(R=R||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var V=n;n=R.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+V+"]); ":n+=" validate.errors = ["+V+"]; return false; ":n+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var F=n;n=R.pop(),g?w.errors?"full"!=w.errors&&(n+="  for (var "+M+"="+h+"; "+M+"<errors; "+M+"++) { var "+x+" = vErrors["+M+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(n+=" "+x+".schema = "+o+"; "+x+".data = "+f+"; "),n+=" } "):!1===w.errors?n+=" "+F+" ":(n+=" if ("+h+" == errors) { "+F+" } else {  for (var "+M+"="+h+"; "+M+"<errors; "+M+"++) { var "+x+" = vErrors["+M+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+x+".schemaPath === undefined) { "+x+'.schemaPath = "'+d+'"; } ',e.opts.verbose&&(n+=" "+x+".schema = "+o+"; "+x+".data = "+f+"; "),n+=" } } "):y?(n+="   var err =   ",!1!==e.createErrors?(n+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(n+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; ")):!1===w.errors?n+=" "+F+" ":(n+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+M+"="+h+"; "+M+"<errors; "+M+"++) { var "+x+" = vErrors["+M+"]; if ("+x+".dataPath === undefined) "+x+".dataPath = (dataPath || '') + "+e.errorPath+";  "+x+'.schemaPath = "'+d+'";  ',e.opts.verbose&&(n+=" "+x+".schema = "+o+"; "+x+".data = "+f+"; "),n+=" } } else { "+F+" } "),n+=" } ",l&&(n+=" else { ")}return n}},"./node_modules/ajv/lib/dotjs/dependencies.js":function(e,t,r){"use strict";e.exports=function generate_dependencies(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="errs__"+o,f=e.util.copy(e),p="";f.level++;var h="valid"+f.level,v={},m={},g=e.opts.ownProperties;for(S in s){var y=s[S],b=Array.isArray(y)?m:v;b[S]=y}i+="var "+l+" = errors;";var _=e.errorPath;for(var S in i+="var missing"+o+";",m)if((b=m[S]).length){if(i+=" if ( "+d+e.util.getProperty(S)+" !== undefined ",g&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),u){i+=" && ( ";var w=b;if(w)for(var C=-1,E=w.length-1;C<E;){j=w[C+=1],C&&(i+=" || "),i+=" ( ( "+(T=d+(L=e.util.getProperty(j)))+" === undefined ",g&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(j)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:L)+") ) "}i+=")) {  ";var P="missing"+o,M="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,P,!0):_+" + "+P);var x=x||[];x.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+M+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var D=i;i=x.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+D+"]); ":i+=" validate.errors = ["+D+"]; return false; ":i+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var I=b;if(I)for(var j,O=-1,B=I.length-1;O<B;){j=I[O+=1];var L=e.util.getProperty(j),T=(M=e.util.escapeQuotes(j),d+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,j,e.opts.jsonPointers)),i+=" if ( "+T+" === undefined ",g&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(j)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(S)+"', missingProperty: '"+M+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==b.length?i+="property "+e.util.escapeQuotes(b[0]):i+="properties "+e.util.escapeQuotes(b.join(", ")),i+=" when property "+e.util.escapeQuotes(S)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",u&&(p+="}",i+=" else { ")}e.errorPath=_;var A=f.baseId;for(var S in v){y=v[S];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(i+=" "+h+" = true; if ( "+d+e.util.getProperty(S)+" !== undefined ",g&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),i+=") { ",f.schema=y,f.schemaPath=a+e.util.getProperty(S),f.errSchemaPath=c+"/"+e.util.escapeFragment(S),i+="  "+e.validate(f)+" ",f.baseId=A,i+=" }  ",u&&(i+=" if ("+h+") { ",p+="}"))}return u&&(i+="   "+p+" if ("+l+" == errors) {"),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/enum.js":function(e,t,r){"use strict";e.exports=function generate_enum(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f=e.opts.$data&&s&&s.$data;f&&(i+=" var schema"+o+" = "+e.util.getData(s.$data,n,e.dataPathArr)+"; ");var p="i"+o,h="schema"+o;f||(i+=" var "+h+" = validate.schema"+a+";"),i+="var "+l+";",f&&(i+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),i+=l+" = false;for (var "+p+"=0; "+p+"<"+h+".length; "+p+"++) if (equal("+d+", "+h+"["+p+"])) { "+l+" = true; break; }",f&&(i+="  }  "),i+=" if (!"+l+") {   ";var v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;return i=v.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}},"./node_modules/ajv/lib/dotjs/format.js":function(e,t,r){"use strict";e.exports=function generate_format(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||"");if(!1===e.opts.format)return u&&(i+=" if (true) { "),i;var l,f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,n,e.dataPathArr)+"; ",l="schema"+o):l=s;var p=e.opts.unknownFormats,h=Array.isArray(p);if(f){i+=" var "+(v="format"+o)+" = formats["+l+"]; var "+(m="isObject"+o)+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+(g="formatType"+o)+" = "+m+" && "+v+".type || 'string'; if ("+m+") { ",e.async&&(i+=" var async"+o+" = "+v+".async; "),i+=" "+v+" = "+v+".validate; } if (  ",f&&(i+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),i+=" (","ignore"!=p&&(i+=" ("+l+" && !"+v+" ",h&&(i+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),i+=") || "),i+=" ("+v+" && "+g+" == '"+r+"' && !(typeof "+v+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+v+"("+d+") : "+v+"("+d+")) ":i+=" "+v+"("+d+") ",i+=" : "+v+".test("+d+"))))) {"}else{var v;if(!(v=e.formats[s])){if("ignore"==p)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(i+=" if (true) { "),i;if(h&&p.indexOf(s)>=0)return u&&(i+=" if (true) { "),i;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var m,g=(m="object"==typeof v&&!(v instanceof RegExp)&&v.validate)&&v.type||"string";if(m){var y=!0===v.async;v=v.validate}if(g!=r)return u&&(i+=" if (true) { "),i;if(y){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(b="formats"+e.util.getProperty(s)+".validate")+"("+d+"))) { "}else{i+=" if (! ";var b="formats"+e.util.getProperty(s);m&&(b+=".validate"),i+="function"==typeof v?" "+b+"("+d+") ":" "+b+".test("+d+") ",i+=") { "}}var _=_||[];_.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",i+=f?""+l:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=f?"' + "+l+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+a:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var S=i;return i=_.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}},"./node_modules/ajv/lib/dotjs/if.js":function(e,t,r){"use strict";e.exports=function generate_if(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f="errs__"+o,p=e.util.copy(e);p.level++;var h="valid"+p.level,v=e.schema.then,m=e.schema.else,g=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),b=p.baseId;if(g||y){var _;p.createErrors=!1,p.schema=s,p.schemaPath=a,p.errSchemaPath=c,i+=" var "+f+" = errors; var "+l+" = true;  ";var S=e.compositeRule;e.compositeRule=p.compositeRule=!0,i+="  "+e.validate(p)+" ",p.baseId=b,p.createErrors=!0,i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=S,g?(i+=" if ("+h+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(p)+" ",p.baseId=b,i+=" "+l+" = "+h+"; ",g&&y?i+=" var "+(_="ifClause"+o)+" = 'then'; ":_="'then'",i+=" } ",y&&(i+=" else { ")):i+=" if (!"+h+") { ",y&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(p)+" ",p.baseId=b,i+=" "+l+" = "+h+"; ",g&&y?i+=" var "+(_="ifClause"+o)+" = 'else'; ":_="'else'",i+=" } "),i+=" if (!"+l+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",u&&(i+=" else { "),i=e.util.cleanUpCode(i)}else u&&(i+=" if (true) { ");return i}},"./node_modules/ajv/lib/dotjs/index.js":function(e,t,r){"use strict";e.exports={$ref:r("./node_modules/ajv/lib/dotjs/ref.js"),allOf:r("./node_modules/ajv/lib/dotjs/allOf.js"),anyOf:r("./node_modules/ajv/lib/dotjs/anyOf.js"),$comment:r("./node_modules/ajv/lib/dotjs/comment.js"),const:r("./node_modules/ajv/lib/dotjs/const.js"),contains:r("./node_modules/ajv/lib/dotjs/contains.js"),dependencies:r("./node_modules/ajv/lib/dotjs/dependencies.js"),enum:r("./node_modules/ajv/lib/dotjs/enum.js"),format:r("./node_modules/ajv/lib/dotjs/format.js"),if:r("./node_modules/ajv/lib/dotjs/if.js"),items:r("./node_modules/ajv/lib/dotjs/items.js"),maximum:r("./node_modules/ajv/lib/dotjs/_limit.js"),minimum:r("./node_modules/ajv/lib/dotjs/_limit.js"),maxItems:r("./node_modules/ajv/lib/dotjs/_limitItems.js"),minItems:r("./node_modules/ajv/lib/dotjs/_limitItems.js"),maxLength:r("./node_modules/ajv/lib/dotjs/_limitLength.js"),minLength:r("./node_modules/ajv/lib/dotjs/_limitLength.js"),maxProperties:r("./node_modules/ajv/lib/dotjs/_limitProperties.js"),minProperties:r("./node_modules/ajv/lib/dotjs/_limitProperties.js"),multipleOf:r("./node_modules/ajv/lib/dotjs/multipleOf.js"),not:r("./node_modules/ajv/lib/dotjs/not.js"),oneOf:r("./node_modules/ajv/lib/dotjs/oneOf.js"),pattern:r("./node_modules/ajv/lib/dotjs/pattern.js"),properties:r("./node_modules/ajv/lib/dotjs/properties.js"),propertyNames:r("./node_modules/ajv/lib/dotjs/propertyNames.js"),required:r("./node_modules/ajv/lib/dotjs/required.js"),uniqueItems:r("./node_modules/ajv/lib/dotjs/uniqueItems.js"),validate:r("./node_modules/ajv/lib/dotjs/validate.js")}},"./node_modules/ajv/lib/dotjs/items.js":function(e,t,r){"use strict";e.exports=function generate_items(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f="errs__"+o,p=e.util.copy(e),h="";p.level++;var v="valid"+p.level,m="i"+o,g=p.dataLevel=e.dataLevel+1,y="data"+g,b=e.baseId;if(i+="var "+f+" = errors;var "+l+";",Array.isArray(s)){var _=e.schema.additionalItems;if(!1===_){i+=" "+l+" = "+d+".length <= "+s.length+"; ";var S=c;c=e.errSchemaPath+"/additionalItems",i+="  if (!"+l+") {   ";var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var C=i;i=w.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+C+"]); ":i+=" validate.errors = ["+C+"]; return false; ":i+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=S,u&&(h+="}",i+=" else { ")}var E=s;if(E)for(var P,M=-1,x=E.length-1;M<x;)if(P=E[M+=1],e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all)){i+=" "+v+" = true; if ("+d+".length > "+M+") { ";var D=d+"["+M+"]";p.schema=P,p.schemaPath=a+"["+M+"]",p.errSchemaPath=c+"/"+M,p.errorPath=e.util.getPathExpr(e.errorPath,M,e.opts.jsonPointers,!0),p.dataPathArr[g]=M;var I=e.validate(p);p.baseId=b,e.util.varOccurences(I,y)<2?i+=" "+e.util.varReplace(I,y,D)+" ":i+=" var "+y+" = "+D+"; "+I+" ",i+=" }  ",u&&(i+=" if ("+v+") { ",h+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))){p.schema=_,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+v+" = true; if ("+d+".length > "+s.length+") {  for (var "+m+" = "+s.length+"; "+m+" < "+d+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);D=d+"["+m+"]";p.dataPathArr[g]=m;I=e.validate(p);p.baseId=b,e.util.varOccurences(I,y)<2?i+=" "+e.util.varReplace(I,y,D)+" ":i+=" var "+y+" = "+D+"; "+I+" ",u&&(i+=" if (!"+v+") break; "),i+=" } }  ",u&&(i+=" if ("+v+") { ",h+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){p.schema=s,p.schemaPath=a,p.errSchemaPath=c,i+="  for (var "+m+" = 0; "+m+" < "+d+".length; "+m+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);D=d+"["+m+"]";p.dataPathArr[g]=m;I=e.validate(p);p.baseId=b,e.util.varOccurences(I,y)<2?i+=" "+e.util.varReplace(I,y,D)+" ":i+=" var "+y+" = "+D+"; "+I+" ",u&&(i+=" if (!"+v+") break; "),i+=" }"}return u&&(i+=" "+h+" if ("+f+" == errors) {"),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/multipleOf.js":function(e,t,r){"use strict";e.exports=function generate_multipleOf(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a,o+="var division"+n+";if (",f&&(o+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),o+=" (division"+n+" = "+l+" / "+i+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+n+") - division"+n+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+n+" !== parseInt(division"+n+") ",o+=" ) ",f&&(o+="  )  "),o+=" ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=f?"' + "+i:i+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var h=o;return o=p.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+h+"]); ":o+=" validate.errors = ["+h+"]; return false; ":o+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/not.js":function(e,t,r){"use strict";e.exports=function generate_not(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="errs__"+o,f=e.util.copy(e);f.level++;var p="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=c,i+=" var "+l+" = errors;  ";var h,v=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(h=f.opts.allErrors,f.opts.allErrors=!1),i+=" "+e.validate(f)+" ",f.createErrors=!0,h&&(f.opts.allErrors=h),e.compositeRule=f.compositeRule=v,i+=" if ("+p+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;i=m.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ");return i}},"./node_modules/ajv/lib/dotjs/oneOf.js":function(e,t,r){"use strict";e.exports=function generate_oneOf(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f="errs__"+o,p=e.util.copy(e),h="";p.level++;var v="valid"+p.level,m=p.baseId,g="prevValid"+o,y="passingSchemas"+o;i+="var "+f+" = errors , "+g+" = false , "+l+" = false , "+y+" = null; ";var b=e.compositeRule;e.compositeRule=p.compositeRule=!0;var _=s;if(_)for(var S,w=-1,C=_.length-1;w<C;)S=_[w+=1],(e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0:e.util.schemaHasRules(S,e.RULES.all))?(p.schema=S,p.schemaPath=a+"["+w+"]",p.errSchemaPath=c+"/"+w,i+="  "+e.validate(p)+" ",p.baseId=m):i+=" var "+v+" = true; ",w&&(i+=" if ("+v+" && "+g+") { "+l+" = false; "+y+" = ["+y+", "+w+"]; } else { ",h+="}"),i+=" if ("+v+") { "+l+" = "+g+" = true; "+y+" = "+w+"; }";return e.compositeRule=p.compositeRule=b,i+=h+"if (!"+l+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}},"./node_modules/ajv/lib/dotjs/pattern.js":function(e,t,r){"use strict";e.exports=function generate_pattern(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f=e.opts.$data&&a&&a.$data;f?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a,o+="if ( ",f&&(o+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),o+=" !"+(f?"(new RegExp("+i+"))":e.usePattern(a))+".test("+l+") ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",o+=f?""+i:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=f?"' + "+i+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=f?"validate.schema"+c:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var h=o;return o=p.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+h+"]); ":o+=" validate.errors = ["+h+"]; return false; ":o+=" var err = "+h+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",d&&(o+=" else { "),o}},"./node_modules/ajv/lib/dotjs/properties.js":function(e,t,r){"use strict";e.exports=function generate_properties(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="errs__"+o,f=e.util.copy(e),p="";f.level++;var h="valid"+f.level,v="key"+o,m="idx"+o,g=f.dataLevel=e.dataLevel+1,y="data"+g,b="dataProperties"+o,_=Object.keys(s||{}),S=e.schema.patternProperties||{},w=Object.keys(S),C=e.schema.additionalProperties,E=_.length||w.length,P=!1===C,M="object"==typeof C&&Object.keys(C).length,x=e.opts.removeAdditional,D=P||M||x,I=e.opts.ownProperties,j=e.baseId,O=e.schema.required;if(O&&(!e.opts.$data||!O.$data)&&O.length<e.opts.loopRequired)var B=e.util.toHash(O);if(i+="var "+l+" = errors;var "+h+" = true;",I&&(i+=" var "+b+" = undefined;"),D){if(i+=I?" "+b+" = "+b+" || Object.keys("+d+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+v+" = "+b+"["+m+"]; ":" for (var "+v+" in "+d+") { ",E){if(i+=" var isAdditional"+o+" = !(false ",_.length)if(_.length>8)i+=" || validate.schema"+a+".hasOwnProperty("+v+") ";else{var L=_;if(L)for(var T=-1,A=L.length-1;T<A;)K=L[T+=1],i+=" || "+v+" == "+e.util.toQuotedString(K)+" "}if(w.length){var R=w;if(R)for(var V=-1,F=R.length-1;V<F;)oe=R[V+=1],i+=" || "+e.usePattern(oe)+".test("+v+") "}i+=" ); if (isAdditional"+o+") { "}if("all"==x)i+=" delete "+d+"["+v+"]; ";else{var k=e.errorPath,$="' + "+v+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers)),P)if(x)i+=" delete "+d+"["+v+"]; ";else{i+=" "+h+" = false; ";var N=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+$+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var U=i;i=te.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=N,u&&(i+=" break; ")}else if(M)if("failing"==x){i+=" var "+l+" = errors;  ";var W=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=C,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);var z=d+"["+v+"]";f.dataPathArr[g]=v;var H=e.validate(f);f.baseId=j,e.util.varOccurences(H,y)<2?i+=" "+e.util.varReplace(H,y,z)+" ":i+=" var "+y+" = "+z+"; "+H+" ",i+=" if (!"+h+") { errors = "+l+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+v+"]; }  ",e.compositeRule=f.compositeRule=W}else{f.schema=C,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);z=d+"["+v+"]";f.dataPathArr[g]=v;H=e.validate(f);f.baseId=j,e.util.varOccurences(H,y)<2?i+=" "+e.util.varReplace(H,y,z)+" ":i+=" var "+y+" = "+z+"; "+H+" ",u&&(i+=" if (!"+h+") break; ")}e.errorPath=k}E&&(i+=" } "),i+=" }  ",u&&(i+=" if ("+h+") { ",p+="}")}var q=e.opts.useDefaults&&!e.compositeRule;if(_.length){var G=_;if(G)for(var K,Q=-1,Y=G.length-1;Q<Y;){var J=s[K=G[Q+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all)){var Z=e.util.getProperty(K),X=(z=d+Z,q&&void 0!==J.default);f.schema=J,f.schemaPath=a+Z,f.errSchemaPath=c+"/"+e.util.escapeFragment(K),f.errorPath=e.util.getPath(e.errorPath,K,e.opts.jsonPointers),f.dataPathArr[g]=e.util.toQuotedString(K);H=e.validate(f);if(f.baseId=j,e.util.varOccurences(H,y)<2){H=e.util.varReplace(H,y,z);var ee=z}else{ee=y;i+=" var "+y+" = "+z+"; "}if(X)i+=" "+H+" ";else{if(B&&B[K]){i+=" if ( "+ee+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(K)+"') "),i+=") { "+h+" = false; ";k=e.errorPath,N=c;var te,re=e.util.escapeQuotes(K);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(k,K,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+re+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";U=i;i=te.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+U+"]); ":i+=" validate.errors = ["+U+"]; return false; ":i+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=N,e.errorPath=k,i+=" } else { "}else u?(i+=" if ( "+ee+" === undefined ",I&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(K)+"') "),i+=") { "+h+" = true; } else { "):(i+=" if ("+ee+" !== undefined ",I&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(K)+"') "),i+=" ) { ");i+=" "+H+" } "}}u&&(i+=" if ("+h+") { ",p+="}")}}if(w.length){var ie=w;if(ie)for(var oe,ne=-1,se=ie.length-1;ne<se;){J=S[oe=ie[ne+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0:e.util.schemaHasRules(J,e.RULES.all)){f.schema=J,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),i+=I?" "+b+" = "+b+" || Object.keys("+d+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+v+" = "+b+"["+m+"]; ":" for (var "+v+" in "+d+") { ",i+=" if ("+e.usePattern(oe)+".test("+v+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers);z=d+"["+v+"]";f.dataPathArr[g]=v;H=e.validate(f);f.baseId=j,e.util.varOccurences(H,y)<2?i+=" "+e.util.varReplace(H,y,z)+" ":i+=" var "+y+" = "+z+"; "+H+" ",u&&(i+=" if (!"+h+") break; "),i+=" } ",u&&(i+=" else "+h+" = true; "),i+=" }  ",u&&(i+=" if ("+h+") { ",p+="}")}}}return u&&(i+=" "+p+" if ("+l+" == errors) {"),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/propertyNames.js":function(e,t,r){"use strict";e.exports=function generate_propertyNames(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="errs__"+o,f=e.util.copy(e);f.level++;var p="valid"+f.level;if(i+="var "+l+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){f.schema=s,f.schemaPath=a,f.errSchemaPath=c;var h="key"+o,v="idx"+o,m="i"+o,g="' + "+h+" + '",y="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+o,_=e.opts.ownProperties,S=e.baseId;_&&(i+=" var "+b+" = undefined; "),i+=_?" "+b+" = "+b+" || Object.keys("+d+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+h+" = "+b+"["+v+"]; ":" for (var "+h+" in "+d+") { ",i+=" var startErrs"+o+" = errors; ";var w=h,C=e.compositeRule;e.compositeRule=f.compositeRule=!0;var E=e.validate(f);f.baseId=S,e.util.varOccurences(E,y)<2?i+=" "+e.util.varReplace(E,y,w)+" ":i+=" var "+y+" = "+w+"; "+E+" ",e.compositeRule=f.compositeRule=C,i+=" if (!"+p+") { for (var "+m+"=startErrs"+o+"; "+m+"<errors; "+m+"++) { vErrors["+m+"].propertyName = "+h+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),u&&(i+=" break; "),i+=" } }"}return u&&(i+="  if ("+l+" == errors) {"),i=e.util.cleanUpCode(i)}},"./node_modules/ajv/lib/dotjs/ref.js":function(e,t,r){"use strict";e.exports=function generate_ref(e,t,r){var i,o,n=" ",s=e.level,a=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(a||""),f="valid"+s;if("#"==c||"#/"==c)e.isRoot?(i=e.async,o="validate"):(i=!0===e.root.schema.$async,o="root.refVal[0]");else{var p=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===p){var h=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(h),(y=y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(n+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),n+=" } "):n+=" {} ";var v=n;n=y.pop(),!e.compositeRule&&d?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(n+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,h);e.logger.warn(h),d&&(n+=" if (true) { ")}}else if(p.inline){var m=e.util.copy(e);m.level++;var g="valid"+m.level;m.schema=p.schema,m.schemaPath="",m.errSchemaPath=c,n+=" "+e.validate(m).replace(/validate\.schema/g,p.code)+" ",d&&(n+=" if ("+g+") { ")}else i=!0===p.$async||e.async&&!1!==p.$async,o=p.code}if(o){var y;(y=y||[]).push(n),n="",e.opts.passContext?n+=" "+o+".call(this, ":n+=" "+o+"( ",n+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(n+=" + "+e.errorPath);var b=n+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(n=y.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");d&&(n+=" var "+f+"; "),n+=" try { await "+b+"; ",d&&(n+=" "+f+" = true; "),n+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(n+=" "+f+" = false; "),n+=" } ",d&&(n+=" if ("+f+") { ")}else n+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",d&&(n+=" else { ")}return n}},"./node_modules/ajv/lib/dotjs/required.js":function(e,t,r){"use strict";e.exports=function generate_required(e,t,r){var i=" ",o=e.level,n=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(n||""),l="valid"+o,f=e.opts.$data&&s&&s.$data;f&&(i+=" var schema"+o+" = "+e.util.getData(s.$data,n,e.dataPathArr)+"; ");var p="schema"+o;if(!f)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var h=[],v=s;if(v)for(var m,g=-1,y=v.length-1;g<y;){m=v[g+=1];var b=e.schema.properties[m];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(h[h.length]=m)}}else h=s;if(f||h.length){var _=e.errorPath,S=f||h.length>=e.opts.loopRequired,w=e.opts.ownProperties;if(u)if(i+=" var missing"+o+"; ",S){f||(i+=" var "+p+" = validate.schema"+a+"; ");var C="' + "+(I="schema"+o+"["+(M="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),i+=" var "+l+" = true; ",f&&(i+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),i+=" for (var "+M+" = 0; "+M+" < "+p+".length; "+M+"++) { "+l+" = "+d+"["+p+"["+M+"]] !== undefined ",w&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+p+"["+M+"]) "),i+="; if (!"+l+") break; } ",f&&(i+="  }  "),i+="  if (!"+l+") {   ",(D=D||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;i=D.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var P=h;if(P)for(var M=-1,x=P.length-1;M<x;){O=P[M+=1],M&&(i+=" || "),i+=" ( ( "+(A=d+(T=e.util.getProperty(O)))+" === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(O)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?O:T)+") ) "}i+=") {  ";var D;C="' + "+(I="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,I,!0):_+" + "+I),(D=D||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";E=i;i=D.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(S){f||(i+=" var "+p+" = validate.schema"+a+"; ");var I;C="' + "+(I="schema"+o+"["+(M="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,I,e.opts.jsonPointers)),f&&(i+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),i+=" for (var "+M+" = 0; "+M+" < "+p+".length; "+M+"++) { if ("+d+"["+p+"["+M+"]] === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+p+"["+M+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(i+="  }  ")}else{var j=h;if(j)for(var O,B=-1,L=j.length-1;B<L;){O=j[B+=1];var T=e.util.getProperty(O),A=(C=e.util.escapeQuotes(O),d+T);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,O,e.opts.jsonPointers)),i+=" if ( "+A+" === undefined ",w&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(O)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+C+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else u&&(i+=" if (true) {");return i}},"./node_modules/ajv/lib/dotjs/uniqueItems.js":function(e,t,r){"use strict";e.exports=function generate_uniqueItems(e,t,r){var i,o=" ",n=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,l="data"+(s||""),f="valid"+n,p=e.opts.$data&&a&&a.$data;if(p?(o+=" var schema"+n+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",i="schema"+n):i=a,(a||p)&&!1!==e.opts.uniqueItems){p&&(o+=" var "+f+"; if ("+i+" === false || "+i+" === undefined) "+f+" = true; else if (typeof "+i+" != 'boolean') "+f+" = false; else { "),o+=" var i = "+l+".length , "+f+" = true , j; if (i > 1) { ";var h=e.schema.items&&e.schema.items.type,v=Array.isArray(h);if(!h||"object"==h||"array"==h||v&&(h.indexOf("object")>=0||h.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+f+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+l+"[i]; ";var m="checkDataType"+(v?"s":"");o+=" if ("+e.util[m](h,"item",!0)+") continue; ",v&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",p&&(o+="  }  "),o+=" if (!"+f+") {   ";var g=g||[];g.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=p?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var y=o;o=g.pop(),!e.compositeRule&&d?e.async?o+=" throw new ValidationError(["+y+"]); ":o+=" validate.errors = ["+y+"]; return false; ":o+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",d&&(o+=" else { ")}else d&&(o+=" if (true) { ");return o}},"./node_modules/ajv/lib/dotjs/validate.js":function(e,t,r){"use strict";e.exports=function generate_validate(e,t,r){var i="",o=!0===e.schema.$async,n=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!n&&!e.schema.$ref){var u=e.level,d=e.dataLevel,l=e.schema["false schema"],f=e.schemaPath+e.util.getProperty("false schema"),p=e.errSchemaPath+"/false schema",h=!e.opts.allErrors,v="data"+(d||""),m="valid"+u;if(!1===e.schema){e.isTop?h=!0:i+=" var "+m+" = false; ",(J=J||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";var g=i;i=J.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i+=o?" return data; ":" validate.errors = null; return true; ":i+=" var "+m+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var y=e.isTop;u=e.level=0,d=e.dataLevel=0,v="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{u=e.level,v="data"+((d=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+u+" = errors;"}m="valid"+u,h=!e.opts.allErrors;var _="",S="",w=e.schema.type,C=Array.isArray(w);if(w&&e.opts.nullable&&!0===e.schema.nullable&&(C?-1==w.indexOf("null")&&(w=w.concat("null")):"null"!=w&&(w=[w,"null"],C=!0)),C&&1==w.length&&(w=w[0],C=!1),e.schema.$ref&&n){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(n=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),w){if(e.opts.coerceTypes)var E=e.util.coerceToTypes(e.opts.coerceTypes,w);var P=e.RULES.types[w];if(E||C||!0===P||P&&!$shouldUseGroup(P)){f=e.schemaPath+".type",p=e.errSchemaPath+"/type",f=e.schemaPath+".type",p=e.errSchemaPath+"/type";var M=C?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[M](w,v,!0)+") { ",E){var x="dataType"+u,D="coerced"+u;i+=" var "+x+" = typeof "+v+"; ","array"==e.opts.coerceTypes&&(i+=" if ("+x+" == 'object' && Array.isArray("+v+")) "+x+" = 'array'; "),i+=" var "+D+" = undefined; ";var I="",j=E;if(j)for(var O,B=-1,L=j.length-1;B<L;)O=j[B+=1],B&&(i+=" if ("+D+" === undefined) { ",I+="}"),"array"==e.opts.coerceTypes&&"array"!=O&&(i+=" if ("+x+" == 'array' && "+v+".length == 1) { "+D+" = "+v+" = "+v+"[0]; "+x+" = typeof "+v+";  } "),"string"==O?i+=" if ("+x+" == 'number' || "+x+" == 'boolean') "+D+" = '' + "+v+"; else if ("+v+" === null) "+D+" = ''; ":"number"==O||"integer"==O?(i+=" if ("+x+" == 'boolean' || "+v+" === null || ("+x+" == 'string' && "+v+" && "+v+" == +"+v+" ","integer"==O&&(i+=" && !("+v+" % 1)"),i+=")) "+D+" = +"+v+"; "):"boolean"==O?i+=" if ("+v+" === 'false' || "+v+" === 0 || "+v+" === null) "+D+" = false; else if ("+v+" === 'true' || "+v+" === 1) "+D+" = true; ":"null"==O?i+=" if ("+v+" === '' || "+v+" === 0 || "+v+" === false) "+D+" = null; ":"array"==e.opts.coerceTypes&&"array"==O&&(i+=" if ("+x+" == 'string' || "+x+" == 'number' || "+x+" == 'boolean' || "+v+" == null) "+D+" = ["+v+"]; ");i+=" "+I+" if ("+D+" === undefined) {   ",(J=J||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=C?""+w.join(","):""+w,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=C?""+w.join(","):""+w,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=J.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  ";var T=d?"data"+(d-1||""):"parentData";i+=" "+v+" = "+D+"; ",d||(i+="if ("+T+" !== undefined)"),i+=" "+T+"["+(d?e.dataPathArr[d]:"parentDataProperty")+"] = "+D+"; } "}else{(J=J||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=C?""+w.join(","):""+w,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=C?""+w.join(","):""+w,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=J.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!n)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",h&&(i+=" } if (errors === ",i+=y?"0":"errs_"+u,i+=") { ",S+="}");else{var A=e.RULES;if(A)for(var R=-1,V=A.length-1;R<V;)if($shouldUseGroup(P=A[R+=1])){if(P.type&&(i+=" if ("+e.util.checkDataType(P.type,v)+") { "),e.opts.useDefaults)if("object"==P.type&&e.schema.properties){l=e.schema.properties;var F=Object.keys(l);if(F)for(var k,$=-1,N=F.length-1;$<N;){if(void 0!==(z=l[k=F[$+=1]]).default){var U=v+e.util.getProperty(k);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+U+" === null || "+U+" === '' "),i+=" ) "+U+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(z.default)+" ":i+=" "+JSON.stringify(z.default)+" ",i+="; "}}}else if("array"==P.type&&Array.isArray(e.schema.items)){var W=e.schema.items;if(W){B=-1;for(var z,H=W.length-1;B<H;)if(void 0!==(z=W[B+=1]).default){U=v+"["+B+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+U;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else i+=" if ("+U+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+U+" === null || "+U+" === '' "),i+=" ) "+U+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(z.default)+" ":i+=" "+JSON.stringify(z.default)+" ",i+="; "}}}var q=P.rules;if(q)for(var G,K=-1,Q=q.length-1;K<Q;)if($shouldUseRule(G=q[K+=1])){var Y=G.code(e,G.keyword,P.type);Y&&(i+=" "+Y+" ",h&&(_+="}"))}if(h&&(i+=" "+_+" ",_=""),P.type&&(i+=" } ",w&&w===P.type&&!E)){i+=" else { ";var J;f=e.schemaPath+".type",p=e.errSchemaPath+"/type";(J=J||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",i+=C?""+w.join(","):""+w,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=C?""+w.join(","):""+w,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+v+" "),i+=" } "):i+=" {} ";g=i;i=J.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}h&&(i+=" if (errors === ",i+=y?"0":"errs_"+u,i+=") { ",S+="}")}}function $shouldUseGroup(e){for(var t=e.rules,r=0;r<t.length;r++)if($shouldUseRule(t[r]))return!0}function $shouldUseRule(t){return void 0!==e.schema[t.keyword]||t.implements&&function $ruleImplementsSomeKeyword(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return h&&(i+=" "+S+" "),y?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+m+" = errors === errs_"+u+";",i=e.util.cleanUpCode(i),y&&(i=e.util.finalCleanUpCode(i,o)),i}},"./node_modules/ajv/lib/keyword.js":function(e,t,r){"use strict";var i=/^[a-z_$][a-z0-9_$-]*$/i,o=r("./node_modules/ajv/lib/dotjs/custom.js"),n=r("./node_modules/ajv/lib/definition_schema.js");e.exports={add:function addKeyword(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!i.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var n=t.type;if(Array.isArray(n))for(var s=0;s<n.length;s++)_addRule(e,n[s],t);else _addRule(e,n,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function _addRule(e,t,i){for(var n,s=0;s<r.length;s++){var a=r[s];if(a.type==t){n=a;break}}n||(n={type:t,rules:[]},r.push(n));var c={keyword:e,definition:i,custom:!0,code:o,implements:i.implements};n.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function getKeyword(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function removeKeyword(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,o=0;o<i.length;o++)if(i[o].keyword==e){i.splice(o,1);break}return this},validate:function validateKeyword(e,t){validateKeyword.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(n,!0);if(r(e))return!0;if(validateKeyword.errors=r.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}}},"./node_modules/ajv/lib/refs/data.json":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},"./node_modules/ajv/lib/refs/json-schema-draft-06.json":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},"./node_modules/ajv/lib/refs/json-schema-draft-07.json":function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},"./node_modules/fast-deep-equal/index.js":function(e,t,r){"use strict";var i=Array.isArray,o=Object.keys,n=Object.prototype.hasOwnProperty;e.exports=function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,s,a,c=i(e),u=i(t);if(c&&u){if((s=e.length)!=t.length)return!1;for(r=s;0!=r--;)if(!equal(e[r],t[r]))return!1;return!0}if(c!=u)return!1;var d=e instanceof Date,l=t instanceof Date;if(d!=l)return!1;if(d&&l)return e.getTime()==t.getTime();var f=e instanceof RegExp,p=t instanceof RegExp;if(f!=p)return!1;if(f&&p)return e.toString()==t.toString();var h=o(e);if((s=h.length)!==o(t).length)return!1;for(r=s;0!=r--;)if(!n.call(t,h[r]))return!1;for(r=s;0!=r--;)if(!equal(e[a=h[r]],t[a]))return!1;return!0}return e!=e&&t!=t}},"./node_modules/json-schema-traverse/index.js":function(e,t,r){"use strict";var i=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function _traverse(e,t,r,o,n,s,a,c,u,d){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var l in t(o,n,s,a,c,u,d),o){var f=o[l];if(Array.isArray(f)){if(l in i.arrayKeywords)for(var p=0;p<f.length;p++)_traverse(e,t,r,f[p],n+"/"+l+"/"+p,s,n,l,o,p)}else if(l in i.propsKeywords){if(f&&"object"==typeof f)for(var h in f)_traverse(e,t,r,f[h],n+"/"+l+"/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),s,n,l,o,h)}else(l in i.keywords||e.allKeys&&!(l in i.skipKeywords))&&_traverse(e,t,r,f,n+"/"+l,s,n,l,o)}r(o,n,s,a,c,u,d)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},"./src/client/ButtplugBrowserWebsocketClientConnector.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugBrowserWebsocketClientConnector=void 0;const o=r("./src/core/MessageUtils.ts"),n=r("./src/utils/ButtplugMessageSorter.ts"),s=r("./src/utils/ButtplugBrowserWebsocketConnector.ts");class ButtplugBrowserWebsocketClientConnector extends s.ButtplugBrowserWebsocketConnector{constructor(e){super(e),this._sorter=new n.ButtplugMessageSorter(!0),this.Send=e=>i(this,void 0,void 0,(function*(){if(!this.Connected)throw new Error("ButtplugClient not connected");const t=this._sorter.PrepareOutgoingMessage(e);return this.SendMessage(e),yield t})),this.ParseIncomingMessage=e=>{if("string"==typeof e.data){const t=o.FromJSON(e.data),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}else if(e.data instanceof Blob){const t=new FileReader;t.addEventListener("load",e=>{this.OnReaderLoad(e)}),t.readAsText(e.data)}}}get Connected(){return void 0!==this._ws}OnReaderLoad(e){const t=o.FromJSON(e.target.result),r=this._sorter.ParseIncomingMessages(t);this.emit("message",r)}}t.ButtplugBrowserWebsocketClientConnector=ButtplugBrowserWebsocketClientConnector},"./src/client/ButtplugClientConnectorException.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugClientConnectorException=void 0;const s=r("./src/core/Exceptions.ts"),a=n(r("./src/core/Messages.ts"));class ButtplugClientConnectorException extends s.ButtplugException{constructor(e){super(e,a.ErrorClass.ERROR_UNKNOWN)}}t.ButtplugClientConnectorException=ButtplugClientConnectorException},"./src/client/ButtplugClientDevice.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugClientDevice=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("../../node_modules/events/events.js");class ButtplugClientDevice extends u.EventEmitter{constructor(e,t,r,i){super(),this._index=e,this._name=t,this._sendClosure=i,this.allowedMsgs=new Map;for(const e of Object.keys(r))this.allowedMsgs.set(e,r[e])}get Name(){return this._name}get Index(){return this._index}get AllowedMessages(){return Array.from(this.allowedMsgs.keys())}get AllowedMessagesObject(){const e={};return this.allowedMsgs.forEach((t,r)=>{e[r]=t}),e}static fromMsg(e,t){return new ButtplugClientDevice(e.DeviceIndex,e.DeviceName,e.DeviceMessages,t)}CheckAllowedMessageType(e){if(-1===this.AllowedMessages.indexOf(e))throw new c.ButtplugDeviceException(`Message ${e} does not exist on device ${this._name}`)}MessageAttributes(e){return this.CheckAllowedMessageType(e),this.allowedMsgs.get(e)}SendMessageAsync(e){return s(this,void 0,void 0,(function*(){yield this._sendClosure(this,e)}))}SendVibrateCmd(e){return s(this,void 0,void 0,(function*(){let t;if(this.CheckAllowedMessageType(a.VibrateCmd.name),"number"==typeof e){const r=this.MessageAttributes(a.VibrateCmd.name).FeatureCount;t=a.VibrateCmd.Create(this._index,new Array(r).fill(e))}else{if(!Array.isArray(e))throw new c.ButtplugDeviceException("SendVibrateCmd can only take numbers or arrays of numbers.");t=a.VibrateCmd.Create(this._index,e),this.CheckGenericSubcommandList(a.SpeedSubcommand.name,t.Speeds,this.MessageAttributes(a.VibrateCmd.name).FeatureCount)}yield this.SendMessageAsync(t)}))}SendRotateCmd(e,t){return s(this,void 0,void 0,(function*(){let r;if(this.CheckAllowedMessageType(a.RotateCmd.name),"number"==typeof e){const i=this.MessageAttributes(a.RotateCmd.name).FeatureCount;r=a.RotateCmd.Create(this._index,new Array(i).fill([e,t]))}else{if(!Array.isArray(e))throw new c.ButtplugDeviceException("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");r=a.RotateCmd.Create(this._index,e),this.CheckGenericSubcommandList(a.SpeedSubcommand.name,r.Rotations,this.MessageAttributes(a.RotateCmd.name).FeatureCount)}yield this.SendMessageAsync(r)}))}SendLinearCmd(e,t){return s(this,void 0,void 0,(function*(){let r;if(this.CheckAllowedMessageType(a.LinearCmd.name),"number"==typeof e){const i=this.MessageAttributes(a.LinearCmd.name).FeatureCount;r=a.LinearCmd.Create(this._index,new Array(i).fill([e,t]))}else{if(!Array.isArray(e))throw new c.ButtplugDeviceException("SendLinearCmd can only take a number and number, or an array of number/number tuples");r=a.LinearCmd.Create(this._index,e),this.CheckGenericSubcommandList(a.SpeedSubcommand.name,r.Vectors,this.MessageAttributes(a.LinearCmd.name).FeatureCount)}yield this.SendMessageAsync(r)}))}SendFleshlightLaunchFW12Cmd(e,t){return s(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(a.FleshlightLaunchFW12Cmd.name),yield this.SendMessageAsync(new a.FleshlightLaunchFW12Cmd(e,t,this._index))}))}SendLovenseCmd(e){return s(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(a.LovenseCmd.name),yield this.SendMessageAsync(new a.LovenseCmd(e,this._index))}))}SendVorzeA10CycloneCmd(e,t){return s(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(a.VorzeA10CycloneCmd.name),yield this.SendMessageAsync(new a.VorzeA10CycloneCmd(e,t,this._index))}))}SendStopDeviceCmd(){return s(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(a.StopDeviceCmd.name),yield this.SendMessageAsync(new a.StopDeviceCmd(this._index))}))}SendKiirooCmd(e){return s(this,void 0,void 0,(function*(){this.CheckAllowedMessageType(a.KiirooCmd.name),yield this.SendMessageAsync(new a.KiirooCmd(e,this._index))}))}EmitDisconnected(){this.emit("deviceremoved")}CheckGenericSubcommandList(e,t,r){if(0===t.length||t.length>r){if(1===r)throw new c.ButtplugDeviceException(`${e} requires 1 subcommand for this device, ${t.length} present.`);throw new c.ButtplugDeviceException(`${e} requires between 1 and ${r} subcommands for this device, ${t.length} present.`)}for(const i of t)if(i.Index>=r)throw new c.ButtplugDeviceException(`Index ${i.Index} is out of bounds for ${e} for this device.`)}}t.ButtplugClientDevice=ButtplugClientDevice},"./src/client/ButtplugClientForwarder.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugClientForwarder=t.ButtplugClientForwarderBrowserWebsocketConnector=void 0;const o=r("./src/core/Messages.ts"),n=r("./src/core/Exceptions.ts"),s=r("./src/utils/Utils.ts"),a=r("./src/utils/ButtplugBrowserWebsocketConnector.ts");class ButtplugClientForwarderBrowserWebsocketConnector extends a.ButtplugBrowserWebsocketConnector{constructor(e){super(e)}SendForwardedMessage(e){return i(this,void 0,void 0,(function*(){return this.SendMessage(e),Promise.resolve()}))}}t.ButtplugClientForwarderBrowserWebsocketConnector=ButtplugClientForwarderBrowserWebsocketConnector;t.ButtplugClientForwarder=class ButtplugClientForwarder{constructor(e,t){this._devices=new Map,this.Connect=()=>i(this,void 0,void 0,(function*(){yield this._connector.Connect(),this._connector.addListener("message",e=>i(this,void 0,void 0,(function*(){for(const t of e)yield this.ReceiveDeviceCommand(t)})))})),this.Disconnect=()=>i(this,void 0,void 0,(function*(){yield this._connector.Disconnect()})),this.AddDevice=e=>i(this,void 0,void 0,(function*(){const t=this.CreateDeviceAdded(e);e.addListener("deviceremoved",()=>this.RemoveDevice(e)),yield this._connector.SendForwardedMessage(t)})),this.RemoveDevice=e=>i(this,void 0,void 0,(function*(){const t=this.CreateDeviceRemoved(e);yield this._connector.SendForwardedMessage(t)})),this.ReceiveDeviceCommand=e=>i(this,void 0,void 0,(function*(){const t=this._devices.get(e.DeviceIndex);void 0!==t&&(yield null==t?void 0:t.SendMessageAsync(e),yield this._connector.SendForwardedMessage(new o.Ok(e.Id)))})),this._clientName=e,this._connector=t}CreateDeviceAdded(e){if([...this._devices.entries()].filter(({1:t})=>t.Index===e.Index).map(([e])=>e).length>0)throw new n.ButtplugDeviceException("Device already shared with server!");let t=s.getRandomInt(34);for(;this._devices.has(t);)t=s.getRandomInt(34);return this._devices.set(t,e),new o.DeviceAdded(t,`${this._clientName} - ${e.Name}`,e.AllowedMessagesObject)}CreateDeviceRemoved(e){const t=[...this._devices.entries()].filter(({1:t})=>t.Index===e.Index).map(([e])=>e);if(1===t.length){const e=t.pop();return this._devices.delete(e),new o.DeviceRemoved(e)}throw 0===t.length?new n.ButtplugDeviceException("Device not currently shared with server!"):new n.ButtplugDeviceException("Device shared with server multiple times!")}}},"./src/client/ButtplugEmbeddedClientConnector.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugEmbeddedClientConnector=void 0;const o=r("../../node_modules/events/events.js"),n=r("./src/server/ButtplugServer.ts"),s=r("./src/client/ButtplugClientConnectorException.ts");class ButtplugEmbeddedClientConnector extends o.EventEmitter{constructor(){super(...arguments),this._connected=!1,this._server=null,this.Connect=()=>i(this,void 0,void 0,(function*(){this._connected=!0,null===this._server&&(this._server=new n.ButtplugServer),this._server.addListener("message",this.OnMessageReceived)})),this.Disconnect=()=>i(this,void 0,void 0,(function*(){if(this._connected)try{yield this._server.Shutdown()}finally{this._connected=!1,this._server=null,this.emit("disconnect")}})),this.Send=e=>i(this,void 0,void 0,(function*(){if(!this._connected)throw new s.ButtplugClientConnectorException("Client not connected.");return yield this._server.SendMessage(e)})),this.OnMessageReceived=e=>{this.emit("message",[e])}}set Server(e){this._server=e}get Server(){return this._server}Initialize(){return i(this,void 0,void 0,(function*(){return Promise.resolve()}))}get Connected(){return this._connected}}t.ButtplugEmbeddedClientConnector=ButtplugEmbeddedClientConnector},"./src/client/Client.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugClient=void 0;const a=r("./src/core/Logging.ts"),c=r("../../node_modules/events/events.js"),u=r("./src/client/ButtplugClientDevice.ts"),d=n(r("./src/core/Messages.ts")),l=r("./src/core/MessageUtils.ts"),f=r("./src/core/Exceptions.ts"),p=r("./src/client/ButtplugClientConnectorException.ts");class ButtplugClient extends c.EventEmitter{constructor(e="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=a.ButtplugLogger.Logger,this._isScanning=!1,this._messageVersion=1,this.Connect=e=>s(this,void 0,void 0,(function*(){this._logger.Info(`ButtplugClient: Connecting using ${e.constructor.name}`),yield e.Connect(),this._connector=e,this._connector.addListener("message",this.ParseMessages),this._connector.addListener("disconnect",this.DisconnectHandler),yield this.InitializeConnection()})),this.Disconnect=()=>s(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.CheckConnector(),yield this.ShutdownConnection(),yield this._connector.Disconnect()})),this.StartScanning=()=>s(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.SendMsgExpectOk(new d.StartScanning)})),this.StopScanning=()=>s(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.SendMsgExpectOk(new d.StopScanning)})),this.RequestLog=e=>s(this,void 0,void 0,(function*(){this._logger.Debug(`ButtplugClient: RequestLog called with level ${e}`),yield this.SendMsgExpectOk(new d.RequestLog(e))})),this.StopAllDevices=()=>s(this,void 0,void 0,(function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.SendMsgExpectOk(new d.StopAllDevices)})),this.ParseMessages=e=>{this.ParseMessagesInternal(e)},this.DisconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.InitializeConnection=()=>s(this,void 0,void 0,(function*(){this.CheckConnector();const e=yield this.SendMessage(new d.RequestServerInfo(this._clientName,d.MESSAGE_SPEC_VERSION));switch(e.constructor){case d.ServerInfo:{const t=e;this._logger.Info(`ButtplugClient: Connected to Server ${t.ServerName}`);const r=t.MaxPingTime;if(t.MessageVersion<this._messageVersion)throw yield this._connector.Disconnect(),f.ButtplugException.LogAndError(f.ButtplugInitException,this._logger,"Server protocol version is older than client protocol version. Please update server.");return r>0&&(this._pingTimer=setInterval(()=>s(this,void 0,void 0,(function*(){this.Connected?yield this.SendMessage(new d.Ping):yield this.ShutdownConnection()})),Math.round(r/2))),yield this.RequestDeviceList(),!0}case d.Error:{yield this._connector.Disconnect();const t=e;throw f.ButtplugException.LogAndError(f.ButtplugInitException,this._logger,`Cannot connect to server. ${t.ErrorMessage}`)}}return!1})),this.RequestDeviceList=()=>s(this,void 0,void 0,(function*(){this.CheckConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.SendMessage(new d.RequestDeviceList)).Devices.forEach(e=>{if(this._devices.has(e.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${e}`);else{const t=u.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${t}`),this._devices.set(e.DeviceIndex,t),this.emit("deviceadded",t)}})})),this.ShutdownConnection=()=>s(this,void 0,void 0,(function*(){yield this.StopAllDevices(),null!==this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null)})),this.SendMsgExpectOk=e=>s(this,void 0,void 0,(function*(){const t=yield this.SendMessage(e);switch(t.constructor){case d.Ok:return;case d.Error:throw f.ButtplugException.FromError(t);default:throw f.ButtplugException.LogAndError(f.ButtplugMessageException,this._logger,`Message type ${t.constructor} not handled bySendMsgExpectOk`)}})),this.SendDeviceMessageClosure=(e,t)=>s(this,void 0,void 0,(function*(){yield this.SendDeviceMessage(e,t)})),this._clientName=e,this._logger.Debug(`ButtplugClient: Client ${e} created.`)}get Connector(){return this._connector}get Connected(){return null!==this._connector&&this._connector.Connected}get Devices(){this.CheckConnector();const e=[];return this._devices.forEach((t,r)=>{e.push(t)}),e}get IsScanning(){return this._isScanning}SendDeviceMessage(e,t){return s(this,void 0,void 0,(function*(){this.CheckConnector();const r=this._devices.get(e.Index);if(void 0===r)throw f.ButtplugException.LogAndError(f.ButtplugDeviceException,this._logger,`Device ${e.Index} not available.`);if(-1===r.AllowedMessages.indexOf(t.Type.name))throw f.ButtplugException.LogAndError(f.ButtplugDeviceException,this._logger,`Device ${e.Name} does not accept message type ${t.Type}.`);t.DeviceIndex=e.Index,yield this.SendMsgExpectOk(t)}))}ParseMessagesInternal(e){for(const t of e)switch(t.constructor){case d.Log:this.emit("log",t);break;case d.DeviceAdded:const e=t,r=u.ButtplugClientDevice.fromMsg(e,this.SendDeviceMessageClosure);this._devices.set(e.DeviceIndex,r),this.emit("deviceadded",r);break;case d.DeviceRemoved:const i=t;if(this._devices.has(i.DeviceIndex)){const e=this._devices.get(i.DeviceIndex);null==e||e.EmitDisconnected(),this._devices.delete(i.DeviceIndex),this.emit("deviceremoved",e)}break;case d.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",t)}}SendMessage(e){return s(this,void 0,void 0,(function*(){return this.CheckConnector(),l.CheckMessage(e),yield this._connector.Send(e)}))}CheckConnector(){if(!this.Connected)throw new p.ButtplugClientConnectorException("ButtplugClient not connected")}}t.ButtplugClient=ButtplugClient},"./src/client/IButtplugClientConnector.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/core/Exceptions.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugUnknownException=t.ButtplugPingException=t.ButtplugMessageException=t.ButtplugDeviceException=t.ButtplugInitException=t.ButtplugException=void 0;const s=n(r("./src/core/Messages.ts"));class ButtplugException extends Error{constructor(e,t,r=s.SYSTEM_MESSAGE_ID,i){super(e),this.errorClass=s.ErrorClass.ERROR_UNKNOWN,this.errorClass=t,this.innerError=i,this.messageId=r}get ErrorClass(){return this.errorClass}get InnerException(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new s.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(e,t,r,i=s.SYSTEM_MESSAGE_ID){return t.Error(r),new e(r,i)}static FromError(e){switch(e.ErrorCode){case s.ErrorClass.ERROR_DEVICE:return new ButtplugDeviceException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_INIT:return new ButtplugInitException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_UNKNOWN:return new ButtplugUnknownException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_PING:return new ButtplugPingException(e.ErrorMessage,e.Id);case s.ErrorClass.ERROR_MSG:return new ButtplugMessageException(e.ErrorMessage,e.Id);default:throw new Error(`Message type ${e.ErrorCode} not handled`)}}}t.ButtplugException=ButtplugException;class ButtplugInitException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_INIT,t)}}t.ButtplugInitException=ButtplugInitException;class ButtplugDeviceException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_DEVICE,t)}}t.ButtplugDeviceException=ButtplugDeviceException;class ButtplugMessageException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_MSG,t)}}t.ButtplugMessageException=ButtplugMessageException;class ButtplugPingException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_PING,t)}}t.ButtplugPingException=ButtplugPingException;class ButtplugUnknownException extends ButtplugException{constructor(e,t=s.SYSTEM_MESSAGE_ID){super(e,s.ErrorClass.ERROR_UNKNOWN,t)}}t.ButtplugUnknownException=ButtplugUnknownException},"./src/core/Logging.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugLogger=t.LogMessage=t.ButtplugLogLevel=void 0;const i=r("../../node_modules/events/events.js");var o;!function(e){e[e.Off=0]="Off",e[e.Fatal=1]="Fatal",e[e.Error=2]="Error",e[e.Warn=3]="Warn",e[e.Info=4]="Info",e[e.Debug=5]="Debug",e[e.Trace=6]="Trace"}(o=t.ButtplugLogLevel||(t.ButtplugLogLevel={}));class LogMessage{constructor(e,t){const r=new Date,i=r.getHours(),o=r.getMinutes(),n=r.getSeconds();this.timestamp=`${i}:${o}:${n}`,this.logMessage=e,this.logLevel=t}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${o[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}}t.LogMessage=LogMessage;class ButtplugLogger extends i.EventEmitter{constructor(){super(),this.maximumConsoleLogLevel=o.Off,this.maximumEventLogLevel=o.Off}static get Logger(){return void 0===ButtplugLogger.sLogger&&(ButtplugLogger.sLogger=new ButtplugLogger),this.sLogger}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(e){this.maximumConsoleLogLevel=e}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(e){this.maximumEventLogLevel=e}Fatal(e){this.AddLogMessage(e,o.Fatal)}Error(e){this.AddLogMessage(e,o.Error)}Warn(e){this.AddLogMessage(e,o.Warn)}Info(e){this.AddLogMessage(e,o.Info)}Debug(e){this.AddLogMessage(e,o.Debug)}Trace(e){this.AddLogMessage(e,o.Trace)}AddLogMessage(e,t){if(t>this.maximumEventLogLevel&&t>this.maximumConsoleLogLevel)return;const r=new LogMessage(e,t);t<=this.maximumConsoleLogLevel&&console.log(r.FormattedMessage),t<=this.maximumEventLogLevel&&this.emit("log",r)}}t.ButtplugLogger=ButtplugLogger,ButtplugLogger.sLogger=void 0},"./src/core/MessageUtils.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GetSchemaVersion=t.FromJSON=t.CheckMessage=void 0;const a=r("../../node_modules/class-transformer/index.js"),c=s(r("./node_modules/ajv/lib/ajv.js")),u=n(r("./src/core/Messages.ts")),d=r("./src/core/Exceptions.ts"),l=n(r("./dependencies/buttplug-schema/schema/buttplug-schema.json")),f=new c.default;f.addMetaSchema(r("./node_modules/ajv/lib/refs/json-schema-draft-06.json"));const p=f.compile(l);t.CheckMessage=function CheckMessage(e){if(p([e.toProtocolFormat()]))return;const t=p.errors.map(e=>e.message).join("; ");throw new d.ButtplugMessageException(t)},t.FromJSON=function FromJSON(e){const t=JSON.parse(e);if(!p(t)){const e=p.errors.map(e=>e.message).join("; ");throw new d.ButtplugMessageException(e)}const r=[];for(const e of Array.from(t)){const t=a.plainToClass(u[Object.getOwnPropertyNames(e)[0]],e[Object.getOwnPropertyNames(e)[0]]);r.push(t)}return r},t.GetSchemaVersion=function GetSchemaVersion(){return parseInt(l.version,10)}},"./src/core/Messages.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageAttributes=t.LinearCmd=t.VectorSubcommand=t.RotateCmd=t.RotateSubcommand=t.VibrateCmd=t.SpeedSubcommand=t.GenericMessageSubcommand=t.VorzeA10CycloneCmd=t.LovenseCmd=t.StopAllDevices=t.StopDeviceCmd=t.SingleMotorVibrateCmd=t.KiirooCmd=t.FleshlightLaunchFW12Cmd=t.ServerInfo=t.RequestServerInfo=t.Log=t.RequestLog=t.ScanningFinished=t.StopScanning=t.StartScanning=t.RequestDeviceList=t.DeviceRemoved=t.DeviceAdded=t.DeviceAddedVersion0=t.DeviceList=t.DeviceInfoWithSpecifications=t.DeviceListVersion0=t.DeviceInfo=t.Error=t.ErrorClass=t.Test=t.Ping=t.Ok=t.ButtplugSystemMessage=t.ButtplugDeviceMessage=t.ButtplugMessage=t.MESSAGE_SPEC_VERSION=t.MAX_ID=t.DEFAULT_MESSAGE_ID=t.SYSTEM_MESSAGE_ID=void 0;const i=r("../../node_modules/class-transformer/index.js"),o=r("./src/core/Exceptions.ts");r("../../node_modules/reflect-metadata/Reflect.js"),t.SYSTEM_MESSAGE_ID=0,t.DEFAULT_MESSAGE_ID=1,t.MAX_ID=4294967295,t.MESSAGE_SPEC_VERSION=1;class ButtplugMessage{constructor(e){this.Id=e}DowngradeMessage(){throw new o.ButtplugMessageException("Message version downgrade required, but not defined for this message type.",this.Id)}get Type(){return this.constructor}getType(){return this.Type}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const e={};return e[this.Type.name]=i.classToPlain(this),e}}t.ButtplugMessage=ButtplugMessage;class ButtplugDeviceMessage extends ButtplugMessage{constructor(e,t){super(t),this.DeviceIndex=e,this.Id=t}}t.ButtplugDeviceMessage=ButtplugDeviceMessage;class ButtplugSystemMessage extends ButtplugMessage{constructor(e=t.SYSTEM_MESSAGE_ID){super(e),this.Id=e}}t.ButtplugSystemMessage=ButtplugSystemMessage;t.Ok=class Ok extends ButtplugSystemMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.Ping=class Ping extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};var n;t.Test=class Test extends ButtplugMessage{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.TestString=e,this.Id=r}get SchemaVersion(){return 0}},function(e){e[e.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",e[e.ERROR_INIT=1]="ERROR_INIT",e[e.ERROR_PING=2]="ERROR_PING",e[e.ERROR_MSG=3]="ERROR_MSG",e[e.ERROR_DEVICE=4]="ERROR_DEVICE"}(n=t.ErrorClass||(t.ErrorClass={}));t.Error=class Error extends ButtplugSystemMessage{constructor(e,r=n.ERROR_UNKNOWN,i=t.DEFAULT_MESSAGE_ID){super(i),this.ErrorMessage=e,this.ErrorCode=r,this.Id=i}get SchemaVersion(){return 0}};class DeviceInfo{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}}t.DeviceInfo=DeviceInfo;class DeviceListVersion0 extends ButtplugSystemMessage{constructor(e,t){super(),this.Devices=e,this.Id=t}get Type(){return DeviceList.constructor}get SchemaVersion(){return 0}}t.DeviceListVersion0=DeviceListVersion0;t.DeviceInfoWithSpecifications=class DeviceInfoWithSpecifications{constructor(e,t,r){this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}};class DeviceList extends ButtplugSystemMessage{constructor(e,t){super(),this.Devices=e,this.Id=t}DowngradeMessage(){const e=[];for(const t of this.Devices)e.push(new DeviceInfo(t.DeviceIndex,t.DeviceName,Object.keys(t.DeviceMessages)));return new DeviceListVersion0(e,this.Id)}get SchemaVersion(){return 1}}t.DeviceList=DeviceList;class DeviceAddedVersion0 extends ButtplugSystemMessage{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get Type(){return DeviceAdded.constructor}get SchemaVersion(){return 0}}t.DeviceAddedVersion0=DeviceAddedVersion0;class DeviceAdded extends ButtplugSystemMessage{constructor(e,t,r){super(),this.DeviceIndex=e,this.DeviceName=t,this.DeviceMessages=r}get SchemaVersion(){return 1}DowngradeMessage(){return new DeviceAddedVersion0(this.DeviceIndex,this.DeviceName,Object.keys(this.DeviceMessages))}}t.DeviceAdded=DeviceAdded;t.DeviceRemoved=class DeviceRemoved extends ButtplugSystemMessage{constructor(e){super(),this.DeviceIndex=e}get SchemaVersion(){return 0}};t.RequestDeviceList=class RequestDeviceList extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.StartScanning=class StartScanning extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.StopScanning=class StopScanning extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.ScanningFinished=class ScanningFinished extends ButtplugSystemMessage{constructor(){super()}get SchemaVersion(){return 0}};t.RequestLog=class RequestLog extends ButtplugMessage{constructor(e,r=t.DEFAULT_MESSAGE_ID){super(r),this.LogLevel=e,this.Id=r}get SchemaVersion(){return 0}};t.Log=class Log extends ButtplugSystemMessage{constructor(e,t){super(),this.LogLevel=e,this.LogMessage=t}get SchemaVersion(){return 0}};t.RequestServerInfo=class RequestServerInfo extends ButtplugMessage{constructor(e,r=0,i=t.DEFAULT_MESSAGE_ID){super(i),this.ClientName=e,this.MessageVersion=r,this.Id=i}get SchemaVersion(){return 1}};t.ServerInfo=class ServerInfo extends ButtplugSystemMessage{constructor(e,r,i,o,n,s,a=t.DEFAULT_MESSAGE_ID){super(),this.MajorVersion=e,this.MinorVersion=r,this.BuildVersion=i,this.MessageVersion=o,this.MaxPingTime=n,this.ServerName=s,this.Id=a}get SchemaVersion(){return 0}};t.FleshlightLaunchFW12Cmd=class FleshlightLaunchFW12Cmd extends ButtplugDeviceMessage{constructor(e,r,i=-1,o=t.DEFAULT_MESSAGE_ID){super(i,o),this.Speed=e,this.Position=r,this.DeviceIndex=i,this.Id=o}get SchemaVersion(){return 0}};t.KiirooCmd=class KiirooCmd extends ButtplugDeviceMessage{constructor(e=0,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.DeviceIndex=r,this.Id=i,this.Command="0",this.Command=String(e)}set Position(e){this.Command=e>=0&&e<=4?String(Math.round(e)):"0"}get Position(){const e=Number(this.Command)?Number(this.Command):0;return e<0||e>4?0:Math.round(e)}get SchemaVersion(){return 0}};t.SingleMotorVibrateCmd=class SingleMotorVibrateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.Speed=e,this.DeviceIndex=r,this.Id=i}get SchemaVersion(){return 0}};t.StopDeviceCmd=class StopDeviceCmd extends ButtplugDeviceMessage{constructor(e=-1,r=t.DEFAULT_MESSAGE_ID){super(e,r),this.DeviceIndex=e,this.Id=r}get SchemaVersion(){return 0}};t.StopAllDevices=class StopAllDevices extends ButtplugMessage{constructor(e=t.DEFAULT_MESSAGE_ID){super(e),this.Id=e}get SchemaVersion(){return 0}};t.LovenseCmd=class LovenseCmd extends ButtplugDeviceMessage{constructor(e,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.Command=e,this.DeviceIndex=r,this.Id=i}get SchemaVersion(){return 0}};t.VorzeA10CycloneCmd=class VorzeA10CycloneCmd extends ButtplugDeviceMessage{constructor(e,r,i=-1,o=t.DEFAULT_MESSAGE_ID){super(i,o),this.Speed=e,this.Clockwise=r,this.DeviceIndex=i,this.Id=o}get SchemaVersion(){return 0}};class GenericMessageSubcommand{constructor(e){this.Index=e}}t.GenericMessageSubcommand=GenericMessageSubcommand;class SpeedSubcommand extends GenericMessageSubcommand{constructor(e,t){super(e),this.Speed=t}}t.SpeedSubcommand=SpeedSubcommand;class VibrateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.Speeds=e,this.DeviceIndex=r,this.Id=i}get SchemaVersion(){return 1}static Create(e,r){const i=new Array;let o=0;for(const e of r)i.push(new SpeedSubcommand(o,e)),++o;return new VibrateCmd(i,e,t.DEFAULT_MESSAGE_ID)}}t.VibrateCmd=VibrateCmd;class RotateSubcommand extends GenericMessageSubcommand{constructor(e,t,r){super(e),this.Speed=t,this.Clockwise=r}static Create(e,t){const r=new Array;let i=0;for(const e of t)r.push(new SpeedSubcommand(i,e)),++i;return new VibrateCmd(r,e)}}t.RotateSubcommand=RotateSubcommand;class RotateCmd extends ButtplugDeviceMessage{constructor(e,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.Rotations=e,this.DeviceIndex=r,this.Id=i}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let i=0;for(const e of t)r.push(new RotateSubcommand(i,e[0],e[1])),++i;return new RotateCmd(r,e)}}t.RotateCmd=RotateCmd;class VectorSubcommand extends GenericMessageSubcommand{constructor(e,t,r){super(e),this.Position=t,this.Duration=r}}t.VectorSubcommand=VectorSubcommand;class LinearCmd extends ButtplugDeviceMessage{constructor(e,r=-1,i=t.DEFAULT_MESSAGE_ID){super(r,i),this.Vectors=e,this.DeviceIndex=r,this.Id=i}get SchemaVersion(){return 1}static Create(e,t){const r=new Array;let i=0;for(const e of t)r.push(new VectorSubcommand(i,e[0],e[1])),++i;return new LinearCmd(r,e)}}t.LinearCmd=LinearCmd;t.MessageAttributes=class MessageAttributes{constructor(e){this.FeatureCount=e}}},"./src/devices/ButtplugDevice.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugDevice=void 0;const o=r("../../node_modules/events/events.js");class ButtplugDevice extends o.EventEmitter{constructor(e,t){super(),this.ParseMessage=e=>i(this,void 0,void 0,(function*(){return yield this._protocol.ParseMessage(e)})),this._protocol=e,this._device=t,this._device.addListener("deviceremoved",()=>{this.emit("deviceremoved",this)})}get Connected(){return this._device.Connected}get MessageSpecifications(){return this._protocol.MessageSpecifications}Disconnect(){return this._device.Disconnect()}Initialize(){return i(this,void 0,void 0,(function*(){return yield this._protocol.Initialize()}))}get Name(){return this._protocol.Name}get Id(){return this._device.Address}}t.ButtplugDevice=ButtplugDevice},"./src/devices/ButtplugDeviceImpl.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugDeviceImpl=void 0;const o=r("./src/core/Logging.ts"),n=r("../../node_modules/events/events.js"),s=r("./src/devices/ButtplugDeviceWriteOptions.ts"),a=r("./src/devices/ButtplugDeviceReadOptions.ts");class ButtplugDeviceImpl extends n.EventEmitter{constructor(t,r){super(),this._logger=o.ButtplugLogger.Logger,this.WriteValue=(e,t)=>i(this,void 0,void 0,(function*(){return yield this.WriteValueInternal(e,t||new s.ButtplugDeviceWriteOptions)})),this.ReadValue=e=>i(this,void 0,void 0,(function*(){return yield this.ReadValueInternal(e||new a.ButtplugDeviceReadOptions)})),this.WriteString=(t,r)=>i(this,void 0,void 0,(function*(){return yield this.WriteValue(e.from(t),r)})),this.ReadString=e=>i(this,void 0,void 0,(function*(){return(yield this.ReadValue(e)).toString("utf-8")})),this.SubscribeToUpdates=e=>i(this,void 0,void 0,(function*(){return yield this.SubscribeToUpdatesInternal(e||new a.ButtplugDeviceReadOptions)})),this._name=t,this._address=r}get Name(){return this._name}get Address(){return this._address}UpdateReceived(e,t){this.emit("updateReceived",[e,t])}}t.ButtplugDeviceImpl=ButtplugDeviceImpl}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/ButtplugDeviceProtocol.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugDeviceProtocol=void 0;const o=r("../../node_modules/events/events.js"),n=r("./src/core/Logging.ts"),s=r("./src/core/Exceptions.ts");class ButtplugDeviceProtocol extends o.EventEmitter{constructor(e,t){super(),this.MsgFuncs=new Map,this._logger=n.ButtplugLogger.Logger,this.ParseMessage=e=>i(this,void 0,void 0,(function*(){if(!this.MsgFuncs.has(e.Type))throw new s.ButtplugMessageException(`${this._name} cannot handle message of type ${e.Type.name}`,e.Id);return this.MsgFuncs.get(e.Type)(e)})),this._name=e,this._device=t}get Name(){return this._name}get AllowedMessageTypes(){return Array.from(this.MsgFuncs.keys())}Initialize(){return i(this,void 0,void 0,(function*(){return Promise.resolve()}))}}t.ButtplugDeviceProtocol=ButtplugDeviceProtocol},"./src/devices/ButtplugDeviceReadOptions.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugDeviceReadOptions=void 0;const i=r("./src/devices/Endpoints.ts");t.ButtplugDeviceReadOptions=class ButtplugDeviceReadOptions{constructor(e){this.Endpoint=i.Endpoints.Rx,this.Timeout=-1,this.ReadLength=-1,Object.assign(this,e)}}},"./src/devices/ButtplugDeviceWriteOptions.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugDeviceWriteOptions=void 0;const i=r("./src/devices/Endpoints.ts");t.ButtplugDeviceWriteOptions=class ButtplugDeviceWriteOptions{constructor(e){this.Endpoint=i.Endpoints.Tx,this.WriteWithResponse=!1,Object.assign(this,e)}}},"./src/devices/Endpoints.ts":function(e,t,r){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.GetEndpoint=t.Endpoints=void 0,function(e){e.Tx="tx",e.Rx="rx",e.Command="command",e.Firmware="firmware",e.TxMode="txmode",e.TxVibrate="txvibrate",e.TxShock="txshock",e.TxVendorControl="txvendorcontrol",e.RxTouch="rxtouch",e.RxAccel="rxaccel",e.Whitelist="whitelist"}(i=t.Endpoints||(t.Endpoints={}));const o=function twoWayEnum(e){return Object.assign(function reverseEnum(e){const t={};return Object.keys(e).forEach(r=>t[e[r]]=r),t}(e),e)}(i);t.GetEndpoint=function GetEndpoint(e){try{return o[e]}catch(e){return null}}},"./src/devices/IButtplugDevice.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/devices/IButtplugDeviceImpl.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/devices/IButtplugDeviceProtocol.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/devices/configuration/BluetoothLEProtocolConfiguration.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BluetoothLEProtocolConfiguration=void 0;const i=r("./src/devices/Endpoints.ts"),o=r("./src/core/Exceptions.ts");class BluetoothLEProtocolConfiguration{constructor(e,t){this._names=[],this._services=new Map,this._names=e,this._services=t||new Map}get Names(){return this._names}get Services(){return this._services}static ConstructFromObject(e){if(-1===Object.getOwnPropertyNames(e).indexOf("names"))throw new o.ButtplugDeviceException("Need a names property to load bluetooth device from.");if(-1===Object.getOwnPropertyNames(e).indexOf("services"))throw new o.ButtplugDeviceException("Need a services property to load bluetooth device from.");const t=e.names,r=new Map;for(const n of Object.keys(e.services)){const s=new Map;if(-1!==Object.getOwnPropertyNames(e.services).indexOf(n)&&null!==e.services[n])for(const r of Object.keys(e.services[n])){const a=i.GetEndpoint(r);if(null==a)throw new o.ButtplugDeviceException(`Device with names ${t} lists invalid endpoint ${r}.`);s.set(a,e.services[n][r])}r.set(n,s)}return new BluetoothLEProtocolConfiguration(t,r)}Matches(e){if(!(e instanceof BluetoothLEProtocolConfiguration))return!1;const t=e;if(1!==t.Names.length)throw new o.ButtplugDeviceException("Device checks should only happen against 1 name.");for(const e of this.Names){if(-1!==t.Names.indexOf(e))return!0;if(!e.endsWith("*"))continue;const r=e.substr(0,e.length-1);if(-1!==t.Names.findIndex(e=>e.startsWith(r)))return!0}const r=Array.from(this._services.keys());for(const e of t.Services.keys())if(0!==r.indexOf(e))return!0;return!1}Merge(e){}}t.BluetoothLEProtocolConfiguration=BluetoothLEProtocolConfiguration},"./src/devices/configuration/DeviceConfigurationManager.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceConfigurationManager=void 0;const a=r("./src/core/Exceptions.ts"),c=r("./src/devices/configuration/BluetoothLEProtocolConfiguration.ts"),u=r("./src/devices/configuration/SerialProtocolConfiguration.ts"),d=r("./src/devices/configuration/HIDProtocolConfiguration.ts"),l=r("./src/devices/protocols/Lovense.ts"),f=r("./src/devices/protocols/WeVibe.ts"),p=r("./src/devices/protocols/VorzeA10Cyclone.ts"),h=r("./src/devices/protocols/MagicMotion.ts"),v=r("./src/devices/protocols/LiBo.ts"),m=r("./src/devices/protocols/Youcups.ts"),g=r("./src/devices/protocols/Maxpro.ts"),y=r("./src/devices/protocols/FleshlightLaunch.ts"),b=r("./src/devices/protocols/KiirooGen2Vibe.ts"),_=n(r("./dependencies/buttplug-device-config/buttplug-device-config.json")),S=r("./src/devices/protocols/Youou.ts"),w=r("./src/devices/protocols/KiirooGen21.ts"),C=r("./src/devices/protocols/Motorbunny.ts");class DeviceConfigurationManager{constructor(e){this._configObject={},this._configs=new Map,this._protocols=new Map,this._configObject=e,this._protocols.set("lovense",l.Lovense),this._protocols.set("wevibe",f.WeVibe),this._protocols.set("vorze-sa",p.VorzeA10Cyclone),this._protocols.set("magic-motion",h.MagicMotion),this._protocols.set("maxpro",g.Maxpro),this._protocols.set("kiiroo-v2",y.FleshlightLaunch),this._protocols.set("kiiroo-v21",w.KiirooGen21),this._protocols.set("kiiroo-v2-vibrator",b.KiirooGen2Vibe),this._protocols.set("youou",S.Youou),this._protocols.set("youcups",m.Youcups),this._protocols.set("libo",v.LiBo),this._protocols.set("motorbunny",C.Motorbunny),this.ParseConfig()}static get Manager(){if(null===DeviceConfigurationManager._manager)throw new a.ButtplugDeviceException("Device configuration manager not yet initialized!");return DeviceConfigurationManager._manager}static LoadFromInternalConfig(){DeviceConfigurationManager._manager=new DeviceConfigurationManager(_)}static LoadFromJsonExternalConfig(e){const t=JSON.parse(e);DeviceConfigurationManager._manager=new DeviceConfigurationManager(t)}static LoadFromWebConfig(e="https://buttplug-device-config.buttplug.io"){return s(this,void 0,void 0,(function*(){const t=yield fetch(e);DeviceConfigurationManager.LoadFromJsonExternalConfig(yield t.text())}))}LoadUserConfiguration(){}GetAllConfigsOfType(e){const t=[];for(const[r,i]of this._configs.entries())i instanceof e&&t.push(i);return t}Find(e){for(const[t,r]of this._configs.entries())if(r.Matches(e))return[r,this._protocols.get(t)]}ParseConfig(){this._configs=new Map;const e=this._configObject.protocols;for(const t of Object.keys(e)){if(!this._protocols.has(t))continue;const r=e[t];if(null!=r)for(const e of Object.keys(r))switch(e){case"btle":this._configs.set(t,c.BluetoothLEProtocolConfiguration.ConstructFromObject(r[e]));break;case"serial":this._configs.set(t,new u.SerialProtocolConfiguration(r[e]));break;case"hid":this._configs.set(t,new d.HIDProtocolConfiguration(r[e]))}}}}t.DeviceConfigurationManager=DeviceConfigurationManager,DeviceConfigurationManager._manager=null},"./src/devices/configuration/HIDProtocolConfiguration.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDProtocolConfiguration=void 0;t.HIDProtocolConfiguration=class HIDProtocolConfiguration{constructor(e){}Matches(e){return!1}Merge(e){}}},"./src/devices/configuration/IProtocolConfiguration.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/devices/configuration/SerialProtocolConfiguration.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SerialProtocolConfiguration=void 0;t.SerialProtocolConfiguration=class SerialProtocolConfiguration{constructor(e){}Matches(e){return!1}Merge(e){}}},"./src/devices/protocols/FleshlightLaunch.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FleshlightLaunch=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts"),d=r("./src/devices/Endpoints.ts"),l=r("./src/devices/ButtplugDeviceWriteOptions.ts");class FleshlightLaunch extends u.ButtplugDeviceProtocol{constructor(t){super("Fleshlight Launch",t),this._lastPosition=0,this.Initialize=()=>s(this,void 0,void 0,(function*(){this._logger.Debug(`Calling Fleshlight Launch initialize on ${this._device.Name}`),yield this._device.WriteValue(e.from([0]),new l.ButtplugDeviceWriteOptions({Endpoint:d.Endpoints.Firmware,WriteWithResponse:!0}))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new a.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id))})),this.HandleFleshlightLaunchFW12Cmd=t=>s(this,void 0,void 0,(function*(){return this._lastPosition=t.Position,yield this._device.WriteValue(e.from([t.Position,t.Speed])),new a.Ok(t.Id)})),this.HandleLinearCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)throw new c.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);const t=e.Vectors[0],r=100*t.Position,i=Math.abs(r-this._lastPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/i,-1.05));o=Math.min(Math.max(o,0),95);const n=Math.floor(r/99*90+4.5);return yield this.HandleFleshlightLaunchFW12Cmd(new a.FleshlightLaunchFW12Cmd(o,n,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(a.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}t.FleshlightLaunch=FleshlightLaunch}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/KiirooGen21.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KiirooGen21=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class KiirooGen21 extends u.ButtplugDeviceProtocol{constructor(t){super("Kiiroo Onyx 2.1",t),this._lastPosition=0,this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new a.FleshlightLaunchFW12Cmd(0,0,e.DeviceIndex,e.Id))})),this.HandleFleshlightLaunchFW12Cmd=t=>s(this,void 0,void 0,(function*(){return this._lastPosition=t.Position,yield this._device.WriteValue(e.from([3,0,t.Speed,t.Position])),new a.Ok(t.Id)})),this.HandleLinearCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)throw new c.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",e.Id);const t=e.Vectors[0],r=100*t.Position,i=Math.abs(r-this._lastPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/i,-1.05));o=Math.min(Math.max(o,0),95);const n=Math.floor(r/99*99+0);return yield this.HandleFleshlightLaunchFW12Cmd(new a.FleshlightLaunchFW12Cmd(o,n,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(a.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}}t.KiirooGen21=KiirooGen21}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/KiirooGen2Vibe.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.KiirooGen2Vibe=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class KiirooGen2VibeType{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.VibeOrder=[0,1,2]}}class KiirooGen2Vibe extends u.ButtplugDeviceProtocol{constructor(t){super(`Kiiroo ${t.Name}`,t),this._devInfo=new KiirooGen2VibeType,this._hasRunCommand=!1,this._vibratorSpeed=[0,0,0],this.HandleVibrateCmd=t=>s(this,void 0,void 0,(function*(){if(t.Speeds.length<1||t.Speeds.length>this._devInfo.VibeCount)throw new c.ButtplugDeviceException("Kiiroo Gen 2 Vibrator devices require VibrateCmd at most "+`${this._devInfo.VibeCount} speed commands, ${t.Speeds.length} sent.`,t.Id);let r=!1;for(const e of t.Speeds)Math.abs(e.Speed-this._vibratorSpeed[e.Index])>.001&&(r=!0,this._vibratorSpeed[e.Index]=e.Speed);if(!r&&this._hasRunCommand)return new a.Ok(t.Id);const i=e.from([100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]],100*this._vibratorSpeed[this._devInfo.VibeOrder[0]]]);return this._hasRunCommand=!0,yield this._device.WriteValue(i),new a.Ok(t.Id)})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new a.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))}));const r=KiirooGen2Vibe.DevInfos.get(t.Name);void 0!==r&&(this._devInfo=r,this._name=`${this._devInfo.Brand} ${t.Name}`),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.KiirooGen2Vibe=KiirooGen2Vibe,KiirooGen2Vibe.DevInfos=new Map([["Pearl2",Object.assign(new KiirooGen2VibeType,{Brand:"Kiiroo",VibeCount:1,VibeOrder:[0,1,2]})],["Fuse",Object.assign(new KiirooGen2VibeType,{Brand:"OhMiBod",VibeCount:2,VibeOrder:[1,0,2]})],["Virtual Blowbot",Object.assign(new KiirooGen2VibeType,{Brand:"PornHub",VibeCount:3,VibeOrder:[0,1,2]})],["Titan",Object.assign(new KiirooGen2VibeType,{Brand:"Kiiroo",VibeCount:3,VibeOrder:[0,1,2]})]])}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/LiBo.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LiBo=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts"),d=r("./src/devices/Endpoints.ts"),l=r("./src/devices/ButtplugDeviceWriteOptions.ts");class LiBoType{constructor(){this.Name="Lottie",this.VibeCount=1,this.VibeOrder=[0,1]}}class LiBo extends u.ButtplugDeviceProtocol{constructor(t){super("LiBo",t),this._devInfo=new LiBoType,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=t=>s(this,void 0,void 0,(function*(){if(t.Speeds.length<1||t.Speeds.length>this._devInfo.VibeCount)throw new c.ButtplugDeviceException("Libo devices require VibrateCmd to have at most "+`${this._devInfo.VibeCount} speed commands, ${t.Speeds.length} sent.`,t.Id);const r=[!1,!1];for(const e of t.Speeds)Math.abs(e.Speed-this._vibratorSpeed[e.Index])>.001&&(r[e.Index]=!0,this._vibratorSpeed[e.Index]=e.Speed);if(r[this._devInfo.VibeOrder[0]]||!this._hasRunCommand){let t=d.Endpoints.Tx;1===this._devInfo.VibeCount&&0===Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])&&(t=d.Endpoints.TxMode),yield this._device.WriteValue(e.from([Math.ceil(100*this._vibratorSpeed[this._devInfo.VibeOrder[0]])]),new l.ButtplugDeviceWriteOptions({Endpoint:t}))}return this._devInfo.VibeCount<2||!r[this._devInfo.VibeOrder[1]]&&this._hasRunCommand?(this._devInfo.VibeCount<2&&(this._hasRunCommand=!0),new a.Ok(t.Id)):(this._hasRunCommand=!0,yield this._device.WriteValue(e.from([Math.ceil(3*this._vibratorSpeed[this._devInfo.VibeOrder[1]])]),new l.ButtplugDeviceWriteOptions({Endpoint:d.Endpoints.TxMode})),new a.Ok(t.Id))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new a.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))}));const r=LiBo.DevInfos.get(t.Name);void 0!==r&&(this._devInfo=r,this._name=`LiBo ${this._devInfo.Name}`),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.LiBo=LiBo,LiBo.DevInfos=new Map([["PiPiJing",Object.assign(new LiBoType,{Name:"Elle",VibeCount:2,VibeOrder:[1,0]})],["XiaoLu",Object.assign(new LiBoType,{Name:"Lottie",VibeCount:1})],["SuoYinQiu",Object.assign(new LiBoType,{Name:"Karen",VibeCount:0})],["BaiHu",Object.assign(new LiBoType,{Name:"LaLa",VibeCount:2})],["LuXiaoHan",Object.assign(new LiBoType,{Name:"LuLu",VibeCount:1})],["MonsterPub",Object.assign(new LiBoType,{Name:"MonsterPub",VibeCount:1})]])}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/Lovense.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Lovense=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class Lovense extends u.ButtplugDeviceProtocol{constructor(e){super(`Lovense ${e.Name}`,e),this._initPromise=new Promise(e=>{this._initResolve=e}),this._isClockwise=!1,this._specs={VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}},this.Initialize=()=>s(this,void 0,void 0,(function*(){this._device.addListener("updateReceived",this.OnValueChanged),yield this._device.SubscribeToUpdates(),this._logger.Debug(`Device ${this._device.Name} waiting for initialization return`),yield this._device.WriteString("DeviceType;"),yield this._initPromise})),this.OnValueChanged=([e,t])=>s(this,void 0,void 0,(function*(){if(void 0!==this._initResolve){const e=t.toString("utf-8");return this._logger.Debug(`Lovense Device ${this._device.Name} got initialization return ${e}`),this.ParseDeviceType(e),this._initResolve(),void(this._initResolve=void 0)}})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id)),this._specs.hasOwnProperty("RotateCmd")&&(yield this.HandleRotateCmd(new a.RotateCmd([new a.RotateSubcommand(0,0,this._isClockwise)],0,e.Id))),new a.Ok(e.Id)})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._specs.VibrateCmd.FeatureCount;r++)t.push(new a.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))})),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(e.Speeds.length>this._specs.VibrateCmd.FeatureCount)throw new c.ButtplugDeviceException("Lovense devices require VibrateCmd to have at most "+`${this._specs.VibrateCmd.FeatureCount} speed commands, `+`${e.Speeds.length} sent.`,e.Id);for(const t of e.Speeds){const e=this._specs.VibrateCmd.FeatureCount>1?(t.Index+1).toString(10):"",r=Math.floor(20*t.Speed);yield this._device.WriteString(`Vibrate${e}:${r};`)}return new a.Ok(e.Id)})),this.HandleRotateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Rotations.length)throw new c.ButtplugDeviceException("Lovense devices require RotateCmd to have 1 rotate command, "+`${e.Rotations.length} sent.`,e.Id);const t=e.Rotations[0];if(0!==t.Index)throw new c.ButtplugDeviceException("Rotation command sent for invalid index.");t.Clockwise!==this._isClockwise&&(yield this._device.WriteString("RotateChange;"));const r=Math.floor(20*t.Speed);return yield this._device.WriteString(`Rotate:${r};`),new a.Ok(e.Id)}))}get MessageSpecifications(){return this._specs}ParseDeviceType(e){let[t,r]=e.split(":");Lovense._deviceNames.hasOwnProperty(t)||(t="0"),this._name=`Lovense ${Lovense._deviceNames[t]} v${r}`,this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),"P"===t?this._specs.VibrateCmd={FeatureCount:2}:"A"!==t&&"C"!==t||(this._specs.RotateCmd={FeatureCount:1},this.MsgFuncs.set(a.RotateCmd,this.HandleRotateCmd))}}t.Lovense=Lovense,Lovense._deviceNames={A:"Nora",B:"Max",C:"Nora",L:"Ambi",O:"Osci",P:"Edge",S:"Lush",W:"Domi",Z:"Hush",0:"Unknown"}},"./src/devices/protocols/MagicMotion.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MagicMotion=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class MagicMotionType{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.Protocol=1,this.MaxSpeed=100}}class MagicMotion extends u.ButtplugDeviceProtocol{constructor(t){super("MagicMotion",t),this._devInfo=new MagicMotionType,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=t=>s(this,void 0,void 0,(function*(){if(t.Speeds.length<1||t.Speeds.length>this._devInfo.VibeCount)throw new c.ButtplugDeviceException("MagicMotionn devices require VibrateCmd at most "+`${this._devInfo.VibeCount} speed commands, ${t.Speeds.length} sent.`,t.Id);let r,i=!1;for(const e of t.Speeds)Math.abs(e.Speed-this._vibratorSpeed[e.Index])>.001&&(i=!0,this._vibratorSpeed[e.Index]=e.Speed);if(!i&&this._hasRunCommand)return new a.Ok(t.Id);switch(this._devInfo.Protocol){case 1:r=e.from([11,255,4,10,50,50,0,4,8,0,100,0]),r[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;case 2:r=e.from([16,255,4,10,50,10,0,4,8,0,100,0,4,8,0,100,1]),r[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),this._devInfo.VibeCount>=2&&(r[14]=Math.round(this._vibratorSpeed[1]*this._devInfo.MaxSpeed));break;case 3:r=e.from([11,255,4,10,70,70,0,4,8,0,100,0]),r[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;default:throw new c.ButtplugDeviceException("Unknown communication protocol.")}return this._hasRunCommand=!0,yield this._device.WriteValue(r),new a.Ok(t.Id)})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._devInfo.VibeCount;r++)t.push(new a.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))}));const r=MagicMotion.DevInfos.get(t.Name);void 0!==r&&(this._devInfo=r,this._name=`${this._devInfo.Brand} ${this._devInfo.Name}`),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.MagicMotion=MagicMotion,MagicMotion.DevInfos=new Map([["Smart Mini Vibe",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Smart Mini Vibe",VibeCount:1,Protocol:1,MaxSpeed:100})],["Flamingo",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Flamingo",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Cell",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Dante/Candy",VibeCount:1,Protocol:1,MaxSpeed:100})],["Eidolon",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Eidolon",VibeCount:2,Protocol:2,MaxSpeed:100})],["Smart Bean",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Kegel",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Wand",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Wand",VibeCount:1,Protocol:1,MaxSpeed:100})],["Krush",Object.assign(new MagicMotionType,{Brand:"LoveLife",Name:"Krush",VibeCount:1,Protocol:3,MaxSpeed:77})],["Smart Mini Vibe3",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Vini",VibeCount:1,Protocol:1,MaxSpeed:100})],["Fugu",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Fugu",VibeCount:1,Protocol:1,MaxSpeed:100})],["Lipstick",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Awaken",VibeCount:1,Protocol:2,MaxSpeed:100})],["Sword",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Equinox",VibeCoun:1,Protocol:2,MaxSpeed:100})],["Curve",Object.assign(new MagicMotionType,{Brand:"MagicMotion",Name:"Solstice",VibeCount:1,Protocol:2,MaxSpeed:100})]])}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/Maxpro.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Maxpro=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class Maxpro extends u.ButtplugDeviceProtocol{constructor(t){super(`Maxpro ${t.Name}`,t),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new c.ButtplugDeviceException("Maxpro devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=t=>s(this,void 0,void 0,(function*(){const r=Math.floor(100*t.Speed),i=e.from([85,4,7,255,255,63,r,95,r,0]),o=255&i.reduce((e,t)=>e+t);return i[9]=o,yield this._device.WriteValue(i),new a.Ok(t.Id)})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.Maxpro=Maxpro}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/Motorbunny.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Motorbunny=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class Motorbunny extends u.ButtplugDeviceProtocol{constructor(t){super("Motorbunny",t),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new c.ButtplugDeviceException("Motorbunny devices require VibrateCmd to have 1 speed command, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleRotateCmd=t=>s(this,void 0,void 0,(function*(){if(1!==t.Rotations.length)throw new c.ButtplugDeviceException("Motorbunny devices require RotateCmd to have 1 speed command, "+`${t.Rotations.length} sent.`,t.Id);const r=Math.floor(255*t.Rotations[0].Speed);if(r<5){const r=e.from([160,0,0,0,0,236]);return yield this._device.WriteValue(r),new a.Ok(t.Id)}let i=[];for(let e=0;e<7;++e)i=i.concat([t.Rotations[0].Clockwise?42:41,r]);const o=255&i.reduce((e,t)=>e+t);return i=[175].concat(i).concat([o,236]),yield this._device.WriteValue(e.from(i)),new a.Ok(t.Id)})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=t=>s(this,void 0,void 0,(function*(){const r=Math.floor(255*t.Speed);if(r<5){const r=e.from([240,0,0,0,0,236]);return yield this._device.WriteValue(r),new a.Ok(t.Id)}let i=[];for(let e=0;e<7;++e)i=i.concat([r,20]);const o=255&i.reduce((e,t)=>e+t);return i=[255].concat(i).concat([o,236]),yield this._device.WriteValue(e.from(i)),new a.Ok(t.Id)})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(a.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},RotateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.Motorbunny=Motorbunny}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/VorzeA10Cyclone.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VorzeA10Cyclone=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");var d;!function(e){e[e.Rotate=1]="Rotate",e[e.Vibrate=3]="Vibrate"}(d||(d={}));class VorzeType{constructor(){this.Name="Vorze A10 Cyclone SA",this.CommandType=d.Rotate,this.DeviceType=1}}class VorzeA10Cyclone extends u.ButtplugDeviceProtocol{constructor(t){super("Vorze",t),this._devInfo=new VorzeType,this._clockwise=!0,this._speed=0,this.HandleRotateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Rotations.length)throw new c.ButtplugDeviceException("Vorze A10 Cyclone devices require RotateCmd to have 1 rotation command,"+` ${e.Rotations.length} sent.`,e.Id);return yield this.HandleVorzeA10CycloneCmd(new a.VorzeA10CycloneCmd(100*e.Rotations[0].Speed,e.Rotations[0].Clockwise,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return this._devInfo.CommandType===d.Vibrate?yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id)):yield this.HandleVorzeA10CycloneCmd(new a.VorzeA10CycloneCmd(0,!1,e.DeviceIndex,e.Id))})),this.HandleVorzeA10CycloneCmd=t=>s(this,void 0,void 0,(function*(){const r=255&((t.Clockwise?1:0)<<7|t.Speed);return yield this._device.WriteValue(e.from([this._devInfo.DeviceType,this._devInfo.CommandType,r])),new a.Ok(t.Id)})),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new c.ButtplugDeviceException("Vorze devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=t=>s(this,void 0,void 0,(function*(){const r=Math.round(100*t.Speed);return r!==this._speed&&(yield this._device.WriteValue(e.from([this._devInfo.DeviceType,this._devInfo.CommandType,r]))),new a.Ok(t.Id)}));const r=VorzeA10Cyclone.DevInfos.get(t.Name);void 0!==r&&(this._devInfo=r,this._name=this._devInfo.Name),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this._devInfo.CommandType===d.Rotate&&(this.MsgFuncs.set(a.VorzeA10CycloneCmd,this.HandleVorzeA10CycloneCmd),this.MsgFuncs.set(a.RotateCmd,this.HandleRotateCmd)),this._devInfo.CommandType===d.Vibrate&&(this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd))}get MessageSpecifications(){return this._devInfo.CommandType===d.Vibrate?{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:{RotateCmd:{FeatureCount:1},VorzeA10CycloneCmd:{},StopDeviceCmd:{}}}}t.VorzeA10Cyclone=VorzeA10Cyclone,VorzeA10Cyclone.DevInfos=new Map([["CycSA",Object.assign(new VorzeType,{Name:"Vorze A10 Cyclone SA",CommandType:d.Rotate,DeviceType:1})],["UFOSA",Object.assign(new VorzeType,{Name:"Vorze UFO SA",CommandType:d.Rotate,DeviceType:2})],["Bach smart",Object.assign(new VorzeType,{Name:"Vorze Bach",CommandType:d.Vibrate,DeviceType:6})]])}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/WeVibe.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WeVibe=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class WeVibe extends u.ButtplugDeviceProtocol{constructor(t){super(`WeVibe ${t.Name}`,t),this._vibratorCount=1,this._eightBitSpeed=!1,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this._max8bit=12,this.HandleVibrateCmd=t=>s(this,void 0,void 0,(function*(){if(t.Speeds.length<1||t.Speeds.length>this._vibratorCount)throw new c.ButtplugDeviceException("WeVibe devices require VibrateCmd at least "+`${this._vibratorCount} speed commands, ${t.Speeds.length} sent.`,t.Id);let r=!1;for(const e of t.Speeds)Math.abs(e.Speed-this._vibratorSpeed[e.Index])>.001&&(r=!0,this._vibratorSpeed[e.Index]=e.Speed);if(!r&&this._hasRunCommand)return new a.Ok(t.Id);this._hasRunCommand=!0;const i=e.from([15,3,0,0,0,3,0,0]);let o=0,n=0;return this._eightBitSpeed?(o=Math.round(this._vibratorSpeed[0]*this._max8bit),n=Math.round(this._vibratorSpeed[this._vibratorCount-1]*this._max8bit),i[3]=n+3,i[4]=o+3,i[5]=0===o?0:1,i[5]|=0===n?0:2):(o=Math.round(15*this._vibratorSpeed[0]),n=Math.round(15*this._vibratorSpeed[this._vibratorCount-1]),i[3]=n,i[3]|=o<<4),0===o&&0===n&&(i[1]=0,i[3]=0,i[4]=0,i[5]=0),0===o&&0===n&&(i[1]=0,i[5]=0),yield this._device.WriteValue(i),new a.Ok(t.Id)})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];for(let r=0;r<this._vibratorCount;r++)t.push(new a.SpeedSubcommand(r,e.Speed));return yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))})),this._vibratorCount=WeVibe.DualVibes.find(e=>e===t.Name)?2:1,WeVibe.NameMap.hasOwnProperty(t.Name)&&(this._name=WeVibe.NameMap[t.Name]),"Melt"===t.Name&&(this._max8bit=22),this._eightBitSpeed=!!WeVibe.EightBitSpeed.find(e=>e===t.Name),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._vibratorCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.WeVibe=WeVibe,WeVibe.DualVibes=["Cougar","4 Plus","4plus","classic","Classic","Gala","Nova","NOVAV2","Sync","Vector"],WeVibe.NameMap={Cougar:"4 Plus","4plus":"4 Plus",classic:"Classic",NOVAV2:"Nova"},WeVibe.EightBitSpeed=["Melt","Moxie","Vector"]}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/WebGamepadProtocol.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGamepadProtocol=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class WebGamepadProtocol extends u.ButtplugDeviceProtocol{constructor(t){super(`WebGamepad ${t.Name}`,t),this._currentCommands=[0,0],this.Initialize=()=>s(this,void 0,void 0,(function*(){return Promise.resolve()})),this.runVibration=()=>s(this,void 0,void 0,(function*(){const t=e.alloc(8);t.writeFloatLE(this._currentCommands[0],0),t.writeFloatLE(this._currentCommands[1],4),yield this._device.WriteValue(t),this._currentCommands[0]<.001&&this._currentCommands[1]<.001||setTimeout(()=>this.runVibration(),100)})),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(e.Speeds.length<=0||e.Speeds.length>2)throw new c.ButtplugDeviceException("WebGamepad devices require VibrateCmd to have 1 or 2 speed commands, "+`${e.Speeds.length} sent.`,e.Id);for(const t of e.Speeds)this._currentCommands[t.Index]=t.Speed;return yield this.runVibration(),new a.Ok(e.Id)})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=[];return t.push(new a.SpeedSubcommand(0,e.Speed)),t.push(new a.SpeedSubcommand(1,e.Speed)),yield this.HandleVibrateCmd(new a.VibrateCmd(t,e.DeviceIndex,e.Id))})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.WebGamepadProtocol=WebGamepadProtocol}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/devices/protocols/Youcups.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Youcups=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts");class Youcups extends u.ButtplugDeviceProtocol{constructor(e){super(`Youou ${e.Name}`,e),this._speed=0,this._sentVibration=!1,this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new c.ButtplugDeviceException("Youcups devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){const t=Math.round(8*e.Speed);return t===this._speed&&this._sentVibration||(this._sentVibration=!0,this._speed=t,yield this._device.WriteString(`$SYS,${t}?`)),new a.Ok(e.Id)})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.Youcups=Youcups},"./src/devices/protocols/Youou.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Youou=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/Exceptions.ts"),u=r("./src/devices/ButtplugDeviceProtocol.ts"),d=r("./src/devices/ButtplugDeviceReadOptions.ts"),l=r("./src/devices/Endpoints.ts");class Youou extends u.ButtplugDeviceProtocol{constructor(t){super(`Youou ${t.Name}`,t),this._packetId=0,this.Initialize=()=>s(this,void 0,void 0,(function*(){this._logger.Debug(`Calling Youou initialize on ${this._device.Name}`),yield this._device.ReadValue(new d.ButtplugDeviceReadOptions({Endpoint:l.Endpoints.Tx}))})),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Speeds.length)throw new c.ButtplugDeviceException("Youou devices require VibrateCmd to have 1 speed commands, "+`${e.Speeds.length} sent.`,e.Id);return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return yield this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(0,e.DeviceIndex,e.Id))})),this.HandleSingleMotorVibrateCmd=t=>s(this,void 0,void 0,(function*(){const r=247*t.Speed,i=t.Speed>0?1:0,o=e.from([170,85,this._packetId,2,3,1,r,i]);let n=0;for(const e of o)n^=e;const s=e.concat([o,e.from([n,255,0,0,0,0,0,0,0])]);return this._packetId+=1,this._packetId>255&&(this._packetId=0),yield this._device.WriteValue(s),new a.Ok(t.Id)})),this.MsgFuncs.set(a.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(a.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(a.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}}t.Youou=Youou}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/index.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r("./src/client/Client.ts"),t),o(r("./src/client/ButtplugClientDevice.ts"),t),o(r("./src/client/ButtplugBrowserWebsocketClientConnector.ts"),t),o(r("./src/client/ButtplugClientConnectorException.ts"),t),o(r("./src/client/ButtplugEmbeddedClientConnector.ts"),t),o(r("./src/client/ButtplugClientForwarder.ts"),t),o(r("./src/utils/ButtplugMessageSorter.ts"),t),o(r("./src/client/IButtplugClientConnector.ts"),t),o(r("./src/core/Messages.ts"),t),o(r("./src/core/MessageUtils.ts"),t),o(r("./src/core/Logging.ts"),t),o(r("./src/core/Exceptions.ts"),t),o(r("./src/devices/IButtplugDevice.ts"),t),o(r("./src/devices/IButtplugDeviceImpl.ts"),t),o(r("./src/devices/IButtplugDeviceProtocol.ts"),t),o(r("./src/devices/ButtplugDevice.ts"),t),o(r("./src/devices/ButtplugDeviceImpl.ts"),t),o(r("./src/devices/ButtplugDeviceProtocol.ts"),t),o(r("./src/devices/ButtplugDeviceReadOptions.ts"),t),o(r("./src/devices/ButtplugDeviceWriteOptions.ts"),t),o(r("./src/devices/Endpoints.ts"),t),o(r("./src/devices/configuration/IProtocolConfiguration.ts"),t),o(r("./src/devices/configuration/DeviceConfigurationManager.ts"),t),o(r("./src/devices/configuration/BluetoothLEProtocolConfiguration.ts"),t),o(r("./src/devices/configuration/SerialProtocolConfiguration.ts"),t),o(r("./src/devices/configuration/HIDProtocolConfiguration.ts"),t),o(r("./src/server/ButtplugServer.ts"),t),o(r("./src/server/IDeviceSubtypeManager.ts"),t),o(r("./src/server/managers/forwardeddevices/ForwardedDevice.ts"),t),o(r("./src/server/managers/forwardeddevices/ForwardedDeviceManager.ts"),t),o(r("./src/server/managers/forwardeddevices/ForwardedDeviceProtocol.ts"),t),o(r("./src/test/TestDeviceImpl.ts"),t),o(r("./src/test/TestDeviceProtocol.ts"),t),o(r("./src/test/TestDeviceSubtypeManager.ts"),t),o(r("./src/test/utils.ts"),t)},"./src/server/ButtplugServer.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugServer=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/core/MessageUtils.ts"),u=r("./src/server/DeviceManager.ts"),d=r("../../node_modules/events/events.js"),l=r("./src/core/Logging.ts"),f=r("./src/core/Messages.ts"),p=r("./src/core/Exceptions.ts");class ButtplugServer extends d.EventEmitter{constructor(e="Buttplug JS Internal Server",t=0){super(),this._serverName=e,this._maxPingTime=t,this._clientSchemaVersion=-1,this._clientName=void 0,this._pingTimedOut=!1,this._receivedRequestServerInfo=!1,this._logger=l.ButtplugLogger.Logger,this._outgoingLogLevel=l.ButtplugLogLevel.Off,this._connected=!1,this.AddDeviceManager=e=>{this._deviceManager.AddDeviceManager(e)},this.ClearDeviceManagers=()=>{this._deviceManager.ClearDeviceManagers()},this.Disconnect=()=>{this._connected=!1},this.CheckConnection=()=>{if(!this._connected)throw new Error("Server not connected to client.")},this.SendMessage=e=>s(this,void 0,void 0,(function*(){e instanceof f.RequestServerInfo||this.CheckConnection();const t=e.Id;if(this._logger.Trace(`Server: Got Message: ${e}`),0===t)throw p.ButtplugException.LogAndError(p.ButtplugMessageException,this._logger,"Message Id 0 is reserved for outgoing system messages. Use another Id.",t);if(this._pingTimedOut)throw p.ButtplugException.LogAndError(p.ButtplugPingException,this._logger,"Ping timed out.",t);if(!this._receivedRequestServerInfo&&e.Type!==a.RequestServerInfo)throw p.ButtplugException.LogAndError(p.ButtplugInitException,this._logger,"RequestServerInfo must be first message received by server.",t);switch(e.Type){case a.RequestLog:const r=e;return this._logger.Debug(`Server: RequestLog received for level ${r.LogLevel}`),r.LogLevel===l.ButtplugLogLevel[l.ButtplugLogLevel.Off]?this._logger.removeListener("log",this.OnLogMessage):this._outgoingLogLevel===l.ButtplugLogLevel.Off&&this._logger.addListener("log",this.OnLogMessage),this._logger.MaximumEventLogLevel=l.ButtplugLogLevel[r.LogLevel],this._outgoingLogLevel=l.ButtplugLogLevel[r.LogLevel],new a.Ok(r.Id);case a.Ping:return new a.Ok(e.Id);case a.RequestServerInfo:this._logger.Debug("Server: RequestServerInfo received.");const i=e;if(this._clientSchemaVersion>1)throw p.ButtplugException.LogAndError(p.ButtplugInitException,this._logger,`Client schema (${this._clientSchemaVersion}) newer than `+"server schema (1). Please upgrade server.",t);return this._receivedRequestServerInfo=!0,this._clientSchemaVersion=i.MessageVersion,this._clientName=i.ClientName,this._connected=!0,new a.ServerInfo(0,0,0,c.GetSchemaVersion(),this._maxPingTime,this._serverName,t);case a.Test:this._logger.Debug("Server: Test received.");const o=e;return new a.Test(o.TestString,e.Id)}return yield this._deviceManager.SendMessage(e)})),this.Shutdown=()=>s(this,void 0,void 0,(function*(){return this.Disconnect(),yield this._deviceManager.Shutdown()})),this.OnLogMessage=e=>{e.LogLevel>this._outgoingLogLevel||this.SendOutgoingMessage(new a.Log(l.ButtplugLogLevel[e.LogLevel],e.Message))},this.SendOutgoingMessage=e=>{if(this._connected){if(-1===this._clientSchemaVersion)throw p.ButtplugException.LogAndError(p.ButtplugMessageException,this._logger,"Cannot discern client schema version. Was RequestServerInfo message sent?");for(;e.SchemaVersion!==this._clientSchemaVersion&&e.SchemaVersion>0;)e=e.DowngradeMessage();this.emit("message",e)}},this._logger.Info(`Server: Starting Buttplug Server: ${this._serverName}`),this._deviceManager=new u.DeviceManager(e=>this.SendOutgoingMessage(e))}get DeviceManagers(){return this._deviceManager.DeviceManagers}}t.ButtplugServer=ButtplugServer},"./src/server/DeviceManager.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceManager=void 0;const a=n(r("./src/core/Messages.ts")),c=r("./src/server/managers/webbluetooth/WebBluetoothDeviceManager.ts"),u=r("./src/server/managers/webgamepad/WebGamepadDeviceManager.ts"),d=r("../../node_modules/events/events.js"),l=r("./src/core/Logging.ts"),f=r("./src/core/Exceptions.ts"),p=r("./src/devices/configuration/DeviceConfigurationManager.ts");class DeviceManager extends d.EventEmitter{constructor(e){super(),this._subtypeManagers=[],this._devices=new Map,this._deviceCounter=0,this._logger=l.ButtplugLogger.Logger,this.Shutdown=()=>s(this,void 0,void 0,(function*(){for(const e of this._devices.values())yield e.Disconnect()})),this.ClearDeviceManagers=()=>{this._logger.Info("DeviceManager: Clearing device subtype managers"),this._subtypeManagers=[]},this.AddDeviceManager=e=>{this._logger.Info(`DeviceManager: Adding Device Manager ${e.constructor.name}`),e.SetLogger(this._logger),this._subtypeManagers.push(e),e.addListener("deviceadded",this.OnDeviceAdded),e.addListener("deviceremoved",this.OnDeviceRemoved),e.addListener("scanningfinished",this.OnScanningFinished)},this.SendMessage=e=>s(this,void 0,void 0,(function*(){const t=e.Id;switch(e.Type){case a.StartScanning:if(this._logger.Debug("DeviceManager: Starting scan"),0===this._subtypeManagers.length)throw f.ButtplugException.LogAndError(f.ButtplugDeviceException,this._logger,"No device managers available, cannot scan.",t);for(const e of this._subtypeManagers)if(!e.IsScanning)try{yield e.StartScanning()}catch(e){for(const e of this._subtypeManagers)e.IsScanning&&e.StopScanning();throw e}return new a.Ok(t);case a.StopScanning:this._logger.Debug("DeviceManager: Stopping scan");for(const e of this._subtypeManagers)e.IsScanning&&e.StopScanning();return new a.Ok(t);case a.StopAllDevices:return this._logger.Debug("DeviceManager: Stopping all devices"),this._devices.forEach((e,t)=>s(this,void 0,void 0,(function*(){yield e.ParseMessage(new a.StopDeviceCmd)}))),new a.Ok(t);case a.RequestDeviceList:this._logger.Debug("DeviceManager: Sending device list");const e=[];return this._devices.forEach((t,r)=>{e.push(new a.DeviceInfoWithSpecifications(r,t.Name,t.MessageSpecifications))}),new a.DeviceList(e,t)}const r=e;if(void 0===r.DeviceIndex)throw f.ButtplugException.LogAndError(f.ButtplugMessageException,this._logger,`Message Type ${e.Type} unhandled by this server.`,t);if(!this._devices.has(r.DeviceIndex))throw f.ButtplugException.LogAndError(f.ButtplugDeviceException,this._logger,`Device Index ${r.DeviceIndex} does not exist`,t);const i=this._devices.get(r.DeviceIndex);return this._logger.Trace(`DeviceManager: Sending ${r.Type} to ${i.Name} (${r.Id})`),yield i.ParseMessage(r)})),this.OnDeviceAdded=e=>{for(const t of this._devices.values())if(t.Id===e.Id)return void this._logger.Info(`DeviceManager: Device ${e.Name} (id: ${e.Id}) already added, ignoring.`);const t=this._deviceCounter;this._deviceCounter+=1,this._devices.set(t,e),this._logger.Info(`DeviceManager: Device Added: ${e.Name} (${t})`),e.addListener("deviceremoved",this.OnDeviceRemoved),this._msgClosure(new a.DeviceAdded(t,e.Name,e.MessageSpecifications))},this.OnDeviceRemoved=e=>{let t=null;for(const[r,i]of Array.from(this._devices.entries()))if(i===e){t=r;break}null!==t&&(e.removeAllListeners("deviceremoved"),this._devices.delete(t),this._logger.Info(`DeviceManager: Device Removed: ${e.Name} (${t})`),this._msgClosure(new a.DeviceRemoved(t)))},this.OnScanningFinished=()=>{this._logger.Debug("DeviceManager: Scanning Finished.");for(const e of this._subtypeManagers)if(e.IsScanning)return;this._msgClosure(new a.ScanningFinished)},this._logger.Debug("DeviceManager: Starting Device Manager");try{p.DeviceConfigurationManager.Manager}catch(e){p.DeviceConfigurationManager.LoadFromInternalConfig()}"undefined"!=typeof window&&void 0!==window.navigator&&navigator.bluetooth?(this.AddDeviceManager(new c.WebBluetoothDeviceManager(this._logger)),this.AddDeviceManager(new u.WebGamepadDeviceManager(this._logger))):this._logger.Info("DeviceManager: Not adding WebBluetooth Manager, no WebBluetooth capabilities found."),this._msgClosure=e}get DeviceManagers(){return this._subtypeManagers}}t.DeviceManager=DeviceManager},"./src/server/IDeviceSubtypeManager.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/server/managers/forwardeddevices/ForwardedDevice.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedDevice=void 0;const o=r("./src/devices/ButtplugDeviceImpl.ts");class ForwardedDevice extends o.ButtplugDeviceImpl{constructor(e,t){super(e,t),this.Connect=()=>i(this,void 0,void 0,(function*(){return Promise.resolve()})),this.Disconnect=()=>{this.OnDisconnect()},this.OnDisconnect=()=>{this._logger.Debug(`ForwardedDevice: ${this.constructor.name} disconnecting`),this.emit("deviceremoved")},this.WriteValueInternal=(e,t)=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this.ReadValueInternal=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this.SubscribeToUpdatesInternal=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this.Unsubscribe=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")}))}get Connected(){return!0}}t.ForwardedDevice=ForwardedDevice},"./src/server/managers/forwardeddevices/ForwardedDeviceManager.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedDeviceManager=void 0;const o=r("./src/core/Logging.ts"),n=r("../../node_modules/events/events.js"),s=r("./src/devices/ButtplugDevice.ts"),a=r("./src/core/Messages.ts"),c=r("./src/server/managers/forwardeddevices/ForwardedDevice.ts"),u=r("./src/utils/ButtplugMessageSorter.ts"),d=r("./src/utils/Utils.ts"),l=r("./src/server/managers/forwardeddevices/ForwardedDeviceProtocol.ts");class ForwardedDeviceManager extends n.EventEmitter{constructor(e,t){super(),this._devices=new Map,this._sorter=new u.ButtplugMessageSorter(!1),this.SendMessage=e=>i(this,void 0,void 0,(function*(){const t=this._sorter.PrepareOutgoingMessage(e);return yield this._connector.SendMessage(e),t})),this.ParseConnectorMessage=e=>{switch(this._logger.Info("Got connector message."),e.constructor){case a.Ok:case a.Error:this._logger.Trace("Got remote ok/error"),this._sorter.ParseIncomingMessages([e]);break;case a.DeviceAdded:{const t=e;this._logger.Info(`Got device added for ${t.DeviceName}`);const r=new c.ForwardedDevice(t.DeviceName,d.getRandomInt(34).toString()),i=new l.ForwardedDeviceProtocol(r,t.DeviceIndex,t.DeviceMessages,e=>this.SendMessage(e)),o=new s.ButtplugDevice(i,r);this._devices.set(t.DeviceIndex,o),this.emit("deviceadded",o);break}case a.DeviceRemoved:{const t=e;if(!this._devices.has(t.DeviceIndex)){this._logger.Error("Cannot find remote device to remove!");break}const r=this._devices.get(t.DeviceIndex);this._devices.delete(t.DeviceIndex),this._logger.Info(`Got device removed for ${r.Name}`),r.Disconnect();break}default:this._logger.Error(`Unknown message: ${e}`)}},this.SetLogger(void 0!==e?e:o.ButtplugLogger.Logger),this._connector=t,this._connector.addListener("message",e=>{this.ParseConnectorMessage(e)})}SetLogger(e){this._logger=e}StartScanning(){return i(this,void 0,void 0,(function*(){this.emit("scanningfinished")}))}StopScanning(){}get IsScanning(){return!1}}t.ForwardedDeviceManager=ForwardedDeviceManager},"./src/server/managers/forwardeddevices/ForwardedDeviceProtocol.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardedDeviceProtocol=void 0;const o=r("./src/core/Exceptions.ts"),n=r("./src/devices/ButtplugDeviceProtocol.ts");class ForwardedDeviceProtocol extends n.ButtplugDeviceProtocol{constructor(e,t,r,n){super(`${e.Name}`,e),this._actualDeviceIndex=t,this._messageSpecs=r,this._clientSendClosure=n,this.Initialize=()=>i(this,void 0,void 0,(function*(){return Promise.resolve()})),this.ParseMessage=e=>i(this,void 0,void 0,(function*(){if(!this.MessageSpecifications.hasOwnProperty(e.Type.name))throw new o.ButtplugMessageException(`${this._name} cannot handle message of type ${e.Type.name}`,e.Id);return e.DeviceIndex=this._actualDeviceIndex,yield this._clientSendClosure(e)}))}get MessageSpecifications(){return this._messageSpecs}}t.ForwardedDeviceProtocol=ForwardedDeviceProtocol},"./src/server/managers/webbluetooth/WebBluetoothDevice.ts":function(e,t,r){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBluetoothDevice=void 0;const o=r("./src/core/Exceptions.ts"),n=r("./src/devices/ButtplugDeviceImpl.ts"),s=r("./src/devices/Endpoints.ts"),a=r("./src/devices/ButtplugDeviceReadOptions.ts");class WebBluetoothDevice extends n.ButtplugDeviceImpl{constructor(t,r){super(r.name,r.id),this._deviceConfig=t,this._device=r,this._notificationHandlers=new Map,this._characteristics=new Map,this.Connect=()=>i(this,void 0,void 0,(function*(){this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} connecting`),this._device.addEventListener("gattserverdisconnected",this.OnDisconnect),this._server=yield this._device.gatt.connect();for(const[e,t]of this._deviceConfig.Services){let r;try{try{if(!this._device.hasService(e))continue}catch(e){}r=yield this._server.getPrimaryService(e)}catch(t){this._logger.Debug(`Cannot find service ${e} on ${this._device.name}, continuing search: ${t}`);continue}if(0!==t.size)for(const[e,i]of t)this.SetNewCharacteristic(s.GetEndpoint(e),yield r.getCharacteristic(i));else{let e=[];try{e=yield r.getCharacteristics()}catch(e){const t=`getCharacteristics not implemented on this platform, cannot connect to ${this._device.name}`;throw o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,t)}for(const t of e)t.properties.write||t.properties.writeWithoutResponse||t.properties.reliableWrite?this.SetNewCharacteristic(s.Endpoints.Tx,t):(t.properties.read||t.properties.broadcast||t.properties.notify||t.properties.indicate)&&this.SetNewCharacteristic(s.Endpoints.Rx,t)}}if(0===this._characteristics.size)throw new o.ButtplugDeviceException(`No usable characteristics found for ${this._device.name}`)})),this.Disconnect=()=>i(this,void 0,void 0,(function*(){for(const e of this._notificationHandlers.keys())yield this.Unsubscribe(new a.ButtplugDeviceReadOptions({Endpoint:e}));this._server.disconnect()})),this.OnDisconnect=()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this._device.removeEventListener("gattserverdisconnected",this.OnDisconnect),this.emit("deviceremoved")},this.WriteValueInternal=(e,t)=>i(this,void 0,void 0,(function*(){this.CheckForCharacteristic(t.Endpoint);const r=this._characteristics.get(t.Endpoint);return yield r.writeValue(e)})),this.ReadValueInternal=t=>i(this,void 0,void 0,(function*(){this.CheckForCharacteristic(t.Endpoint);const r=this._characteristics.get(t.Endpoint);return e.from((yield r.readValue()).buffer)})),this.SubscribeToUpdatesInternal=e=>i(this,void 0,void 0,(function*(){if(this.CheckForCharacteristic(e.Endpoint),this._notificationHandlers.has(e.Endpoint)){const t=`${this._device.name} already subscribed to updates on characteristic ${e.Endpoint}`;throw o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,t)}const t=this._characteristics.get(e.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} subscribing to updates from ${t.uuid}`),yield t.startNotifications(),this._notificationHandlers.set(e.Endpoint,t=>{this.CharacteristicValueChanged(t,e.Endpoint)}),t.addEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint))})),this.Unsubscribe=e=>i(this,void 0,void 0,(function*(){if(this.CheckForCharacteristic(e.Endpoint),!this._notificationHandlers.has(e.Endpoint)){const t=`${this._device.name} not subscribed to updates on characteristic ${e.Endpoint}`;throw o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,t)}const t=this._characteristics.get(e.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} unsubscribing to updates from ${t.uuid}`),t.removeEventListener("characteristicvaluechanged",this._notificationHandlers.get(e.Endpoint)),this._notificationHandlers.delete(e.Endpoint),yield t.stopNotifications()})),this.CharacteristicValueChanged=(t,r)=>{const i=t.target.value,o=i.buffer,n=e.from(o,i.byteOffset,i.byteLength);this.UpdateReceived(r,n)}}get Connected(){return this._server.connected}CheckForCharacteristic(e){if(this._characteristics.has(e))return;const t=`Characteristic ${e} does not exist on device ${this._device.name}.`;throw o.ButtplugException.LogAndError(o.ButtplugDeviceException,this._logger,t)}SetNewCharacteristic(e,t){if(this._characteristics.has(e))throw new o.ButtplugDeviceException(`Endpoint ${e} already defined on ${this._device.name}`);this._characteristics.set(e,t)}}t.WebBluetoothDevice=WebBluetoothDevice}).call(this,r("../../node_modules/buffer/index.js").Buffer)},"./src/server/managers/webbluetooth/WebBluetoothDeviceManager.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBluetoothDeviceManager=void 0;const o=r("./src/core/Logging.ts"),n=r("./src/core/Exceptions.ts"),s=r("../../node_modules/events/events.js"),a=r("./src/devices/configuration/DeviceConfigurationManager.ts"),c=r("./src/devices/configuration/BluetoothLEProtocolConfiguration.ts"),u=r("./src/server/managers/webbluetooth/WebBluetoothDevice.ts"),d=r("./src/devices/ButtplugDevice.ts");class WebBluetoothDeviceManager extends s.EventEmitter{constructor(e){super(),this.OpenDevice=e=>i(this,void 0,void 0,(function*(){if(void 0===e)return;const t=a.DeviceConfigurationManager.Manager,r=new c.BluetoothLEProtocolConfiguration([e.name]),i=t.Find(r);if(void 0===i)return;const[o,n]=i,s=new u.WebBluetoothDevice(o,e);yield s.Connect();const l=new n(s),f=new d.ButtplugDevice(l,s);yield f.Initialize(),this.emit("deviceadded",f)})),this.SetLogger(void 0!==e?e:o.ButtplugLogger.Logger)}SetLogger(e){this._logger=e}StartScanning(){return i(this,void 0,void 0,(function*(){var e=navigator.userAgent.toLowerCase().indexOf("android")>-1;let t;t=e?{acceptAllDevices:!0,optionalServices:new Array}:{filters:new Array,optionalServices:new Array};const r=a.DeviceConfigurationManager.Manager.GetAllConfigsOfType(c.BluetoothLEProtocolConfiguration);for(const i of r){if(!e)for(const e of i.Names)try{e.endsWith("*")&&t.filters.push({namePrefix:e.substr(0,e.length-1)}),t.filters.push({name:e})}catch(e){console.log(e),console.log(i)}t.optionalServices=[...t.optionalServices,...i.Services.keys()]}let i;this._logger.Trace("Bluetooth filter set: "+JSON.stringify(t));try{i=yield navigator.bluetooth.requestDevice(t)}catch(e){if(this.emit("scanningfinished"),-1!==e.message.indexOf("User cancelled"))return;throw n.ButtplugException.LogAndError(n.ButtplugDeviceException,this._logger,"Bluetooth scanning interrupted. Either user cancelled out of dialog, or bluetooth radio is not available. Exception: "+e)}try{yield this.OpenDevice(i)}catch(e){throw this.emit("scanningfinished"),n.ButtplugException.LogAndError(n.ButtplugDeviceException,this._logger,`Cannot open device ${i.name}: ${e}`)}this.emit("scanningfinished")}))}StopScanning(){}get IsScanning(){return!1}}t.WebBluetoothDeviceManager=WebBluetoothDeviceManager},"./src/server/managers/webgamepad/WebGamepadDevice.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGamepadDevice=void 0;const o=r("./src/devices/ButtplugDeviceImpl.ts");class WebGamepadDevice extends o.ButtplugDeviceImpl{constructor(e){super(e.id,e.index.toString()),this._device=e,this.Connect=()=>i(this,void 0,void 0,(function*(){return Promise.resolve()})),this.Disconnect=()=>i(this,void 0,void 0,(function*(){})),this.OnDisconnect=()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this.emit("deviceremoved")},this.WriteValueInternal=(e,t)=>i(this,void 0,void 0,(function*(){const t=e.readFloatLE(0),r=e.readFloatLE(4);return this._gamepad.vibrationActuator.playEffect("dual-rumble",{duration:1e3,startDelay:0,weakMagnitude:t,strongMagnitude:r}),Promise.resolve()})),this.ReadValueInternal=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this.SubscribeToUpdatesInternal=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this.Unsubscribe=e=>i(this,void 0,void 0,(function*(){return Promise.reject("This should never be called")})),this._gamepad=e,window.addEventListener("gamepaddisconnected",e=>{e.gamepad.index===this._gamepad.index&&this.OnDisconnect()})}get Connected(){return this._gamepad.connected}}t.WebGamepadDevice=WebGamepadDevice},"./src/server/managers/webgamepad/WebGamepadDeviceManager.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGamepadDeviceManager=void 0;const o=r("./src/core/Logging.ts"),n=r("../../node_modules/events/events.js"),s=r("./src/server/managers/webgamepad/WebGamepadDevice.ts"),a=r("./src/devices/protocols/WebGamepadProtocol.ts"),c=r("./src/devices/ButtplugDevice.ts");class WebGamepadDeviceManager extends n.EventEmitter{constructor(e){super(),this._connectedGamepads=[],this.SetLogger(void 0!==e?e:o.ButtplugLogger.Logger),window.addEventListener("gamepadconnected",e=>{console.log("Gamepad connected"),console.log(e.gamepad),this._connectedGamepads.push(e.gamepad)}),window.addEventListener("gamepaddisconnected",e=>{console.log(`Gamepad disconnected ${e.gamepad}`),this._connectedGamepads.includes(e.gamepad)&&this._connectedGamepads.splice(this._connectedGamepads.indexOf(e.gamepad),1)})}SetLogger(e){this._logger=e}StartScanning(){return i(this,void 0,void 0,(function*(){for(const e of this._connectedGamepads){const t=new s.WebGamepadDevice(e),r=new a.WebGamepadProtocol(t),i=new c.ButtplugDevice(r,t);this.emit("deviceadded",i)}this._connectedGamepads=[],this.emit("scanningfinished")}))}StopScanning(){}get IsScanning(){return!1}}t.WebGamepadDeviceManager=WebGamepadDeviceManager},"./src/test/TestDeviceImpl.ts":function(e,t,r){"use strict";(function(e,i){var o=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDeviceImpl=void 0;const n=r("./src/devices/ButtplugDeviceImpl.ts");class TestDeviceImpl extends n.ButtplugDeviceImpl{constructor(e){super(e,e),this._connected=!0,this._lastValueWritten=[],this._valueToRead=new Map}get Connected(){return this._connected}get LastValueWritten(){return this._lastValueWritten.shift()}SetValueToRead(e,t){this._valueToRead.set(e,t)}Connect(){return o(this,void 0,void 0,(function*(){return Promise.resolve()}))}Disconnect(){this._connected=!1,this.emit("deviceremoved",this)}ReadValueInternal(t){return o(this,void 0,void 0,(function*(){if(!this._valueToRead.has(t.Endpoint))return Promise.resolve(e.from([]));const r=this._valueToRead.get(t.Endpoint);return this._valueToRead.delete(t.Endpoint),Promise.resolve(r)}))}WriteValueInternal(e,t){return o(this,void 0,void 0,(function*(){return this._lastValueWritten.push([t.Endpoint,e]),Promise.resolve()}))}SubscribeToUpdatesInternal(e){return o(this,void 0,void 0,(function*(){return Promise.resolve()}))}ScheduleUpdateOnNextTick(e,t){i.nextTick(()=>this.emit("updateReceived",[e,t]))}}t.TestDeviceImpl=TestDeviceImpl}).call(this,r("../../node_modules/buffer/index.js").Buffer,r("../../node_modules/process/browser.js"))},"./src/test/TestDeviceProtocol.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TestDeviceProtocol=void 0;const a=r("./src/index.ts"),c=n(r("./src/index.ts")),u=r("./src/devices/ButtplugDeviceProtocol.ts"),d=r("./src/test/TestDeviceImpl.ts"),l=r("./src/core/Exceptions.ts");class TestDeviceProtocol extends u.ButtplugDeviceProtocol{constructor(e,t,r,i,o){if(super(`Test Device - ${e}`,t),this._linearSpeed=0,this._linearPosition=0,this._vibrateSpeed=0,this._rotateSpeed=0,this._rotateClockwise=!1,this._shouldVibrate=!1,this._shouldRotate=!1,this._shouldLinear=!1,this.HandleStopDeviceCmd=e=>s(this,void 0,void 0,(function*(){return this.MsgFuncs.has(c.VibrateCmd)?this.emit("vibrate",0):this.MsgFuncs.has(c.LinearCmd)&&this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new c.Ok(e.Id))})),this.HandleSingleMotorVibrateCmd=e=>s(this,void 0,void 0,(function*(){return this._vibrateSpeed=e.Speed,this.emit("vibrate",e.Speed),Promise.resolve(new c.Ok(e.Id))})),this.HandleVibrateCmd=e=>s(this,void 0,void 0,(function*(){return this.HandleSingleMotorVibrateCmd(new a.SingleMotorVibrateCmd(e.Speeds[0].Speed,e.DeviceIndex,e.Id))})),this.HandleRotateCmd=e=>s(this,void 0,void 0,(function*(){return this._rotateSpeed=e.Rotations[0].Speed,this._rotateClockwise=e.Rotations[0].Clockwise,this.emit("vibrate",{speed:this._rotateSpeed,clockwise:this._rotateClockwise}),Promise.resolve(new c.Ok(e.Id))})),this.HandleFleshlightLaunchFW12Cmd=e=>s(this,void 0,void 0,(function*(){return this._linearPosition=e.Position,this._linearSpeed=e.Speed,this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new c.Ok(e.Id))})),this.HandleLinearCmd=e=>s(this,void 0,void 0,(function*(){if(1!==e.Vectors.length)return new c.Error("LinearCmd requires 1 vector for this device.",c.ErrorClass.ERROR_DEVICE,e.Id);const t=e.Vectors[0],r=100*t.Position,i=Math.abs(r-this._linearPosition);let o=Math.floor(25e3*Math.pow(90*t.Duration/i,-1.05));o=Math.min(Math.max(o,0),95);const n=Math.floor(r/99*90+4.5);return yield this.HandleFleshlightLaunchFW12Cmd(new c.FleshlightLaunchFW12Cmd(o,n,e.DeviceIndex,e.Id))})),this._shouldVibrate=r,this._shouldLinear=i,this._shouldRotate=o,this.MsgFuncs.set(c.StopDeviceCmd,this.HandleStopDeviceCmd),!(t instanceof d.TestDeviceImpl))throw new l.ButtplugDeviceException("TestDeviceProtocol can only be constructed with a TestDeviceImpl");this._shouldVibrate&&(this.MsgFuncs.set(c.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(c.VibrateCmd,this.HandleVibrateCmd)),this._shouldLinear&&(this.MsgFuncs.set(c.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(c.LinearCmd,this.HandleLinearCmd)),this._shouldRotate&&this.MsgFuncs.set(c.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return this.MsgFuncs.has(c.VibrateCmd)?{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(c.LinearCmd)?{LinearCmd:{FeatureCount:1},FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(c.RotateCmd)?{RotateCmd:{FeatureCount:1},StopDeviceCmd:{}}:{}}}t.TestDeviceProtocol=TestDeviceProtocol},"./src/test/TestDeviceSubtypeManager.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestDeviceSubtypeManager=void 0;const i=r("../../node_modules/events/events.js"),o=r("./src/test/TestDeviceProtocol.ts"),n=r("./src/index.ts"),s=r("./src/devices/ButtplugDevice.ts"),a=r("./src/test/TestDeviceImpl.ts");class TestDeviceSubtypeManager extends i.EventEmitter{constructor(){super(),this._logger=n.ButtplugLogger.Logger,this._isScanning=!1;const e=new a.TestDeviceImpl("Test Vibration Device");this._testVibrationProtocol=new o.TestDeviceProtocol(e.Name,e,!0,!1,!1),this._testVibrationDevice=new s.ButtplugDevice(this._testVibrationProtocol,e);const t=new a.TestDeviceImpl("Test Linear Device");this._testLinearProtocol=new o.TestDeviceProtocol(t.Name,t,!1,!0,!1),this._testLinearDevice=new s.ButtplugDevice(this._testLinearProtocol,t);const r=new a.TestDeviceImpl("Test Rotation Device");this._testRotationProtocol=new o.TestDeviceProtocol(r.Name,r,!1,!1,!0),this._testRotationDevice=new s.ButtplugDevice(this._testRotationProtocol,r)}SetLogger(e){this._logger=e}ConnectVibrationDevice(){this._logger.Debug("TestDeviceManager: Connecting Vibration Device"),this.emit("deviceadded",this._testVibrationDevice)}ConnectLinearDevice(){this._logger.Debug("TestDeviceManager: Connecting Linear Device"),this.emit("deviceadded",this._testLinearDevice)}ConnectRotationDevice(){this._logger.Debug("TestDeviceManager: Connecting Rotation Device"),this.emit("deviceadded",this._testRotationDevice)}StartScanning(){this._logger.Debug("TestDeviceManager: Starting Scan"),this._isScanning=!0,setTimeout(()=>{this.ConnectVibrationDevice(),this.ConnectLinearDevice(),this.ConnectRotationDevice()},50),setTimeout(()=>this.StopScanning(),100)}get VibrationDevice(){return this._testVibrationDevice}get LinearDevice(){return this._testLinearDevice}get RotationDevice(){return this._testRotationDevice}get VibrationProtocol(){return this._testVibrationProtocol}get LinearProtocol(){return this._testLinearProtocol}get RotationProtocol(){return this._testRotationProtocol}StopScanning(){this._logger.Debug("TestDeviceManager: Stopping Scan"),this._isScanning=!1,this.emit("scanningfinished")}get IsScanning(){return this._isScanning}}t.TestDeviceSubtypeManager=TestDeviceSubtypeManager},"./src/test/utils.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTestClient=void 0;const o=r("./src/index.ts"),n=r("./src/test/TestDeviceSubtypeManager.ts");t.CreateTestClient=function CreateTestClient(){return i(this,void 0,void 0,(function*(){const e=new o.ButtplugClient("Test Client"),t=new o.ButtplugServer("Test Server");t.ClearDeviceManagers(),t.AddDeviceManager(new n.TestDeviceSubtypeManager);const r=new o.ButtplugEmbeddedClientConnector;return r.Server=t,yield e.Connect(r),Promise.resolve(e)}))}},"./src/utils/ButtplugBrowserWebsocketConnector.ts":function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(o,n){function fulfilled(e){try{step(i.next(e))}catch(e){n(e)}}function rejected(e){try{step(i.throw(e))}catch(e){n(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugBrowserWebsocketConnector=void 0;const o=r("../../node_modules/events/events.js"),n=r("./src/core/MessageUtils.ts");class ButtplugBrowserWebsocketConnector extends o.EventEmitter{constructor(e){super(),this._url=e,this.Connect=()=>i(this,void 0,void 0,(function*(){const e=new WebSocket(this._url);let t,r;const o=new Promise((e,i)=>{t=e,r=i}),conErrorCallback=e=>r();return e.addEventListener("open",o=>i(this,void 0,void 0,(function*(){this._ws=e;try{yield this.Initialize(),this._ws.addEventListener("message",e=>{this.ParseIncomingMessage(e)}),this._ws.removeEventListener("close",conErrorCallback),this._ws.addEventListener("close",this.Disconnect),t()}catch(e){console.log(e),r()}}))),e.addEventListener("close",conErrorCallback),o})),this.Disconnect=()=>i(this,void 0,void 0,(function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))})),this.Initialize=()=>i(this,void 0,void 0,(function*(){return Promise.resolve()}))}get Connected(){return void 0!==this._ws}SendMessage(e){if(!this.Connected)throw new Error("ButtplugBrowserWebsocketConnector not connected");this._ws.send("["+e.toJSON()+"]")}ParseIncomingMessage(e){if(console.log("Calling parent parse incoming"),"string"==typeof e.data){const t=n.FromJSON(e.data);this.emit("message",t)}else if(e.data instanceof Blob){const t=new FileReader;t.addEventListener("load",e=>{this.OnReaderLoad(e)}),t.readAsText(e.data)}}OnReaderLoad(e){const t=n.FromJSON(e.target.result);this.emit("message",t)}}t.ButtplugBrowserWebsocketConnector=ButtplugBrowserWebsocketConnector},"./src/utils/ButtplugMessageSorter.ts":function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtplugMessageSorter=void 0;const s=n(r("./src/core/Messages.ts")),a=r("./src/core/Exceptions.ts");t.ButtplugMessageSorter=class ButtplugMessageSorter{constructor(e){this._useCounter=e,this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(e){let t,r;this._useCounter&&(e.Id=this._counter,this._counter+=1);const i=new Promise((e,i)=>{t=e,r=i});return this._waitingMsgs.set(e.Id,[t,r]),i}ParseIncomingMessages(e){const t=[];for(const r of e)if(r.Id!==s.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(r.Id)){const[e,t]=this._waitingMsgs.get(r.Id);if(r.Type===s.Error){t(a.ButtplugException.FromError(r));continue}e(r)}else t.push(r);return t}}},"./src/utils/Utils.ts":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomInt=void 0,t.getRandomInt=function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}}})}));
//# sourceMappingURL=buttplug.min.js.map